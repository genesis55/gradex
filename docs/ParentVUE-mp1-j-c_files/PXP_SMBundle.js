/*! For license information please see PXP_SMBundle.js.LICENSE.txt */
(()=>{var e={7883:e=>{e.exports='<div class="st-modal modal sm-app" tabindex="-1" role="dialog" data-bind="attr: { id: id }">\r\n    <div class="compose-dialog modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title"></h2>\r\n            </div>\r\n            <div class="recipients-header">\r\n                <div id="composeRecipients" class="form-control recipient-box-large">\r\n                    <span data-bind="foreach: recipients">\r\n                        <sm-recipient-box class="recipient" params="options: { recipient: $data, onRemove: $parent.removeRecipient.bind($parent), readOnly: false }"></sm-recipient-box>\r\n                    </span>\r\n                    <sm-recipient-box params="options: { recipient: dummyRecipient, readOnly: false }" data-bind="attr: { id: \'toDummy\' + id }" class="hidden"></sm-recipient-box>\r\n                    <sm-recipient-box id="animationBox" params="options: animationBoxOptions" class="hidden"></sm-recipient-box>\r\n                    <div data-bind="css: { \'invisible\': recipients().length > 0 }"><span class="select-recipient-text" data-bind="text: \'<\' + SM.translation.selectFromList() + \'>\'"></span></div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body" style="padding-bottom: 0 !important;">\r\n                <div id="recipientTabs" data-bind="dxTabs: recipientTabOptions"></div>\r\n                <div class="row no-edge-padding margin-top" data-bind="visible: (SM.userType === UserType.Staff && selectedTab()?.id !== RecipientList.UserGroups && (SM.staffRecipientAccess === StaffRecipientAccess.District || SM.allowEmailAtFocus())) || (SM.userType !== UserType.Staff && selectedTab()?.id === RecipientList.Staff) || selectedTab()?.id === RecipientList.StudentGroups || (SM.userType === UserType.Student && selectedTab()?.id === RecipientList.Students && SM.studentRecipientAccess !== StudentRecipientAccess.SchoolStaff)">\r\n                    <div class="col-md-6" data-bind="visible: SM.userType !== UserType.Staff || (SM.userType === UserType.Staff && SM.staffRecipientAccess === StaffRecipientAccess.District)">\r\n                        <div data-bind="dxSelectBox: selectOrganizationOptions"></div>\r\n                    </div>\r\n                    <div class="col-md-6" data-bind="visible: selectedTab()?.id === RecipientList.ContactGroups & SM.userType === UserType.Staff">\r\n                        <div data-bind="dxRadioGroup: contactGroupScopeOptions"></div>\r\n                    </div>\r\n                    <div class="col-md-6" data-bind="visible: (selectedTab()?.id === RecipientList.Parents || selectedTab()?.id === RecipientList.Students) && SM.editorVM?.isTeacher">\r\n                        <div data-bind="dxSelectBox: selectSectionOptions"></div>\r\n                    </div>\r\n                    <div class="col-md-6" data-bind="visible: selectedTab()?.id === RecipientList.Classes && SM.editorVM?.isTeacher && SM.teacherStudentAccess === TeacherStudentAccess.All">\r\n                        <div data-bind="dxRadioGroup: classScopeOptions"></div>\r\n                    </div>\r\n                    <div class="col-md-6" data-bind="visible: selectedTab()?.id === RecipientList.MassStudentGroups && SM.editorVM?.isTeacher && SM.teacherStudentAccess === TeacherStudentAccess.All">\r\n                        <div data-bind="dxRadioGroup: massStudentGroupScopeOptions"></div>\r\n                    </div>\r\n                </div>\r\n                                                \r\n                <sm-recipient-search params="options: staffSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Staff"></sm-recipient-search>\r\n                <sm-recipient-search params="options: parentSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Parents"></sm-recipient-search>\r\n                <sm-recipient-search params="options: studentSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Students"></sm-recipient-search>\r\n                <sm-recipient-search params="options: classSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Classes"></sm-recipient-search>\r\n                <sm-recipient-search params="options: teacherSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Teachers"></sm-recipient-search>\r\n                <sm-recipient-search params="options: counselorSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.Counselors"></sm-recipient-search>\r\n                <sm-recipient-search params="options: studentGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.StudentGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: massStudentGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.MassStudentGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: userGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.UserGroups"></sm-recipient-search>\r\n                <sm-recipient-search params="options: massEmailSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.MassEmail"></sm-recipient-search>\r\n                <sm-recipient-search params="options: contactGroupSearchOptions" data-bind="visible: selectedTab()?.id === RecipientList.ContactGroups"></sm-recipient-search>\r\n            </div>\r\n            <div class="modal-footer" style="margin-top: 0;">\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="text: (showAdvanced() ? \'Hide Advanced\' : \'Show Advanced\'), click: save, visible: SM.editorVM?.isTeacher && SM.enableShowAdvanced && SM.enableVUEEnhancements, click: toggleAdvanced"></button>\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="click: newContactGroup, text: SM.translation.newContactGroup, visible: selectedTab()?.id === RecipientList.ContactGroups && SM.userType === UserType.Staff && SM.allowEmailAtFocus()"></button>\r\n                <button id="cancelAddRecipients" type="button" class="btn btn-default" data-bind="click: cancel, text: SM.translation.cancel"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.ok"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},9:e=>{e.exports='<div class="audio-recorder">\r\n    <div class="audio-controls">\r\n        <span data-bind="click: handleRecordStartStop"><i style="color: red"data-bind="attr:{class: recordingStartStopIconClass}"></i></span>\r\n        <span class="duration" data-bind="text: mediaRecorderDuration"></span>\r\n    </div>\r\n    <div class="audio-player" data-bind="visible: audioSrc">\r\n        <span data-bind="click: handlePlayPauseClick"><i data-bind="attr:{class: playPauseIconClass}"></i></span>\r\n        <input class="amountPlayed" type="range" data-bind="value: audioPlayerCurrentAmount, event: {change: handleAmountPlayedChange}" />\r\n        <span class="amountPlayedTime" data-bind="text: audioPlayerCurrentTimeAndDuration"></span>\r\n        <span><i class="fa-solid fa-volume fa-3x"></i></span>\r\n        <input class="volume" type="range" data-bind="value: audioPlayerCurrentAmount, valueUpdate: \'input\'"/>\r\n    </div>\r\n</div>'},605:e=>{e.exports='<div class="form-horizontal padding-lg">\r\n    <sm-recipient-list-edit params="options: toRecipientListOptions"></sm-recipient-list-edit>\r\n\r\n    <div class="form-group">\r\n        <label class="col-md-1 control-label">Messages</label>\r\n        <div class="col-md-11">\r\n            <div data-bind="dxSelectBox: messageRelationshipOptions"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label class="col-md-1 control-label">Keywords</label>\r\n        <div class="col-md-11">\r\n            <input type="text" class="form-control" style="width: 100%;" data-bind="value: keywords" />\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label class="col-md-1 control-label">Search</label>\r\n        <div class="col-md-11">\r\n            <span data-bind="dxCheckBox: { value: searchSubject }"></span> <span class="margin-right">Subject</span>\r\n            <span data-bind="dxCheckBox: { value: searchBody }"></span> <span class="margin-right">Body</span>\r\n            <span data-bind="dxCheckBox: { value: searchAttachmentNames }"></span> <span class="margin-right">Attachment Names</span>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label class="col-md-1 control-label">From</label>\r\n        <div class="col-md-11">\r\n            <div class="form-inline">\r\n                <div class="form-group">\r\n                    <div class="col-md-12">\r\n                        <div class="margin-right" data-bind="dxDateBox: fromDateOptions, dxValidator: requiredFieldValidator"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label class="col-md-1 control-label">To</label>\r\n                    <div class="col-md-10">\r\n                        <div data-bind="dxDateBox: toDateOptions, dxValidator: requiredFieldValidator"></div>\r\n                    </div>\r\n                </div>\r\n                <button type="button" class="btn btn-primary" data-bind="click: search, visible: renderGrid">Search</button>\r\n                <button type="button" class="btn btn-default" data-bind="click: print, visible: renderGrid">Print</button>\r\n                <button type="button" class="btn btn-default" data-bind="click: createRetentionSet, visible: renderGrid">Create Retention Set</button>\r\n                <span data-bind="visible: limitResults" class="results-limited">Note: Results have been limited to 1,000 emails.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div data-bind="dxDataGrid: messageGridOptions, visible: renderGrid" class="margin-top"></div>'},867:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="composeDialog" data-bind="attr: { \'aria-label\': titleText }">\r\n    <div id="composeDialogDrag" role="document" data-bind="css: { \'modal-dialog compose-dialog\': windowSize() === 0, \'compose-dialog-maximized\': windowSize() === 1 }">\r\n        <div data-bind="css: { \'modal-content\': windowSize() === 0, \'modal-content-maximized\': windowSize() === 1 }">\r\n            <div class="modal-header">\r\n                <span class="button fa fa-times" data-bind="click: close"></span>\r\n                <span class="button fa" data-bind="click: toggleWindowSize, css: { \'fa-window-maximize\': windowSize() === 0, \'fa-window-restore\': windowSize() === 1 }"></span>\r\n                <h2 class="modal-title">\r\n                    <span data-bind="text: titleText"></span>\r\n                </h2>\r\n            </div>\r\n            <sm-editor params="options: editorOptions"></sm-editor>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},5733:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" data-bind="attr: { id: dialogId }">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="html: title"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <div data-bind="visible: type() === SMDialogType.Message, html: message"></div>\r\n                    <div class="form-group" data-bind="visible: type() === SMDialogType.Input, css: { \'has-error\': !formValid() }">\r\n                        <label for="input" data-bind="html: message"></label>\r\n                        <input id="input" type="text" class="form-control" data-bind="textInput: input, hasFocus: inputHasFocus, event: { focus:inputFocused }" />\r\n                        <span class="help-block" data-bind="visible: !formValid(), html: validationMessage"></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer" style="text-align: left;">\r\n                <div class="pull-right" data-bind="foreach: rightButtons">\r\n                    <button type="button" class="btn btn-default" data-bind="attr: { class: $data.css === undefined ? \'btn\' : css }, click: $parent.buttonPressed.bind($parent, value), text: label"></button>\r\n                </div>\r\n                <div data-bind="foreach: leftButtons">\r\n                    <button type="button" class="btn btn-default" data-bind="attr: { class: $data.css === undefined ? \'btn\' : css }, click: $parent.buttonPressed.bind($parent, value), text: label"></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},7319:e=>{e.exports='<div class="st-modal modal sm-app" tabindex="-1" role="dialog" id="editContactGroupDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title()"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <label for="name" data-bind="text: SM.translation.name()"></label>\r\n                    <input id="name" type="text" class="form-control" data-bind="textInput: contactGroup().name, hasFocus: nameHasFocus, event: { focus: nameFocused }" />\r\n                    <span class="help-block" data-bind="visible: !nameValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="description" data-bind="text: SM.translation.description()"></label>\r\n                    <input id="description" type="text" class="form-control" data-bind="textInput: contactGroup().description" />\r\n                    <span class="help-block" data-bind="visible: !descriptionValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                </div>\r\n                <div class="form-group" data-bind="visible: SM.contactListSecurity === ContactListSecurity.PublicSchool || SM.contactListSecurity === ContactListSecurity.PublicDistrict">\r\n                    <div class="row no-edge-padding">\r\n                        <div class="col-md-1">\r\n                            <label data-bind="text: SM.translation.public()"></label>\r\n                        </div>\r\n                        <div class="col-md-11">\r\n                            <span id="public" data-bind="dxCheckBox: { value: contactGroup().isPublic }"></span>\r\n                            <div data-bind="dxTooltip: { target: \'#public\', showEvent: \'mouseenter\', hideEvent: \'mouseleave\', position: \'right\' }">Visible to other staff</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" data-bind="visible: contactGroup().isPublic() && SM.contactListSecurity === ContactListSecurity.PublicDistrict">\r\n                    <label data-bind="text: SM.translation.school()"></label>\r\n                    <div data-bind="dxSelectBox: selectOrganizationOptions"></div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <sm-recipient-list-edit class="row" params="options: recipientListOptions"></sm-recipient-list-edit>\r\n                    <span class="help-block" data-bind="visible: formError, text: formError"></span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2509:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editFolderDialog">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: title"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group" data-bind="css: { \'has-error\': !formValid() || formError() }">\r\n                    <label for="folderName" data-bind="text: SM.translation.enterFolderName()"></label>\r\n                    <input id="folderName" type="text" maxlength="20" class="form-control" data-bind="textInput: folder().name, hasFocus: folderNameHasFocus, event: { focus: folderNameFocused }" />\r\n                    <span class="help-block" data-bind="visible: !formValid(), text: SM.translation.enterValidFolderName()"></span>\r\n                    <span class="help-block" data-bind="visible: formError, text: formError"></span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},7935:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editSignatureDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: SM.translation.editSignatures"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group">\r\n                    <label data-bind="text: SM.translation.newMessages"></label>\r\n                    <p><textarea id="newSignature"></textarea></p>                    \r\n                </div>\r\n                <div class="form-group">\r\n                    <label data-bind="text: SM.translation.repliesForwards"></label>\r\n                    <p><textarea id="repliesSignature"></textarea></p>                    \r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},6224:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="editTemplateDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Edit Template</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-group" data-bind="css: { \'has-error\': !formValid() }">\r\n                    <label for="templateName">Enter template name</label>\r\n                    <input id="templateName" type="text" class="form-control" data-bind="textInput: template().name, hasFocus: templateNameHasFocus, event: { focus: templateNameFocused }"\r\n                    />\r\n                    <span class="help-block" data-bind="visible: !formValid()">Enter valid template name</span>\r\n                </div>\r\n                <div class="form-group">\r\n                    <textarea id="template"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide">Cancel</button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save">Save</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},3298:(e,t,a)=>{var i=a(7091)(a(1334)),n='<div data-bind="if: composeOptions">\r\n    <div class="modal-header clearfix" style="text-align: left;">\r\n        <span data-bind="visible: allowSend() && !composeOptions().isEditingTemplate">\r\n            <button type="button" class="btn btn-success" data-bind="click: send, text: sendText, visible: !allowScheduleSend"></button>\r\n            <div class="btn-group" data-bind="visible: allowScheduleSend">\r\n                <button type="button" class="btn btn-success" data-bind="click: send, text: sendText"></button>\r\n                <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only">Toggle Dropdown</span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" data-bind="click: openScheduleSend">Schedule Send</a></li>\r\n                </ul>\r\n            </div>\r\n            <button type="button" class="btn btn-warning" data-bind="click: close, text: SM.translation.close(), visible: !isEmbedded()"></button>\r\n        </span>\r\n        <span data-bind="visible: composeOptions().isEditingTemplate">\r\n            <button type="button" class="btn btn-success" data-bind="click: close">Save Template</button>\r\n            <button type="button" class="btn btn-warning" data-bind="click: close">Close</button>\r\n        </span>\r\n        <button type="button" class="btn btn-primary pull-right" data-bind="visible: allowAttachments, click: addAttachment, text: SM.translation.addAttachment(), disable: isUploadingAttachment"></button>\r\n        <div class="pull-right auto-save-text" data-bind="visible: allowDraft">\r\n            <span data-bind="visible: isDirty() && !showAutoSaving()">Unsaved Changes</span>\r\n            <span data-bind="visible: showAutoSaving">\r\n                <img src="'+i+'" style="width: 12px; margin-top: -2px;">\r\n                <span data-bind="text: SM.translation.autosaving()"></span>\r\n            </span>\r\n            <span data-bind="visible: !showAutoSaving() && !isDirty(), text: autoSaveResults"></span>\r\n        </div>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="form-horizontal">\r\n\r\n            <div data-bind="dxTabs: communicationTabOptions, visible: (allowSMS() && SM.smsTabVisible) || (allowVoice() && SM.voiceTabVisible)" style="margin-bottom: 2rem;"></div>\r\n\r\n            <div data-bind="visible: message().isMeeting">\r\n                <div class="form-group">\r\n                    <label id="topicLabel" class="col-md-1 control-label" data-bind="text: SM.translation.topic()"></label>\r\n                    <div class="col-md-11">\r\n                        <input id="composeTopic" type="text" class="form-control" style="width: 100%;" data-bind="textInput: message().subject, hasFocus: topicHasFocus" aria-labelledby="topicLabel" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" data-bind="visible: message().isMeeting()">\r\n                    <div class="form-group col-lg-6 col-sm-12" style="padding: 0;">\r\n                        <label id="meetingLabel" class="col-lg-2 col-xs-1 control-label" data-bind="text: SM.translation.meeting()"></label>\r\n                        <div class="flexbox horizontal col-lg-10 col-sm-6">\r\n                            <button data-bind="click: setMeetingStartTimeNow, text: SM.translation.now()" class="btn btn-primary" style="border-radius: 4px 0 0 4px;"></button>\r\n                            <div data-bind="dxDateBox: meetingDateOptions" style="border-radius: 0; min-width: 145px;"></div>\r\n                            <div data-bind="dxDateBox: meetingStartTimeOptions" style="border-radius: 0 4px 4px 0; min-width: 130px;"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-lg-6 col-sm-12" style="padding: 0;">\r\n                        <label id="durationLabel" class="col-lg-2 col-xs-1 control-label" data-bind="text: SM.translation.duration()"></label>\r\n                        <div class="flexbox horizontal col-lg-10 col-sm-6">\r\n                            <div class="flexbox horizontal height-fix" style="min-width: 105px;">\r\n                                <div data-bind="dxSelectBox: hourOptions" style="border-radius: 4px 0 0 4px;"></div>\r\n                            </div>\r\n                            <div class="flexbox horizontal height-fix" style="min-width: 115px;">\r\n                                <div data-bind="dxSelectBox: minuteOptions" style="border-radius: 0 4px 4px 0;"></div>\r\n                            </div>\r\n                            <div class="flexbox height-fix" style="margin-left: 15px;">\r\n                                <button data-bind="click: editRecurrence, text: \'Recurrence\', css: { \'btn-primary\': message().recurrence() }" class="btn btn-default">Recurrence</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" data-bind="visible: message().isMeeting() && message().recurrence()">\r\n                    <label id="meetingLabel" class="col-md-1 control-label">Recurrence</label>\r\n                    <div class="form-control-static col-lg-11 col-md-12">\r\n                        <span data-bind="text: recurrenceText"></span>\r\n                        -\r\n                        <a href="#" data-bind="click: removeRecurrence">Remove</a>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr />\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id !== CommunicationType.Social">\r\n                <div data-bind="visible: !composeOptions().isEditingTemplate">\r\n                    <div class="form-group" data-bind="visible: composeOptions().isUrgent">\r\n                        <label class="col-md-1 control-label">Focus</label>\r\n                        <div class="col-md-11">\r\n                            <div class="form-control-static" data-bind="text: focusedOrganization()"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="clearfix col-md-12" data-bind="visible: !composeOptions().isUrgent">\r\n                        <div class="pull-right">\r\n                            <a href="#" data-bind="click: showCc, visible: showCcVisible, text: SM.translation.cc()"></a>\r\n                            <a href="#" data-bind="click: showBcc, visible: showBccVisible() && SM.showBCC, text: SM.translation.bcc()"></a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: SM.userType === UserType.Staff">\r\n                        <label id="fromLabel" class="col-md-1 control-label" data-bind="text: SM.translation.from()"></label>\r\n                        <div class="col-md-11 flexbox horizontal height-fix">\r\n                            <div aria-labelledby="fromLabel" style="width: 100%;" data-bind="dxSelectBox: fromSettings"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div data-bind="visible: SM.editorVM.isTeacher && SM.enableVUEEnhancements">\r\n                        <div class="form-group">\r\n                            <div class="col-md-1"></div>\r\n                            <div class="col-md-11">\r\n                                <div class="row no-edge-padding compose-section">\r\n                                    <div class="col-md-12">\r\n                                        <div data-bind="visible: isStudentSpecific">\r\n                                            <div class="row form-control no-edge-padding" style="height: auto;">\r\n                                                <div class="col-md-6">\r\n                                                    <p><strong>Student / Parents / Guardians</strong></p>\r\n                                                    <p>\r\n                                                        <div><div data-bind="dxCheckBox: { value: studentStudent()?.selected, disabled: studentStudent()?.disabled, text: studentStudent()?.text }"></div></div>\r\n                                                        <div data-bind="foreach: studentParents()">\r\n                                                            <div><div data-bind="dxCheckBox: { value: selected, disabled: disabled,  text: text }"></div></div>\r\n                                                        </div>\r\n                                                    </p>\r\n\r\n                                                    <p><strong>Student Groups</strong></p>\r\n                                                    <p>\r\n                                                        <div data-bind="foreach: studentStudentGroups()">\r\n                                                            <div><div data-bind="dxCheckBox: { value: selected, disabled: disabled, text: text }"></div></div>\r\n                                                        </div>\r\n                                                        <div data-bind="if: studentStudentGroups().length === 0">\r\n                                                            No Student Groups\r\n                                                        </div>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="col-md-6">\r\n                                                    <p><strong>Teachers</strong></p>\r\n                                                    <p>\r\n                                                        <div data-bind="foreach: studentTeachers()">\r\n                                                            <div><div data-bind="dxCheckBox: { value: selected, disabled: disabled, text: text }"></div></div>\r\n                                                        </div>\r\n                                                    </p>\r\n\r\n                                                    <p><strong>Counselor</strong></p>\r\n                                                    <p>\r\n                                                        <div data-bind="ifnot: !!(studentCounselor()?.disabled) === false "><div data-bind="dxCheckBox: { value: studentCounselor()?.selected, disabled: studentCounselor()?.disabled, text: studentCounselor()?.text() }"></div></div>\r\n                                                        <div data-bind="if: !!(studentCounselor()?.disabled) === false">No Counselor Assigned</div>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div data-bind="visible: !isStudentSpecific">\r\n                                            <div class="form-control">\r\n                                                <span class="margin-right">\r\n                                                    <strong>Select Recipients</strong>\r\n                                                </span>\r\n                                                <span class="margin-right">\r\n                                                    <div data-bind="dxCheckBox: { value: teacherAddressToParents, text: \'Parents\' }"></div>\r\n                                                </span>\r\n                                                <span class="margin-right">\r\n                                                    <div data-bind="dxCheckBox: { value: teacherAddressToStudents, text: \'Students\' }"></div>\r\n                                                </span>\r\n                                            </div>                            \r\n\r\n                                            <div class="row form-control no-edge-padding margin-top" style="height: auto;">\r\n                                                <div class="col-md-6">\r\n                                                    <p><strong>Current Sections</strong></p>\r\n                                                    <p>\r\n                                                        <div data-bind="foreach: teacherSections()">\r\n                                                            <div><div data-bind="dxCheckBox: { value: selected, text: text }"></div></div>\r\n                                                        </div>\r\n                                                        <div data-bind="if: teacherSections()?.length === 0">\r\n                                                            No Sections\r\n                                                        </div>\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="col-md-6">\r\n                                                    <p><strong>Current Student Groups</strong></p>\r\n                                                    <p>\r\n                                                        <div data-bind="foreach: teacherStudentGroups()">\r\n                                                            <div><div data-bind="dxCheckBox: { value: selected, text: text }"></div></div>\r\n                                                        </div>\r\n                                                        <div data-bind="if: teacherStudentGroups()?.length === 0">\r\n                                                            No Student Groups\r\n                                                        </div>\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div data-bind="visible: !composeOptions().isUrgent">\r\n                        <sm-recipient-list-edit params="options: toRecipientListOptions"></sm-recipient-list-edit>\r\n                        <sm-recipient-list-edit params="options: ccRecipientListOptions" data-bind="visible: ccVisible"></sm-recipient-list-edit>\r\n                        <sm-recipient-list-edit params="options: bccRecipientListOptions" data-bind="visible: bccVisible"></sm-recipient-list-edit>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: composeOptions().isUrgent">\r\n                        <label class="col-md-1 control-label">To</label>\r\n                        <div class="col-md-2 checkbox">\r\n                            <div data-bind="dxCheckBox: { value: sendAllStaff }"></div> Staff\r\n                        </div>\r\n                        <div class="col-md-2 checkbox">\r\n                            <div data-bind="dxCheckBox: { value: sendAllParents }"></div> Parents\r\n                        </div>\r\n                        <div class="col-md-2 checkbox">\r\n                            <div data-bind="dxCheckBox: { value: sendAllStudents }"></div> Students\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" data-bind="visible: !!message().surveyGU()" style="white-space: nowrap">\r\n                    <label class="control-label col-md-1">Survey</label>\r\n                    <div class="col-md-11">\r\n                        <div class="flexbox horizontal auto" style="flex-wrap: wrap">\r\n                            <div class="flexbox horizontal auto padded middle" style="flex-wrap: wrap">\r\n                                <label class="control-label">Begin Date</label>\r\n                                <div class="flexbox horizontal auto">\r\n                                    <div data-bind="dxDateBox: surveyBeginDateOptions" style="border-radius: 4px 0 0 4px; width: 20ch;"></div>\r\n                                    <div data-bind="dxDateBox: surveyBeginTimeOptions" style="border-radius: 0 4px 4px 0; width: 18ch;"></div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="flexbox horizontal auto padded middle" style="flex-wrap: wrap">\r\n                                <label class="control-label">End Date</label>\r\n                                <div class="flexbox horizontal auto">\r\n                                    <div data-bind="dxDateBox: surveyEndDateOptions" style="border-radius: 4px 0 0 4px; width: 20ch;"></div>\r\n                                    <div data-bind="dxDateBox: surveyEndTimeOptions" style="border-radius: 0 4px 4px 0; width: 18ch;"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="flexbox horizontal padded" style="flex-wrap: wrap" data-bind="with: message().surveyInfo()">\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: !isSentMessage() || isEnabled, disabled: !isSentMessage(), attr: {\'aria-label\': \'Enabled\' } }"></div>\r\n                                <label class="checkbox-label">Enabled</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: isRequired, attr: {\'aria-label\': \'Required On Login\' } }"></div>\r\n                                <label class="checkbox-label">Required On Login</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: isAnonymous, attr: {\'aria-label\': \'Anonymous\' } }"></div>\r\n                                <label class="checkbox-label">Anonymous</label>\r\n                            </div>\r\n                            <div class="auto">\r\n                                <div data-bind="dxCheckBox: { value: splitStudents, attr: {\'aria-label\': \'One Survey Per Student\' } }"></div>\r\n                                <label class="checkbox-label">One Survey Per Student</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="flexbox horizontal padded" data-bind="with: message()">\r\n                            <div class="auto">\r\n                                <button type="button" class="btn btn-default" data-bind="click: addSTQueryRecipients">Add Recipients From Synergy Query</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr data-bind="visible: !!message().surveyGU()" />\r\n            \r\n                <div data-bind="visible: !composeOptions().isUrgent && !composeOptions().isEditingTemplate && SM.userType === UserType.Staff && (currentContactLogOption === ContactLogOption.StaffChoice || (currentContactLogOption === ContactLogOption.AlwaysLog && SM.contactCategoriesEnabled))">\r\n                    <div class="form-group">\r\n                        <div class="col-md-1"></div>\r\n                        <div class="col-md-3">\r\n                            <div data-bind="dxCheckBox: { value: message().updateContactLog, disabled: currentContactLogOption !== ContactLogOption.StaffChoice }, attr: { \'aria-label\': SM.translation.updateContactLog }"></div>\r\n                            <label class="checkbox-label" data-bind="text: SM.translation.updateContactLog"></label>\r\n                        </div>\r\n                        <div data-bind="visible: SM.contactCategoriesEnabled">\r\n                            <label id="contactCategoryLabel" class="col-md-2 control-label" data-bind="text: SM.translation.contactCategory()"></label>\r\n                            <div class="col-md-2 flexbox horizontal height-fix">\r\n                                <div aria-labelledby="contactCategoryLabel" data-bind="dxSelectBox: contactCategorySettings, attr: { \'aria-label\': SM.translation.contactCategory }"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: message().bccSender }, attr: { \'aria-label\': SM.translation.bccSender }"></div>\r\n                            <label class="checkbox-label" data-bind="text: SM.translation.bccSender"></label>\r\n                        </div>\r\n                        <div data-bind="visible: SM.translationEnabled">\r\n                            <div class="col-md-2">\r\n                                <div data-bind="dxCheckBox: { value: message().shouldTranslate }, attr: { \'aria-label\': SM.translation.shouldTranslate }"></div>\r\n                                <label class="checkbox-label" data-bind="text: SM.translation.shouldTranslate"></label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div data-bind="visible: composeOptions().isEditingTemplate">\r\n                    <div class="form-group">\r\n                        <label id="templateNameLabel" class="col-md-1 control-label">Name</label>\r\n                        <div class="col-md-11">\r\n                            <input id="templateName" type="text" class="form-control" style="width: 100%;" data-bind="textInput: template.name" aria-labelledby="templateNameLabel" />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div data-bind="visible: composeOptions().isEditingTemplate">\r\n                    <div class="form-group">\r\n                        <label id="templatePriorityLabel" class="col-md-1 control-label">Priority</label>\r\n                        <div class="col-md-11">\r\n                            <div data-bind="dxSelectBox: templatePriorityOptions"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n            </div>\r\n            \r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Email">\r\n                <div class="form-group" data-bind="visible: !message().isMeeting()">\r\n                    <label id="subjectLabel" class="col-md-1 control-label" data-bind="text: SM.translation.subject()"></label>\r\n                    <div class="col-md-11">\r\n                        <input id="composeSubject" type="text" class="form-control" autocomplete="no" style="width: 100%;" data-bind="textInput: message().subject, hasFocus: subjectHasFocus" aria-labelledby="subjectLabel" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div data-bind="dxPopover: templatePopoverSettings">\r\n                    <div class="sm-app">\r\n                        <button type="button" class="btn btn-primary" style="width: 100%;" data-bind="click: newTemplate">New Template From Message</button>\r\n                        <div class="dx-searchbar" style="padding-top: 5px;">\r\n                            <div data-bind="dxTextBox: templateSearchSettings"></div>\r\n                        </div>\r\n                        <div data-bind="dxList: templateListSettings">\r\n                            <div data-options="dxTemplate: {name: \'item\'}">\r\n                                <div class="list-remove" data-bind="click: $parent.removeTemplate.bind($parent, $data), clickBubble: false">\r\n                                    <span class="fa fa-times"> </span>\r\n                                </div>\r\n                                <div class="list-remove" style="margin-right: 10px;" data-bind="click: $parent.doEditTemplate.bind($parent, $data), clickBubble: false">\r\n                                    <span class="fa fa-pencil"> </span>\r\n                                </div>\r\n                                <div data-bind="text: $data.name"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <p>\r\n                    <textarea data-bind="attr: { id: \'editor-\' + instanceId }"></textarea>\r\n                </p>\r\n\r\n                <div class="form-group" data-bind="visible: message().fileAttachments().length > 0">\r\n                    <div class="col-md-12">\r\n                        <label class="control-label" data-bind="text: SM.translation.attachments()"></label>\r\n                        <div id="attachmentBox" tabindex="0" class="form-control attachment-box" data-bind="attr: { \'aria-label\': SM.translation.attachments }">\r\n                            <div data-bind="foreach: message().fileAttachments()">\r\n                                <span tabindex="0" data-bind="attr: { class: labelStatusClass, \'aria-label\': name() }, click: $component.openAttachment">\r\n                                    <img class="attachment-spinner" src="'+i+'" data-bind="visible: status() === AttachmentStatus.Uploading, attr: { \'alt\': SM.translation.uploading }" />\r\n                                    <span data-bind="text: progressText(), visible: status() === AttachmentStatus.Uploading"></span>\r\n                                    <span aria-hidden="true" data-bind="attr: { class: iconStatusClass }, visible: status() !== AttachmentStatus.Uploading"></span>\r\n                                    <span data-bind="text: name"></span>\r\n                                    <span tabindex="0" class="glyphicon glyphicon-remove" aria-region="button" data-bind="click: $parent.removeAttachment.bind($parent, $data), clickBubble: false, visible: canCancel, attr: { \'aria-label\': SM.translation.delete }"></span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-group" data-bind="visible: message().linkAttachments().length > 0">\r\n                    <div class="col-md-12">\r\n                        <label class="control-label">Links</label>\r\n                        <div tabindex="0" class="form-control attachment-box" aria-label="Links">\r\n                            <div data-bind="foreach: message().linkAttachments()">\r\n                                <span tabindex="0" class="label link-attachment-label attachment" data-bind="attr: { \'aria-label\': name() }, click: $component.openAttachment">\r\n                                    <img data-bind="attr: { src: iconPath }" style="width: 20px;" />\r\n                                    <span data-bind="text: name"></span>\r\n                                    <span tabindex="0" class="glyphicon glyphicon-remove" aria-region="button" data-bind="click: $parent.removeAttachment.bind($parent, $data), clickBubble: false, visible: canCancel, attr: { \'aria-label\': SM.translation.delete }"></span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="drag-drop-info" data-bind="visible: message().fileAttachments().length == 0 && SM.isAdvancedUpload() && allowAttachments(), text: SM.translation.dragDropInfo()"></div>\r\n                <span class="sm-enabled fa fa-envelope" data-bind="visible: SM.mode === SynergyMailMode.On, tooltip: { title: SM.translation.synergyMailEnabled }"></span>\r\n\r\n                <div class="drag-drop-message" data-bind="visible: draggingFiles() && allowAttachments()">\r\n                    <div class="message-text">Drag files here</div>\r\n                </div>\r\n\r\n                <form id="openAttachmentForm" action="FileDownload.aspx" method="GET">\r\n                    <input type="hidden" id="openAttachmentFdId" name="fdID" />\r\n                    <input type="hidden" name="dbID" value="3" />\r\n                </form>\r\n\r\n                <form id="uploadForm" action="PXP_UploadFile.aspx" target="uploadFrame" method="post" enctype="multipart/form-data">\r\n                    <input type="hidden" id="messagePersonId" name="messagePersonId" value="" />\r\n                    <input type="hidden" id="uploadRequest" name="xml" value=\'\' />\r\n                    <input type="file" id="uploadFile" name="file" class="hidden" data-bind="event: { change: uploadAttachments.bind($data, $element.files) }" />\r\n                </form>\r\n                <iframe id="uploadFrame" name="uploadFrame" class="hidden"></iframe>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Text">\r\n                <div class="form-group">\r\n                    <textarea type="text" class="form-control" style="width: 100%; height: 335px;" data-bind="textInput: message().smsMessage"></textarea>\r\n                </div>\r\n                <div class="drag-drop-info">Character count: <span data-bind="text: message().smsMessage()?.length ?? 0"></span></div>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Voice">\r\n                <div class="form-group">\r\n                    <div data-bind="dxRadioGroup: voiceTypeOptions"></div><br>\r\n                    <textarea type="text" class="form-control" style="width: 100%; height: 305px;" data-bind="visible: voiceType() === 0, textInput: message().voiceText"></textarea>\r\n                    <div data-bind="visible: voiceType() === 1">\r\n                        <sm-audio-recorder></sm-audio-recorder>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: selectedTab()?.id === CommunicationType.Social">\r\n                <div class="form-group">\r\n                    <h3 style="margin-top: 0;">Twitter</h3>\r\n                    <hr>\r\n                    <div class="row">\r\n                        <div class="col-xs-1" style="font-size: 4rem;">\r\n                            <i class="fa-brands fa-twitter"></i>\r\n                        </div>\r\n                        <div class="col-xs-11">\r\n                            <textarea type="text" class="form-control" data-bind="textInput: message().socialText"></textarea>\r\n                        </div>\r\n                    </div>\r\n                    <h3 style="margin-top: 3rem;">Facebook</h3>\r\n                    <hr>\r\n                    <div class="row">\r\n                        <div class="col-xs-1" style="font-size: 4rem;">\r\n                            <i class="fa-brands fa-facebook-f"></i>\r\n                        </div>\r\n                        <div class="col-xs-11">\r\n                            <textarea type="text" class="form-control"></textarea>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="attachmentDropBox" class="attachment-drop-box" data-bind="visible: draggingFiles"></div>\r\n    <div data-bind="dxLoadPanel: loadPanelSettings"></div>\r\n</div>';e.exports=n},4827:e=>{e.exports='<div class="messageContent" data-bind="with: message, visible: message, attr: { \'aria-label\': SM.translation.messageContent }" role="region" aria-live="polite">\r\n    <div class="vidconf-bar" data-bind="visible: isMeeting, css: { \'active\': canJoinMeeting }">\r\n        <button class="btn btn-sm btn-default pull-right" data-bind="click: $parent.joinMeeting.bind($parent)">\r\n            <span class="fa fa-video"></span>\r\n            <span data-bind="text: SM.translation.joinMeeting"></span>\r\n        </button>\r\n        <button class="btn btn-sm btn-default pull-right" data-bind="visible: false, click: $component.openICS.bind($parent)">\r\n            <span class="fa fa-calendar-plus-o"></span>\r\n            <span data-bind="text: SM.translation.addToCalendar"></span>\r\n        </button>\r\n        <span data-bind="html: $parent.getVideoConferenceInfo.call($parent)" class="clearfix"></span>\r\n    </div>\r\n    <div class="survey-bar flexbox horizontal middle" data-bind="visible: isSurvey">\r\n        <div class="auto" data-bind="html: $parent.getSurveyInfo.call($parent)"></div>\r\n        <div>\r\n            <button class="btn btn-sm btn-default" data-bind="click: $parent.openSurvey.bind($parent)">\r\n                <img data-bind="attr: { src: \'Images/ST_GENESIS/SIS_SurveyDef.gif\' }" style="width: 20px;" />\r\n                <span data-bind="text: SM.translation.openSurvey"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="panel-body">\r\n        <div role="region" data-bind="attr: { \'aria-label\': SM.translation.subject }">\r\n            <span class="label label-danger" data-bind="visible: isItDraft() && (SM.impersonated || SM.auditing)">DRAFT</span>\r\n            <span id="subjectText" class="subject" data-bind="html: subject"></span>\r\n        </div>\r\n        <div class="header-text" data-bind="text: sendDateTimeFormattedLong"></div>\r\n        <div role="region" data-bind="attr: { \'aria-label\': SM.translation.from }">\r\n            <div class="header-text link-text" data-bind="attr: { title: SM.translation.readCountExplanation }, visible: isSender() && SM.userType === UserType.Staff && SM.mode === SynergyMailMode.On && !isItDraft()">\r\n                <i class="fa fa-envelope-open-o" aria-hidden="true"></i>\r\n                <span data-bind="text: $parent.getMessageReadText.call($parent), click: $parent.showMessageReadStatus.bind($parent)"></span>\r\n            </div>\r\n            <div class="header-text" data-bind="visible: noReply"><i class="fa fa-lock" aria-hidden="true"></i> <span data-bind="text: SM.translation.noRepliesAllowed"></span></div>\r\n            <div class="header-text" data-bind="visible: shouldTranslate() === false"><i class="fa-regular fa-align-slash" aria-hidden="true"></i> <span data-bind="text: SM.translation.senderDisabledTranslation"></span></div>\r\n            <span class="header-text" data-bind="click: $parent.toggleRecipients.bind($parent), visible: !isSystemMessage()">\r\n                <span class="fa" data-bind="css: { \'fa-caret-down\': $parent.recipientsVisible(), \'fa-caret-right\': !$parent.recipientsVisible() }"></span>\r\n                <span class="link-text" data-bind="text: $parent.recipientsVisible() ? SM.translation.hideDetails() : SM.translation.showDetails()"></span>\r\n            </span>\r\n            <hr>\r\n\r\n            <div class="form-horizontal">\r\n                <div data-bind="visible: !isSender() || (isSender() && $parent.recipientsVisible())">\r\n                    <div class="form-group">\r\n                        <label class="col-sm-1 control-label">\r\n                            <span data-bind="text: SM.translation.from"></span>\r\n                        </label>\r\n                        <div class="col-sm-11" data-bind="with: from">\r\n                            <sm-recipient-box params="options: { recipient: $data, onShowReadStatus: $parents[1].showReadStatus.bind($parents[1]) }"></sm-recipient-box>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div data-bind="visible: isSender() || (!isSender() && $parent.recipientsVisible())">\r\n                    <div class="form-group" data-bind="visible: to().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.to"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: to">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender, onShowReadStatus: $parents[1].showReadStatus.bind($parents[1]) }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: cc().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.cc"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: cc">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender, onShowReadStatus: $parents[1].showReadStatus.bind($parents[1]) }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: bcc().length > 0">\r\n                        <label class="col-sm-1 control-label" data-bind="text: SM.translation.bcc"></label>\r\n                        <div class="col-sm-11">\r\n                            <p class="form-control-static" data-bind="foreach: bcc">\r\n                                <sm-recipient-box params="options: { recipient: $data, isSender: $parent.isSender, onShowReadStatus: $parents[1].showReadStatus.bind($parents[1]) }"></sm-recipient-box>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <hr>\r\n        </div>\r\n\r\n        <div class="alert alert-danger" role="alert" data-bind="visible: translationError() && SM.userType === UserType.Staff, attr: { \'aria-label\': SM.translation.errorOccurredText }">\r\n            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\r\n            <span data-bind="text: translationError"></span>\r\n        </div>\r\n\r\n        <span role="region" data-bind="html: messageTextFormatted, attr: { \'aria-label\': SM.translation.message }"></span>\r\n\r\n        <div class="col-md-12" role="region" data-bind="visible: fileAttachments().length > 0, attr: { \'aria-label\': SM.translation.attachments }">\r\n            <div data-bind="foreach: fileAttachments()">\r\n                <span class="label attachment-label label-primary attachment" data-bind="click: $component.openAttachment.bind($component)">\r\n                    <span class="fa fa-paperclip margin-right-small"></span>\r\n                    <span data-bind="text: name"></span>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="col-md-12" role="region" data-bind="visible: linkAttachments().length > 0 && SM.userType === UserType.Staff" aria-label="Links">\r\n            <br>\r\n            <div data-bind="foreach: linkAttachments()">\r\n                <span class="label link-attachment-label label-primary attachment" data-bind="click: $component.openAttachment.bind($component)">\r\n                    <img data-bind="attr: { src: iconPath }" style="width: 20px;" />\r\n                    <span data-bind="text: name"></span>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <form id="openAttachmentForm" action="FileDownload.aspx" method="GET">\r\n            <input type="hidden" id="openAttachmentFdId" name="fdID" />\r\n            <input type="hidden" id="aID" name="aID" />\r\n            <input type="hidden" id="dbID" name="dbID" value="3" />\r\n        </form>\r\n\r\n        <div role="region" data-bind="visible: translated, attr: { \'aria-label\': SM.translation.messageTranslatedFrom }">\r\n            <div class="show-recipients margin-top" data-bind="click: $parent.toggleOriginalText.bind($parent)">\r\n                <span class="fa" data-bind="css: { \'fa-caret-down\': $parent.originalTextVisible(), \'fa-caret-right\': !$parent.originalTextVisible() }"></span>\r\n                <span class="link-text" data-bind="visible: translated"><span data-bind="text: SM.translation.messageTranslatedFrom"></span> <span data-bind="text: originalLanguageDescription"></span>.</span>\r\n                <span class="link-text" data-bind="text: $parent.originalTextVisible() ? SM.translation.hideOriginalText() : SM.translation.showOriginalText()"></span>\r\n            </div>\r\n\r\n            <div data-bind="visible: $parent.originalTextVisible">\r\n                <div data-bind="text: SM.translation.originalMessage" class="original-message-header"></div>\r\n                <div class="original-message">\r\n                    <p><span data-bind="text: SM.translation.subject"></span>: <span data-bind="html: originalSubjectText"></span></p>\r\n                    <div data-bind="html: originalMessageText"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div role="region" data-bind="attr: { \'aria-label\': SM.translation.actions }">\r\n            <a href="#Actions" class="sr-only" data-bind="text: SM.translation.actions"></a>\r\n        </div>\r\n    </div>\r\n</div>'},2159:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="readStatusDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">\r\n                    <span data-bind="text: SM.translation.readStatus()"></span>\r\n                    <div class="pull-right" data-bind="text: countText"></div>\r\n                </h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div data-bind="dxDataGrid: dataGridOptions"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary pull-left" data-bind="click: compose, text: SM.translation.compose(), visible: false"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: close, text: SM.translation.close()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2439:e=>{e.exports='<div style="cursor: default;" tabindex="0" data-bind="click: openMenu, clickBubble: false, attr: { id: id, \'aria-label\': recipient().contactDetails1() }, event: { mouseenter: showSnapshot, mouseleave: hideAll }" class="contact-box contact-box-primary">\r\n    <div class="contact-box-controls" data-bind="visible: !readOnly()">\r\n        <span tabindex="0" class="glyphicon glyphicon-remove" data-bind="click: remove, clickBubble: false, attr: { \'aria-label\': SM.translation.removeRecipient() }"></span><br>\r\n        <span class="caret" data-bind="visible: showGroupUserTypes()"></span>\r\n    </div>\r\n    \r\n    <img class="info-icon" data-bind="click: function() { }, clickBubble: false, attr: { id: \'infoButton\' + recipient().id(), src: imgSrc(recipient().recipientList()), alt: RecipientList[recipient().recipientList()] }" />\r\n    <div class="contact-box-details">\r\n        <div class="contact-box-details1" data-bind="text: recipient().contactDetails1()"></div>\r\n        <div class="contact-box-details2" data-bind="text: recipient().contactDetails2() ? recipient().contactDetails2() : \'&nbsp;\'"></div>\r\n        <div class="contact-box-details2" data-bind="text: recipient().organizationName() ? recipient().organizationName() : \'&nbsp;\', css: { \'detail-highlight\': recipient().organizationYearId() !== undefined && recipient().organizationYearId() != SM.focusOrgYearId }"></div>\r\n    </div>\r\n    <div class="pull-right" data-bind="visible: isSender() && SM.userType === UserType.Staff && SM.mode === SynergyMailMode.On, attr: { title: getReadTitle() }">\r\n        <i data-bind="attr: { class: getReadIcon() }, visible: !recipient().isGroup()" aria-hidden="true"></i>\r\n        <div class="badge badge-read" data-bind="visible: recipient().isGroup() && recipient().recipientList() !== RecipientList.ContactGroups, click: showReadStatus, text: getReadText()"></div>\r\n    </div>\r\n</div>'},6344:e=>{e.exports='<div class="form-group no-edge-padding">\r\n    <label class="col-md-1 control-label" data-bind="text: title"></label>\r\n    <div class="col-md-11">\r\n        <div class="input-group">\r\n            <div id="composeTo" class="form-control recipient-box" data-bind="click: showRecipientDialog">\r\n                <div class="recipient-list" data-bind="foreach: recipients">\r\n                    <sm-recipient-box params="options: { recipient: $data, onRemove: $parent.removeRecipient.bind($parent), readOnly: false }"></sm-recipient-box>\r\n                </div>\r\n            </div>\r\n            <div class="input-group-btn text-top" style="width: 1%;">\r\n                <button type="button" class="btn btn-default" data-bind="click: clearRecipients, attr: { \'aria-label\': title() + \' \' + SM.translation.removeAllRecipients() }">\r\n                    <span class="text-danger glyphicon glyphicon-remove"></span>\r\n                </button>\r\n                <button type="button" class="btn btn-default" data-bind="click: showRecipientDialog, attr: { \'aria-label\': title() + \' \' + SM.translation.addRecipients() }">\r\n                    <span class="text-primary glyphicon glyphicon-pencil"></span>\r\n                </button>\r\n            </div>  \r\n        </div>\r\n    </div>\r\n</div>'},6007:e=>{e.exports='<div data-bind="visible: SM.allowEmailAtFocus(selectedOrganization()?.id())">\r\n    <div class="row margin-top" data-bind="visible: recipientList === RecipientList.Teachers">\r\n        <div class="col-md-6 col-xs-12" data-bind="visible: teacherData().length > 1">\r\n            <div data-bind="dxSelectBox: selectSchoolOptions"></div>\r\n        </div>\r\n        <div class="col-md-5 col-xs-12" data-bind="visible: selectedSchoolTerms()().length > 1">\r\n            <div data-bind="dxSelectBox: selectTermOptions"></div>\r\n        </div>\r\n        <button class="col-md-1 col-xs-12 btn btn-default pull-left" data-bind="click: addAll">Add All</button>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: recipientList === RecipientList.Classes || recipientList === RecipientList.MassEmail || (recipientList === RecipientList.MassStudentGroups && SM.userType === UserType.Staff)">\r\n        <div class="form-control class-address-to margin-top">\r\n            <div class="col-md-2">\r\n                <span data-bind="visible: recipientList !== RecipientList.MassEmail, text: SM.translation.addressTo"></span>\r\n                <button type="button" class="btn btn-primary" data-bind="visible: recipientList === RecipientList.MassEmail, text: SM.translation.addressTo, click: addMassEmail"></button>\r\n            </div>\r\n            <div class="col-md-10">\r\n                <div class="col-md-2" data-bind="visible: recipientList !== RecipientList.MassEmail">\r\n                    <div data-bind="dxCheckBox: { value: addressToTeacher }"></div> <span data-bind="text: SM.translation.staff"></span>\r\n                </div>\r\n                <div class="col-md-2">\r\n                    <div data-bind="dxCheckBox: { value: addressToParents }"></div> <span data-bind="text: SM.translation.parents"></span>\r\n                </div>\r\n                <div class="col-md-2">\r\n                    <div data-bind="dxCheckBox: { value: addressToStudents }"></div> <span data-bind="text: SM.translation.students"></span>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class="clearfix" data-bind="visible: recipientList === RecipientList.MassEmail">\r\n                <br />\r\n                <hr style="margin: 5px 10px;" />\r\n                <div class="col-md-2" data-bind="text: SM.translation.grade">\r\n                </div>\r\n                <div class="col-md-10">\r\n                    <div data-bind="foreach: grades">\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: selected }"></div><span data-bind="text: description"></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="clearfix"></div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: SM.allowEmailAtFocus(selectedOrganization()?.id()) && recipientList === RecipientList.MassEmail">\r\n        <div class="form-control clearfix class-address-to margin-top">\r\n            <div class="col-md-2">\r\n                <button type="button" class="btn btn-primary" data-bind="text: SM.translation.addressTo() + \' \' + SM.translation.staffAllGrades(), click: addStaffMassEmail"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<p data-bind="visible: !SM.allowEmailAtFocus(selectedOrganization()?.id())" class="text-center margin-top">\r\n    Access is restricted to school focus only\r\n</div>\r\n\r\n<div data-bind="dxDataGrid: dataGridOptions, visible: SM.allowEmailAtFocus(selectedOrganization()?.id()) && recipientList !== RecipientList.MassEmail" class="margin-top"></div>'},1426:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="recurrenceDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Recurrence</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-horizontal checkbox-normal">\r\n                    <div class="form-group">\r\n                        <label class="col-md-1 control-label">Schedule</label>\r\n                        <div class="col-md-11">\r\n                            <div data-bind="dxRadioGroup: recurrenceTypeOptions"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 1">\r\n                        <label class="col-md-1 control-label">Every</label>\r\n                        <div class="col-md-11">\r\n                            <input type="text" class="form-control" style="width: 35px !important;" data-bind="value: recurrence.dayCount" /> days\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label">Every</label>\r\n                        <div class="col-md-11">\r\n                            <input type="text" class="form-control" style="width: 35px !important;" data-bind="value: recurrence.weekCount" /> weeks\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label">Days</label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.monday }"></div>\r\n                            <label class="checkbox-label">Monday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.tuesday }"></div>\r\n                            <label class="checkbox-label">Tuesday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.wednesday }"></div>\r\n                            <label class="checkbox-label">Wednesday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.thursday }"></div>\r\n                            <label class="checkbox-label">Thursday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.friday }"></div>\r\n                            <label class="checkbox-label">Friday</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 2">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.saturday }"></div>\r\n                            <label class="checkbox-label">Saturday</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.sunday }"></div>\r\n                            <label class="checkbox-label">Sunday</label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label">Day</label>\r\n                        <div class="col-md-11">\r\n                            <div class="flexbox horizontal">\r\n                                <div data-bind="dxRadioGroup: monthTypeOneOptions"></div>\r\n                                <div class="control-label">Day&nbsp;</div>\r\n                                <div data-bind="dxSelectBox: dayOfMonthOptions"></div>\r\n                            </div>\r\n                            <div class="flexbox horizontal">\r\n                                <div data-bind="dxRadioGroup: monthTypeTwoOptions"></div>\r\n                                <div class="control-label">The&nbsp;</div>\r\n                                <div data-bind="dxSelectBox: monthDayTypeOptions"></div>\r\n                                <div data-bind="dxSelectBox: monthDayofWeek"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label">Months</label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.january }"></div>\r\n                            <label class="checkbox-label">January</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.february }"></div>\r\n                            <label class="checkbox-label">February</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.march }"></div>\r\n                            <label class="checkbox-label">March</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.april }"></div>\r\n                            <label class="checkbox-label">April</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.may }"></div>\r\n                            <label class="checkbox-label">May</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.june }"></div>\r\n                            <label class="checkbox-label">June</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.july }"></div>\r\n                            <label class="checkbox-label">July</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.august }"></div>\r\n                            <label class="checkbox-label">August</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.september }"></div>\r\n                            <label class="checkbox-label">September</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.october }"></div>\r\n                            <label class="checkbox-label">October</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="visible: recurrence.recurType() === 3">\r\n                        <label class="col-md-1 control-label"></label>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.november }"></div>\r\n                            <label class="checkbox-label">November</label>\r\n                        </div>\r\n                        <div class="col-md-2">\r\n                            <div data-bind="dxCheckBox: { value: recurrence.december }"></div>\r\n                            <label class="checkbox-label">December</label>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-1 control-label">Stop On</label>\r\n                        <div class="col-md-11">\r\n                            <div data-bind="dxDateBox: stopDateOptions" style="width: 150px;"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},8068:(e,t,a)=>{var i='<div class="sub-title" data-bind="visible: SM.auditing">\r\n    Name: <strong data-bind="text: SM.auditName"></strong>\r\n    <img style="margin-left: 15px;" data-bind="attr: { src: auditIcon() }" /> <span data-bind="text: UserType[SM.auditType]"></strong>\r\n</div>\r\n\r\n<div id="Actions" class="button-bar flexbox horizontal" role="navigation" style="padding-left: 0; flex-wrap: wrap" data-bind="attr: { \'aria-label\': SM.translation.actions }, css: { \'sm-msg-grid-focused\': messageGridFocused }">\r\n    <div class="flexbox horizontal padded">\r\n        <div class="btn-mobile-back" data-bind="css: { unpadded: !(messageGridFocused() || selectedMessage()) }">\r\n            <button type="button" class="btn btn-default" data-bind="click: goBack, visible: messageGridFocused() || selectedMessage()">\r\n                <span class="glyphicon glyphicon-chevron-left" role="presentation"></span>\r\n                <span data-bind="text: SM.translation.back"></span>\r\n            </button>\r\n        </div>\r\n        <div>\r\n            <button type="button" class="btn btn-success compose" data-bind="click: startCompose, disable: SM.impersonated, visible: SM.mode !== SynergyMailMode.Off">\r\n                <span data-bind="text: SM.translation.compose"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="flexbox horizontal padded auto">\r\n        <div class="btn-back" data-bind="css: { unpadded: !selectedMessage() }">\r\n            <button type="button" class="btn btn-default" data-bind="click: closeMessage, visible: selectedMessage">\r\n                <span class="glyphicon glyphicon-chevron-left" role="presentation"></span>\r\n                <span data-bind="text: SM.translation.back"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-delete flexbox horizontal" data-bind="css: { unpadded: !showDeleteButton() }">\r\n            <button class="btn btn-default" data-bind="click: archiveSelectedMessages, disable: SM.impersonated, tooltip: { title: archiveText }, attr: { \'aria-label\': archiveText }, visible: showDeleteButton" type="button">\r\n                <span data-bind="attr: { \'class\': archiveIconClass }" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-mobile-delete" data-bind="css: { unpadded: !(messageGridFocused() && showDeleteButton()) }">\r\n            <button class="btn btn-default" data-bind="click: archiveSelectedMessages, disable: SM.impersonated, tooltip: { title: archiveText }, attr: { \'aria-label\': archiveText }, visible: messageGridFocused() && showDeleteButton()" type="button">\r\n                <span data-bind="attr: { \'class\': archiveIconClass }" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n        <div class="btn-move" data-bind="css: { unpadded: !(selectedFolder().folderType() !== FolderType.SystemMessage) }, visible: SM.mode === SynergyMailMode.On">\r\n            <div class="dropdown" data-bind="visible: selectedFolder().folderType() !== FolderType.SystemMessage">\r\n                <button type="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="btn btn-default" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.moveToFolder }">\r\n                    <span class="fa fa-folder" aria-hidden="true"></span>\r\n                    <span class="caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <div class="scrollable-menu" data-bind="foreach: dropFolders, visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0">\r\n                        <li data-bind="click: $parent.moveMessages.bind($parent)">\r\n                            <a href="#" data-bind="text: getFolderName()"></a>\r\n                        </li>\r\n                    </div>\r\n                    <li role="separator" class="divider" data-bind="visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0"></li>\r\n                    <li data-bind="click: createFolder"><a href="#" data-bind="text: SM.translation.newFolder"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="btn-mobile-move" data-bind="css: { unpadded: !(messageGridFocused() && selectedFolder().folderType() !== FolderType.SystemMessage) }, visible: SM.mode === SynergyMailMode.On">\r\n            <div class="dropdown" data-bind="visible: messageGridFocused() && selectedFolder().folderType() !== FolderType.SystemMessage">\r\n                <button type="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="btn btn-default" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.moveToFolder }">\r\n                    <span class="fa fa-folder" aria-hidden="true"></span>\r\n                    <span class="caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <div class="scrollable-menu" data-bind="foreach: dropFolders, visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0">\r\n                        <li data-bind="click: $parent.moveMessages.bind($parent)">\r\n                            <a href="#" data-bind="text: getFolderName()"></a>\r\n                        </li>\r\n                    </div>\r\n                    <li role="separator" class="divider" data-bind="visible: selectedRows().length > 0 && selectedFolder().folderType() !== FolderType.Draft && selectedFolder().folderType() !== FolderType.Outbox && numSelectedDeletedMessages() === 0"></li>\r\n                    <li data-bind="click: createFolder"><a href="#" data-bind="text: SM.translation.newFolder"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="dropdown" data-bind="attr: { \'aria-label\': SM.translation.moveActions }">\r\n            <button id="moreActions" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-default">\r\n                <span data-bind="text: SM.translation.more"></span>\r\n                <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu" aria-labelledby="moreActions" role="menu">\r\n                <li data-bind="visible: SM.mode === SynergyMailMode.On, css: { \'disabled\': selectedRows().length === 0 || selectedFolder().folderType() === FolderType.Draft || selectedFolder().folderType() === FolderType.Outbox || numSelectedDeletedMessages() > 0 || SM.impersonated || SM.auditing }"><a href="#" data-bind="click: markAsRead, text: SM.translation.markAsRead"></a></li>\r\n                <li data-bind="visible: SM.mode === SynergyMailMode.On, css: { \'disabled\': selectedRows().length === 0 || selectedFolder().folderType() === FolderType.Draft || selectedFolder().folderType() === FolderType.Outbox || numSelectedDeletedMessages() > 0 || selectedFolder().folderType() === FolderType.SystemMessage || SM.impersonated || SM.auditing }"><a href="#" data-bind="click: markAsUnread, text: SM.translation.markAsUnread"></a></li>\r\n                <li data-bind="css: { \'disabled\': SM.impersonated || SM.auditing }"><a href="#" data-bind="click: editSignatures, text: SM.translation.editSignatures"></a></li>\r\n                <li data-bind="visible: SM.enableForwarding && settingsData().emailAddresses().length > 0, css: { \'disabled\': SM.impersonated || SM.auditing }"><a href="#" data-bind="click: editSettings, text: SM.translation.settings"></a></li>\r\n                <li data-bind="visible: selectedFolder().folderType() === FolderType.Archive, SM.mode === SynergyMailMode.On"><a href="#" data-bind="click: toggleDeletedMessages, text: showDeleted() ? SM.translation.hideDeletedMessages : SM.translation.showDeletedMessages"></a></li>\r\n            </ul>\r\n        </div>\r\n        <div class="flexbox horizontal" data-bind="visible: !selectedMessage()">\r\n            <button class="btn btn-default" type="button" data-bind="css: { \'active\': searchVisible }, click: toggleSearch, tooltip: { title: SM.translation.search }, attr: { \'aria-label\': SM.translation.search }">\r\n                <span class="fa fa-search"></span>\r\n            </button>\r\n        </div>\r\n        <div data-bind="visible: selectedMessage() && selectedFolder().folderType() !== FolderType.SystemMessage && selectedFolder().folderType() !== FolderType.Outbox && !selectedMessage().noReply() && SM.mode === SynergyMailMode.On">\r\n            <div class="btn-group">\r\n                <button type="button" class="btn btn-primary" data-bind="click: reply, text: SM.translation.reply, disable: SM.impersonated, attr: { \'aria-label\': SM.translation.reply }"></button>\r\n                <button id="responseActions" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.responseActions }">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" aria-labeledby="responseActions">\r\n                    <li><a href="#" data-bind="click: replyAll, text: SM.translation.replyAll, visible: SM.userType === UserType.Staff"></a></li>\r\n                    <li><a href="#" data-bind="click: forward, text: SM.translation.forward"></a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="flexbox horizontal" data-bind="visible: selectedMessage() && selectedFolder().folderType() === FolderType.Outbox && selectedMessage().scheduleSendDate()">\r\n            <button class="btn btn-danger" data-bind="click: cancelScheduledSend">Cancel Send</button>\r\n        </div>\r\n        <div data-bind="visible: selectedMessage() && selectedFolder().folderType() !== FolderType.SystemMessage && selectedMessage().noReply() && SM.mode === SynergyMailMode.On">\r\n            <button type="button" class="btn btn-primary" data-bind="click: forward, text: SM.translation.forward, disable: SM.impersonated"></button>\r\n        </div>\r\n        <div class="auto"></div>\r\n    </div>\r\n    <div class="flexbox horizontal padded auto" data-bind="if: selectedMessage">\r\n        <div class="auto"></div>\r\n        <div>\r\n            <button data-bind="click: previousMessage, attr: { \'aria-label\': SM.translation.previousMessage }" type="button" class="btn btn-default">\r\n                <span class="fa fa-chevron-left"></span>\r\n            </button>\r\n        </div>\r\n        <div>\r\n            <button data-bind="click: nextMessage, attr: { \'aria-label\': SM.translation.nextMessage }" type="button" class="btn btn-default">\r\n                <span class="fa fa-chevron-right"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="flexbox horizontal auto" style="overflow: hidden" data-bind="css: { \'sm-msg-grid-focused\': messageGridFocused }">\r\n    <div class="side-bar" data-bind="css: { \'sub-title-space\': SM.auditing }">\r\n        <div class="content">\r\n            <div class="folder-list" role="navigation" data-bind="attr: { \'aria-label\': SM.translation.folders }">\r\n                <div class="text-center" data-bind="visible: folders().length === 0">\r\n                    <img class="loading-spinner" src="'+a(7091)(a(1334))+'" data-bind="attr: { \'aria-label\': SM.translation.loading }" /><br /> <span data-bind="text: SM.translation.loading"></span>\r\n                </div>\r\n                <ul class="folder-list" data-bind="visible: folders().length > 0, foreach: folders">\r\n                    <li class="folder" data-bind="css: { \'folder-selected\': $parent.isFolderSelected.bind($parent, $data)(), \'drafts\' : folderType() === FolderType.Draft },\r\n                        event: { mouseenter: $parent.showContextMenuIcon.bind($parent, $element), mouseleave: $parent.hideContextMenuIcon.bind($parent, $element) }">\r\n                        <div class="btn-group" style="width: 100%;">\r\n                            <div class="btn folder-name" style="width: 90%;" data-bind="click: $parent.selectFolder.bind($parent)">\r\n                                <span class="unread-count pull-right label label-primary" data-bind="css: { \'system-message\': folderType() === FolderType.SystemMessage }, text: unreadMessages, visible: unreadMessages() > 0, attr: { \'aria-label\': unreadMessages() + \' \' + SM.translation.unreadMessages() }"></span></span>\r\n                                <span data-bind="attr: { class: getIcon() }" aria-hidden="true"></span>\r\n                                <span data-bind="text: getFolderName()" class="folder-text"></span>\r\n                            </div>\r\n                            <div id="folderActions" class="btn dropdown-toggle" aria-label="Folder Actions" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="float: right; padding-right: 5px !important;" data-bind="visible: SM.accessibilityMode">\r\n                                <span class="fa fa-caret-down"></span>\r\n                                <span class="sr-only" data-bind="attr: { \'aria-label\': SM.translation.actions }"></span>\r\n                            </div>\r\n                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="folderActions">\r\n                                <li><a tabindex="-1" href="#" data-bind="click: $parent.updateAllRead.bind($parent, $data, true), text: SM.translation.markAllRead"></a></li>\r\n                                <li><a tabindex="-1" href="#" data-bind="click: $parent.updateAllRead.bind($parent, $data, false), text: SM.translation.markAllUnread"></a></li>\r\n                                <li data-bind="visible: folderType() !== FolderType.Archive && folderType() !== FolderType.SystemMessage"><a tabindex="-1" href="#" data-bind="click: $parent.archiveAll.bind($parent), text: SM.translation.archiveAll"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.Archive"><a tabindex="-1" href="#" data-bind="click: $parent.archiveAll.bind($parent), text: SM.translation.deleteAll"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.UserFolder"><a tabindex="-1" href="#" data-bind="click: $parent.editFolderEx.bind($parent), text: SM.translation.editFolder"></a></li>\r\n                                <li data-bind="visible: folderType() === FolderType.UserFolder"><a tabindex="-1" href="#" data-bind="click: $parent.deleteFolder.bind($parent), text: SM.translation.deleteFolder"></a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="main-view auto" data-bind="css: { \'sub-title-space\': SM.auditing }">\r\n        <div class="content">\r\n            <div role="region" data-bind="visible: !selectedMessage(), attr: { \'aria-label\': SM.translation.messages }">\r\n                <div id="messageGrid" class="message-grid" data-bind="dxDataGrid: messageGridOptions"></div>\r\n            </div>\r\n\r\n            <sm-message params="message: selectedMessage"></sm-message>\r\n        </div>\r\n    </div>\r\n</div> ';e.exports=i},2467:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="scheduleSendDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title">Schedule Send</h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>Note: Recipients for Sections, User Groups, Student Groups, Mass Email and Contact Lists will be based on enrollment at the time the message scheduled to be sent.</p>\r\n                <div class="form-horizontal">\r\n                    <div class="form-group">\r\n                        <label id="dateLabel" class="col-md-2 control-label">Send Date/Time</label>\r\n                        <div class="col-md-10">\r\n                            <div class="margin-right" data-bind="dxDateBox: sendDateOptions, dxValidator: requiredFieldValidator" aria-labelledby="dateLabel"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: hide, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-success" data-bind="click: save">Schedule Send</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},505:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="selectAddressesDialog" aria-label="Select Addresses">\r\n    <div role="document" class="modal-dialog compose-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <span class="button fa fa-times" data-bind="click: close"></span>\r\n                <h2 class="modal-title">\r\n                    Select Recipients\r\n                </h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="form-horizontal">\r\n                    <sm-recipient-list-edit params="options: toRecipientListOptions"></sm-recipient-list-edit>\r\n                    <sm-recipient-list-edit params="options: ccRecipientListOptions"></sm-recipient-list-edit>\r\n                    <sm-recipient-list-edit params="options: bccRecipientListOptions"></sm-recipient-list-edit>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: submit, text: SM.translation.ok()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},5125:e=>{e.exports='<div class="st-modal modal" tabindex="-1" role="dialog" id="settingsDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="modal-title" data-bind="text: SM.translation.settings"></h2>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div data-bind="dxCheckBox: { value: settings().enableForwarding }"></div> <span data-bind="text: SM.translation.enableForwarding"></span>\r\n                <ul data-bind="foreach: settings().emailAddresses">\r\n                    <li data-bind="text: $data"></li>\r\n                </ul>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default" data-bind="click: close, text: SM.translation.cancel()"></button>\r\n                <button type="button" class="btn btn-primary" data-bind="click: save, text: SM.translation.save()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},2812:e=>{e.exports='<div data-bind="dxPopover: popoverSettings, attr: { id: \'tokenPopover\' + editor.name }">\r\n    <div class="sm-app">\r\n        <div data-bind="dxList: listSettings">\r\n            <div data-options="dxTemplate: {name: \'item\'}">\r\n                <div data-bind="text: $data.value"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},9806:e=>{e.exports='<div class="sm-app st-modal modal" tabindex="-1" role="dialog" id="viewMessageDialog">\r\n    <div class="modal-dialog compose-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <div class="flexbox horizontal padded auto">\r\n                    <h2 class="modal-title" data-bind="text: SM.translation.viewMessage"></h2>\r\n                    <div class="auto"></div>\r\n                    <div>\r\n                        <button class="btn btn-default" data-bind="visible: allowActions && (!message().isSystemMessage() || message().isSystemMessageDeletable()), click: archiveMessage, disable: SM.impersonated, tooltip: SM.translation.delete, attr: { \'aria-label\': SM.translation.delete }" type="button">\r\n                            <span class="fa fa-trash" aria-hidden="true"></span>\r\n                        </button>\r\n                    </div>\r\n                    <div data-bind="visible: !message().noReply() && !message().isSystemMessage() && allowActions">\r\n                        <div class="btn-group">\r\n                            <button type="button" class="btn btn-primary" data-bind="click: reply, text: SM.translation.reply, disable: SM.impersonated, attr: { \'aria-label\': SM.translation.reply }"></button>\r\n                            <button id="responseActions" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bind="disable: SM.impersonated, attr: { \'aria-label\': SM.translation.responseActions }">\r\n                                <span class="caret"></span>\r\n                                <span class="sr-only"></span>\r\n                            </button>\r\n                            <ul class="dropdown-menu" aria-labeledby="responseActions">\r\n                                <li><a href="#" data-bind="click: replyAll, text: SM.translation.replyAll, visible: SM.userType === UserType.Staff"></a></li>\r\n                                <li><a href="#" data-bind="click: forward, text: SM.translation.forward"></a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div data-bind="visible: message().isSystemMessage() && !message().noReply() && allowActions">\r\n                        <button type="button" class="btn btn-primary" data-bind="click: smtpReply, text: SM.translation.reply, attr: { \'aria-label\': SM.translation.reply }, disable: SM.impersonated"></button>\r\n                    </div>\r\n                    <div data-bind="visible: message().noReply() && !message().isSystemMessage() && allowActions">\r\n                        <button type="button" class="btn btn-primary" data-bind="click: forward, text: SM.translation.forward, disable: SM.impersonated"></button>\r\n                    </div>\r\n                </div>                                                    \r\n            </div>\r\n            <div class="modal-body">\r\n                <sm-message params="message: message"></sm-message>\r\n            </div>\r\n            \r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" data-bind="click: close, text: SM.translation.close()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},7091:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e)}},5082:()=>{},4889:function(e,t,a){!function(e,t){"use strict";if(!e.setImmediate){var a,i,n,s,o,r=1,l={},d=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?a=function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),a=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){h(e.data)},a=function(e){n.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,a=function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):a=function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[r]=n,a(r),r++},u.clearImmediate=p}function p(e){delete l[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(undefined,a)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===a.g?this:a.g:self)},1491:(e,t,a)=>{const{Timer:i}=a(7241);t.Timer=i},7241:(e,t)=>{class a{constructor(e={}){const{label:t,startTimestamp:a,endTimestamp:i,currentStartTimestamp:n,pauseCount:s,accumulatedMs:o}=e,r=a>=0&&a<Date.now()?a:void 0,l=r>=0&&i>0&&i>r?i:void 0,d=n>=r&&(!l||n<l)?n:r,c=a>=0&&!(void 0!==n)&&s>0;this._label=t||"",this._startTimestamp=r,this._currentStartTimestamp=c?void 0:d,this._endTimestamp=l,this._pauseCount=s||0,this._accumulatedMs=o||0}getLabel(){return this._label}isStarted(){return this._startTimestamp>=0}isPaused(){return this.isStarted()&&void 0===this._currentStartTimestamp}isStopped(){return this._endTimestamp>0}isRunning(){return this.isStarted()&&!this.isPaused()&&!this.isStopped()}start(){return this.isStarted()&&!this.isStopped()||(this.clear(),this._startTimestamp=Date.now(),this._currentStartTimestamp=this._startTimestamp),this}pause(){return this.isPaused()||!this.isStarted()||this.isStopped()||(this._pauseCount+=1,this._accumulatedMs+=Date.now()-this._currentStartTimestamp,this._currentStartTimestamp=void 0),this}resume(){return!this.isPaused()||this.isStopped()||(this._currentStartTimestamp=Date.now()),this}stop(){return this.isStarted()?(this._endTimestamp=Date.now(),this):this}ms(){return this.isStarted()?this.isPaused()?this._accumulatedMs:(this._endTimestamp||Date.now())-this._currentStartTimestamp+this._accumulatedMs:0}pauseMs(){return this.isStarted()?(this._endTimestamp||Date.now())-this._startTimestamp-this.ms():0}_getTime(e){const t=Math.floor(e/1e3),a=Math.floor(t/60),i=Math.floor(a/60);return{ms:e%1e3,s:t%60,m:a%60,h:i%24,d:Math.floor(i/24)}}time(){return this._getTime(this.ms())}pauseTime(){return this._getTime(this.pauseMs())}pauseCount(){return this._pauseCount}startedAt(){return this._startTimestamp}stoppedAt(){return this._endTimestamp}format(e="%label%d d, %h h, %m m, %s s, %ms ms"){const t=this.time();return e.replace("%label",this._label?`${this._label}: `:"").replace("%ms",t.ms).replace("%s",t.s).replace("%m",t.m).replace("%h",t.h).replace("%d",t.d)}clear(){return this._startTimestamp=void 0,this._currentStartTimestamp=void 0,this._endTimestamp=void 0,this._accumulatedMs=0,this._pauseCount=0,this}serialize(){return JSON.stringify({startTimestamp:this._startTimestamp,currentStartTimestamp:this._currentStartTimestamp,endTimestamp:this._endTimestamp,accumulatedMs:this._accumulatedMs,pauseCount:this._pauseCount,label:this._label})}static deserialize(e){return new a(JSON.parse(e))}static benchmark(e){if("function"!=typeof e)throw new Error("Timer.benchmark expects a function");const t=new a({label:e.name}).start();return e(),t.stop()}}t.Timer=a},5475:function(e,t,a){var i=void 0!==a.g&&a.g||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},a(4889),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==a.g&&a.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==a.g&&a.g.clearImmediate||this&&this.clearImmediate},9061:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAddRecipientComponent=t.SMAddRecipientViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(2617),r=a(2958),l=a(7883),d=function(){function e(e){var t;this.id="addRecipientDialog",this.isMeeting=i.observable(!1),this.title=i.observable(),this.selecting=!1,this.recipients=i.observableArray(),this.auditAdmin=!1,this.allowNonStaffRecipients=!0,this.tabDataSource=i.observableArray([]),this.selectedTab=i.observable({id:0}),this.organizationData=i.observableArray(),this.selectedOrganization=i.observable(),this.sectionData=i.observableArray(),this.selectedSection=i.observable(),this.showAdvanced=i.observable(!o.SM.enableVUEEnhancements),this.dummyRecipient=new n.Recipient({contactDetails1:"Animation",contactDetails2:"Dummy",id:"3",recipientList:n.RecipientList.Teachers}),this.staffSearch=i.observable(),this.parentSearch=i.observable(),this.studentSearch=i.observable(),this.classSearch=i.observable(),this.teacherSearch=i.observable(),this.counselorSearch=i.observable(),this.studentGroupSearch=i.observable(),this.massStudentGroupSearch=i.observable(),this.userGroupSearch=i.observable(),this.massEmailSearch=i.observable(),this.contactGroupSearch=i.observable(),this.contactGroupScope=i.observable(0),this.massStudentGroupScope=i.observable(0),this.classScope=i.observable(0),this.modalInitialized=!1,this.id=e.options.id,this.auditAdmin=e.options.auditAdmin||!1,this.allowNonStaffRecipients=null!==(t=e.options.allowNonStaffRecipients)&&void 0!==t?t:o.SM.allowNonStaffRecipients,this.showContactGroups=void 0===e.options.showContactGroups||e.options.showContactGroups,this.init(),e.options.onInitialized(this)}return e.instantiate=function(e){var t=o.SM.$("#".concat(e.id));t[0]&&t.parent().remove(),t=$('<sm-add-recipient params="options: addRecipientOptions"></sm-add-recipient>'),o.SM.$("body").append(t),i.applyBindings({addRecipientOptions:e},t[0])},e.prototype.open=function(e,t,a,i,r){var l,d=this;this.isMeeting(a),0===this.organizationData().length?s.OrganizationService.getOrganizations().then((function(e){d.organizationData(e),d.updateOrganizationDistrict(),d.selectCurrentOrganization()})):(this.updateOrganizationDistrict(),this.selectCurrentOrganization()),this.updateTabDataSource(),this.selectedTab(this.tabDataSource()[0]),o.SM.userType!==n.UserType.Staff&&this.teacherSearch().loadData(this.selectedOrganization()),this.modalInitialized?o.SM.topWindow().$("#".concat(this.id)).modal("show"):(o.SM.topWindow().$("#".concat(this.id)).stModal({customDialog:!0,keepOnHide:!0,allowClose:!1}),this.modalInitialized=!0),setTimeout((function(){d.recipientTab.focus()}),500),null===(l=this.selectedTab())||void 0===l||l.recipientSearch().repaintGrid(),this.onSave=i,this.onCancel=r,this.title(e),this.recipients(t.slice(0))},e.prototype.removeDialog=function(){var e=this;o.SM.topWindow().$("#".concat(this.id)).modal("hide"),setTimeout((function(){o.SM.topWindow().$("#".concat(e.id)).parent().remove()}),200)},e.prototype.init=function(){var e=this;this.filteredOrganizationData=i.pureComputed((function(){return e.organizationData().filter((function(t){var a,i;return o.SM.userType===n.UserType.Staff||o.SM.userType===n.UserType.Student&&(null===(a=e.selectedTab())||void 0===a?void 0:a.id)===n.RecipientList.Students&&o.SM.studentRecipientAccess===n.StudentRecipientAccess.SchoolStaffDistrictStudents||o.SM.userType===n.UserType.Parent&&(null===(i=e.selectedTab())||void 0===i?void 0:i.id)===n.RecipientList.Staff&&o.SM.parentRecipientAccess===n.ParentRecipientAccess.DistrictStaff||t.currentSchool()}))})),this.selectSectionOptions={displayExpr:function(e){return e?""===e.id()?e.course():"".concat(e.course()," (ID: ").concat(e.sectionId(),", Term: ").concat(e.term(),", ")+"Period: ".concat(e.period(),", Room: ").concat(e.room(),")"):""},items:this.sectionData,onSelectionChanged:function(t){var a;null===(a=e.selectedTab())||void 0===a||a.recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope(),e.selectedSection(),e.massStudentGroupScope())},value:this.selectedSection},this.selectOrganizationOptions={onContentReady:function(t){0===e.filteredOrganizationData().filter((function(t){return t.id()===e.selectedOrganization().id()})).length&&e.selectedOrganization(e.filteredOrganizationData()[0])},displayExpr:"name",items:this.filteredOrganizationData,onSelectionChanged:function(t){var a;(null===(a=null===o.SM||void 0===o.SM?void 0:o.SM.editorVM)||void 0===a?void 0:a.isTeacher)?s.RecipientService.getSections({orgFilter:e.selectedOrganization().id(),staffOnly:!0}).then((function(t){e.sectionData(t),o.SM.teacherStudentAccess===n.TeacherStudentAccess.All&&e.sectionData.unshift(new n.Section({id:"",course:"All Sections"}));var a=e.sectionData()[0],i=window.TXP&&TXP.CurrentSectionGUs[0];if(i){var s=e.sectionData().filter((function(e){return e.id()===i}))[0];s&&(a=s)}e.selectedSection(a)})):e.selectedTab().recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope())},value:this.selectedOrganization},this.contactGroupScopeOptions={dataSource:[{id:0,text:"Show My Contact Lists"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",onValueChanged:function(t){e.selectedTab().recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope())},valueExpr:"id",value:this.contactGroupScope},this.massStudentGroupScopeOptions={dataSource:[{id:0,text:"Show My Student Groups"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",onValueChanged:function(t){e.selectedTab().recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope(),e.selectedSection(),e.massStudentGroupScope())},valueExpr:"id",value:this.massStudentGroupScope},this.classScopeOptions={dataSource:[{id:0,text:"Show My Classes"},{id:1,text:"Show All"}],displayExpr:"text",layout:"horizontal",onValueChanged:function(t){e.selectedTab().recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope(),e.selectedSection(),e.massStudentGroupScope(),e.classScope())},valueExpr:"id",value:this.classScope},this.staffSearchOptions={onInitialized:function(t){e.staffSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Staff},this.parentSearchOptions={onInitialized:function(t){e.parentSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Parents,isMeeting:this.isMeeting},this.studentSearchOptions={onInitialized:function(t){e.studentSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Students,isMeeting:this.isMeeting},this.classSearchOptions={onInitialized:function(t){e.classSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Classes},this.teacherSearchOptions={onAddAll:function(t){e.recipientsSelected(t)},onInitialized:function(t){e.teacherSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Teachers},this.counselorSearchOptions={onInitialized:function(t){e.counselorSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.Counselors},this.studentGroupSearchOptions={onInitialized:function(t){e.studentGroupSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.StudentGroups},this.massStudentGroupSearchOptions={onInitialized:function(t){e.massStudentGroupSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.MassStudentGroups},this.userGroupSearchOptions={onInitialized:function(t){e.userGroupSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.UserGroups},this.massEmailSearchOptions={onInitialized:function(t){e.massEmailSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.MassEmail},this.contactGroupSearchOptions={onInitialized:function(t){e.contactGroupSearch(t)},onSelect:function(t,a,i){e.recipientSelected(t,a,i)},onExitGrid:function(){return e.exitGrid()},recipientList:n.RecipientList.ContactGroups},this.recipientTabOptions={dataSource:this.tabDataSource,itemTemplate:function(e,t,a){a.append('<img src="'.concat(e.icon,'" style="padding-right: 5px;"> ').concat(e.text))},onContentReady:function(t){e.recipientTab=t.component},onSelectionChanged:function(t){e.updateOrganizationDistrict(),e.selectedTab()&&(e.selectedTab().recipientSearch().repaintGrid(),e.selectedTab().recipientSearch().loadData(e.selectedOrganization(),e.contactGroupScope(),e.selectedSection(),e.massStudentGroupScope()))},scrollByContent:!1,scrollingEnabled:!1,showNavButtons:!1,selectedItem:this.selectedTab},this.animationBoxOptions={onInitialized:function(t){e.animationBox=t},readOnly:!1,recipient:this.dummyRecipient}},e.prototype.updateTabDataSource=function(){if(this.tabDataSource.removeAll(),this.auditAdmin)o.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:o.SM.translation.staff(),id:n.RecipientList.Staff,recipientSearch:this.staffSearch}),o.SM.parentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Parent_s.gif",text:o.SM.translation.parents(),id:n.RecipientList.Parents,recipientSearch:this.parentSearch}),o.SM.studentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Student_s.gif",text:o.SM.translation.students(),id:n.RecipientList.Students,recipientSearch:this.studentSearch});else{switch(o.SM.userType){case n.UserType.Staff:var e={icon:"images/ST_GENESIS/Staff_s.gif",text:o.SM.translation.staff(),id:n.RecipientList.Staff,recipientSearch:this.staffSearch},t={icon:"images/ST_GENESIS/Parent_s.gif",text:o.SM.translation.parents(),id:n.RecipientList.Parents,recipientSearch:this.parentSearch},a={icon:"images/ST_GENESIS/Student_s.gif",text:o.SM.editorVM.isTeacher&&o.SM.enableVUEEnhancements?"Students/Parents":o.SM.translation.students(),id:n.RecipientList.Students,recipientSearch:this.studentSearch};o.SM.editorVM.isTeacher&&o.SM.enableVUEEnhancements?(this.allowNonStaffRecipients&&(o.SM.studentsTabVisible&&this.tabDataSource.push(a),o.SM.parentsTabVisible&&this.tabDataSource.push(t)),o.SM.staffTabVisible&&this.tabDataSource.push(e)):(o.SM.staffTabVisible&&this.tabDataSource.push(e),this.allowNonStaffRecipients&&(o.SM.parentsTabVisible&&this.tabDataSource.push(t),o.SM.studentsTabVisible&&this.tabDataSource.push(a))),this.allowNonStaffRecipients&&(o.SM.editorVM.isTeacher&&!this.showAdvanced()||o.SM.classesTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:o.SM.translation.classes(),id:n.RecipientList.Classes,recipientSearch:this.classSearch})),o.SM.editorVM.isTeacher&&!this.showAdvanced()||(o.SM.userGroupsTabVisible&&this.tabDataSource.push({icon:"images/ST_REVELATION/UserGroup_s.gif",text:o.SM.translation.userGroups(),id:n.RecipientList.UserGroups,recipientSearch:this.userGroupSearch}),o.SM.studentGroupsTabVisible&&this.allowNonStaffRecipients&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:o.SM.translation.studentGroups(),id:n.RecipientList.MassStudentGroups,recipientSearch:this.massStudentGroupSearch}),o.SM.massEmailTabVisible&&this.allowNonStaffRecipients&&this.tabDataSource.push({icon:"images/ST_GENESIS/SIS_MassEmail_S.gif",text:o.SM.translation.massEmail(),id:n.RecipientList.MassEmail,recipientSearch:this.massEmailSearch}));break;case n.UserType.Parent:o.SM.teachersTabVisible&&o.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:"".concat(o.SM.childName,"'s ").concat(o.SM.translation.teachers()),id:n.RecipientList.Teachers,recipientSearch:this.teacherSearch}),o.SM.counselorsTabVisible&&o.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/User_s.gif",text:"".concat(o.SM.childName,"'s ").concat(o.SM.translation.counselor()),id:n.RecipientList.Counselors,recipientSearch:this.counselorSearch}),o.SM.studentGroupsTabVisible&&o.SM.childName&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:"".concat(o.SM.childName,"'s ").concat(o.SM.translation.groups()),id:n.RecipientList.StudentGroups,recipientSearch:this.studentGroupSearch}),o.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:o.SM.translation.staff(),id:n.RecipientList.Staff,recipientSearch:this.staffSearch});break;case n.UserType.Student:o.SM.teachersTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentClasses_s.gif",text:o.SM.translation.myTeachers(),id:n.RecipientList.Teachers,recipientSearch:this.teacherSearch}),o.SM.counselorsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/User_s.gif",text:o.SM.translation.myCounselor(),id:n.RecipientList.Counselors,recipientSearch:this.counselorSearch}),o.SM.studentGroupsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/StudentGroups_s.gif",text:o.SM.translation.myGroups(),id:n.RecipientList.StudentGroups,recipientSearch:this.studentGroupSearch}),o.SM.staffTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Staff_s.gif",text:o.SM.translation.staff(),id:n.RecipientList.Staff,recipientSearch:this.staffSearch}),o.SM.studentRecipientAccess!==n.StudentRecipientAccess.SchoolStaff&&o.SM.studentsTabVisible&&this.tabDataSource.push({icon:"images/ST_GENESIS/Student_s.gif",text:o.SM.translation.students(),id:n.RecipientList.Students,recipientSearch:this.studentSearch})}this.showContactGroups&&o.SM.contactListsTabVisible&&this.allowNonStaffRecipients&&(o.SM.editorVM.isTeacher&&!this.showAdvanced()||this.tabDataSource.push({icon:"images/ST_GENESIS/Parent_s.gif",text:o.SM.translation.contactGroups(),id:n.RecipientList.ContactGroups,recipientSearch:this.contactGroupSearch}))}},e.prototype.updateOrganizationDistrict=function(){var e,t;if(!1===o.SM.allowEmailAtDistrict&&o.SM.staffRecipientAccess===n.StaffRecipientAccess.District){var a=this.organizationData().filter((function(e){return""===e.id()}))[0];a&&this.organizationData.remove(a),(null===(e=this.selectedOrganization())||void 0===e?void 0:e.id())||this.selectCurrentOrganization()}else this.organizationData().filter((function(e){return""===e.id()}))[0]||(o.SM.userType===n.UserType.Staff||(null===(t=this.selectedTab())||void 0===t?void 0:t.recipientList)===n.RecipientList.Students&&o.SM.userType===n.UserType.Student&&o.SM.studentRecipientAccess===n.StudentRecipientAccess.SchoolStaffDistrictStudents||o.SM.userType===n.UserType.Parent&&o.SM.parentRecipientAccess===n.ParentRecipientAccess.DistrictStaff)&&this.organizationData.unshift(new n.Organization({id:"",name:o.SM.translation.district()}))},e.prototype.selectCurrentOrganization=function(){var e,t=o.SM.focusOrgYearId||(null===(e=this.filteredOrganizationData()[0])||void 0===e?void 0:e.id()),a=this.filteredOrganizationData().filter((function(e){return e.id()===t}))[0];a&&this.selectedOrganization(a),o.SM.userType===n.UserType.Staff?this.staffSearch().loadData(this.selectedOrganization()):o.SM.userType===n.UserType.Student&&o.SM.studentRecipientAccess!==n.StudentRecipientAccess.SchoolStaff&&this.studentSearch().loadData(this.selectedOrganization())},e.prototype.recipientsSelected=function(e){for(var t=function(e){a.recipients().filter((function(t){return t.id()===e.id()}))[0]||a.recipients.push(e)},a=this,i=0,n=e;i<n.length;i++)t(n[i]);setTimeout((function(){var e=$("#composeRecipients").prop("scrollHeight");$("#composeRecipients").scrollTop(e)}),0)},e.prototype.exitGrid=function(){$("#".concat(this.id," #cancelAddRecipients")).focus()},e.prototype.recipientSelected=function(e,t,a){var i=this,s=o.SM.$("#animationBox");e.recipientList()===n.RecipientList.MassEmail&&e.id("".concat(this.selectedOrganization().id(),",").concat(e.grades().join())),e.recipientList()===n.RecipientList.MassEmail&&(e.organizationYearId(this.selectedOrganization().id()),e.organizationName(this.selectedOrganization().name())),this.selecting&&s.stop(!1,!0),this.selecting=!0;var r=this.recipients().filter((function(t){return t.id()===e.id()}))[0];if(r){e.recipientList()!==n.RecipientList.Classes&&e.recipientList()!==n.RecipientList.UserGroups&&e.recipientList()!==n.RecipientList.MassStudentGroups&&e.recipientList()!==n.RecipientList.MassEmail||r.groupUserTypes(r.groupUserTypes()|e.groupUserTypes());var l=o.SM.$("#to"+r.id().split(",").join("-")),d=o.SM.$("#composeRecipients").scrollTop()+l.position().top-5;o.SM.$("#composeRecipients").animate({scrollTop:d},100,(function(){o.SM.$("body").append(s.detach().removeClass("hidden")),i.animationBox.recipient(r),s.css({left:t,position:"absolute",top:a,"z-index":6e3});var e=l;s.animate(e.offset(),500,(function(){s.addClass("hidden"),i.selecting=!1}))}))}else{var c=o.SM.$("#toDummy".concat(this.id));c.addClass("invisible").removeClass("hidden");var u=o.SM.$("#composeRecipients").prop("scrollHeight");o.SM.$("#composeRecipients").animate({scrollTop:u},100,(function(){o.SM.$("body").append(s.detach().removeClass("hidden")),i.animationBox.recipient(e),s.css({left:t,position:"absolute",top:a,"z-index":6e3});var n=c.children(".contact-box");s.animate(n.offset(),500,(function(){i.recipients.push(e),c.addClass("hidden").removeClass("invisible"),s.addClass("hidden"),i.selecting=!1}))}))}},e.prototype.cancel=function(){o.SM.$("#".concat(this.id)).modal("hide"),this.onCancel&&this.onCancel()},e.prototype.removeRecipient=function(e){this.recipients.remove(e)},e.prototype.save=function(){this.onSave&&this.onSave(this.recipients().slice(0)),o.SM.$("#".concat(this.id)).modal("hide")},e.prototype.newContactGroup=function(){var e=this;r.SMEditContactGroupViewModel.instantiate({onInitialized:function(e){e.show()},onDialogClosed:function(){e.selectedTab().recipientSearch().refreshGrid()}})},e.prototype.toggleAdvanced=function(){this.showAdvanced(!this.showAdvanced()),this.updateTabDataSource(),this.selectedTab(this.tabDataSource()[0])},e}();t.SMAddRecipientViewModel=d,t.SMAddRecipientComponent={template:l,viewModel:d}},5513:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAudioRecorderComponent=void 0;var i,n,s=a(1032),o=a(2617),r=a(9),l=a(1491);!function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.NoMediaLoaded=2]="NoMediaLoaded"}(i||(i={})),function(e){e[e.Recording=0]="Recording",e[e.Inactive=1]="Inactive"}(n||(n={}));var d=function(){function e(){var e=this;this.audioSrc=s.observable(),this.audioChunks=[],this.mediaRecorderState=s.observable(n.Inactive),this.timer=new l.Timer({label:"recordingTimer"}),this.mediaRecorderDurationMS=s.observable(0),this.mediaRecorderDuration=s.computed((function(){return t=(t=e.mediaRecorderDurationMS())||0,c(Math.trunc(t/1e3));var t})),this.audioPlayer=new Audio,this.audioPlayerCurrentTime=s.observable(0),this.audioPlayerState=s.observable(i.NoMediaLoaded),this.audioVolume=s.observable(50),this.audioPlayerCurrentTimeAndDuration=s.computed((function(){return"".concat(c(e.audioPlayerCurrentTime()),"/").concat(c(e.audioPlayer.duration))})),this.audioPlayerCurrentAmount=s.computed((function(){return e.audioPlayerCurrentTime()/e.audioPlayer.duration*100})),this.recordingStartStopIconClass=s.computed((function(){var t="fa-solid fa-circle-stop fa-3x";return e.mediaRecorderState()!==n.Recording&&(t="fa-solid fa-circle fa-3x"),t})),this.playPauseIconClass=s.computed((function(){var t="fa-solid fa-play fa-3x";return console.log(e),e&&e.audioPlayerState()!==i.Pause&&(t="fa-solid fa-pause fa-3x"),t})),this.audioPlayer.onplay=function(){e.audioPlayerState(i.Play)},this.audioPlayer.onpause=function(){e.audioPlayerState(i.Pause)},this.audioPlayer.onended=function(){e.audioPlayerCurrentTime(0)},this.audioVolume.subscribe((function(t){e.audioPlayer.volume=t/100}))}return e.instantiate=function(){var t=$('<sm-audio-recorder"></sm-audio-recorder>');o.SM.$("body").append(t),s.applyBindings(new e,t[0])},e.prototype.startRecording=function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.setupMediaRecorder(t),e.mediaRecorder.start()}))},e.prototype.setupMediaRecorder=function(e){var t=this;this.mediaRecorder=new MediaRecorder(e),this.mediaRecorder.onstart=function(){t.mediaRecorderState(n.Recording),t.intervalID=window.setInterval((function(){t.mediaRecorderDurationMS(t.timer.ms())}),100)},this.mediaRecorder.ondataavailable=function(e){t.audioChunks.push(e.data)},this.mediaRecorder.onstop=function(e){t.timer.stop(),t.mediaRecorderDurationMS(t.timer.ms()),window.clearInterval(t.intervalID),t.mediaRecorderState(n.Inactive);var a=new Blob(t.audioChunks,{type:"audio/wav"});t.audioChunks=[],t.audioSrc(window.URL.createObjectURL(a)),t.audioPlayer.src=t.audioSrc(),t.audioPlayer.onloadedmetadata=function(){t.audioPlayerState(i.Pause),t.audioPlayer.duration===1/0&&(t.audioPlayer.currentTime=1e11,t.audioPlayer.ontimeupdate=function(){t.audioPlayer.currentTime=0,t.audioPlayer.ontimeupdate=function(){t.audioPlayerCurrentTime(t.audioPlayer.currentTime)}}),t.audioPlayerCurrentTime(t.audioPlayer.currentTime)},t.audioPlayer.load()}},e.prototype.stopRecording=function(){this.mediaRecorder.stop()},e.prototype.handleRecordStartStop=function(){this.mediaRecorderState()!==n.Recording?this.startRecording():this.stopRecording()},e.prototype.playRecording=function(){this.audioPlayer.play()},e.prototype.pauseRecording=function(){this.audioPlayer.pause(),this.audioPlayerState(i.Pause)},e.prototype.handlePlayPauseClick=function(){console.log(this.audioPlayer.paused),!1===this.audioPlayer.paused?this.pauseRecording():this.playRecording()},e.prototype.handleAmountPlayedChange=function(e,t){this.audioPlayer.currentTime=parseInt(t.target.value,10)/this.audioPlayer.duration},e}();function c(e){e=Math.trunc(e||0);var t=Math.trunc(e/60);e-=60*t;var a=t<10?"0".concat(t.toString()):t.toString(),i=e<10?"0".concat(e.toString()):e.toString();return"".concat(a,":").concat(i)}t.SMAudioRecorderComponent={template:r,viewModel:d}},4780:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMAuditReportComponent=t.SMAuditReportViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(6885),r=a(8076),l=a(2617),d=a(605),c=function(){function e(e){this.addRecipient=i.observable(),this.recipients=i.observableArray(),this.messageRelationship=i.observable(),this.keywords=i.observable(""),this.searchSubject=i.observable(!1),this.searchBody=i.observable(!1),this.searchAttachmentNames=i.observable(!1),this.fromDate=i.observable(new Date((new Date).setDate((new Date).getDate()-1))),this.toDate=i.observable(new Date),this.limitResults=i.observable(!1),this.requiredFieldValidator={validationRules:[{type:"required"}]},this.fromDateOptions={type:"datetime",value:this.fromDate,displayFormat:"M/d/yyyy h:mm a",onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.toDateOptions={type:"datetime",value:this.toDate,displayFormat:"M/d/yyyy h:mm a",onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.renderGrid=i.observable(!0),e.options.renderGrid&&this.renderGrid("true"===e.options.renderGrid.toLowerCase()),this.init()}return e.prototype.init=function(){var e=this;this.toRecipientListOptions={addRecipient:this.addRecipient,recipients:this.recipients,title:"Contacts"},this.addRecipientOptions={id:"auditReportAddRecipients",auditAdmin:!0,onInitialized:function(t){e.addRecipient(t)}},l.SM.topWindow().SM.instantiateAddRecipients(this.addRecipientOptions);var t=[{name:"To any of these individuals",value:n.MessageRelationship.To},{name:"From any of these individuals",value:n.MessageRelationship.From},{name:"To or From any of these individuals",value:n.MessageRelationship.ToOrFrom}];this.messageRelationshipOptions={displayExpr:"name",items:t,value:this.messageRelationship},this.messageRelationship(t[0]),this.messageGridOptions={columns:[{caption:l.SM.translation.from(),cellTemplate:function(e,t){var a=t.data;a.hasAttachments()&&$('<span class="fa fa-paperclip margin-right-small"></span>').appendTo(e),$("<span>".concat(a.from().contactDetails1(),"</span>")).appendTo(e)},cssClass:"message-name",dataField:"from"},{caption:l.SM.translation.to(),cellTemplate:function(e,t){var a=t.data,i=$.map(a.to(),(function(e){return e.contactDetails1()})).join(", ");$("<span>".concat(i,"</span>")).appendTo(e)},cssClass:"message-name",dataField:"to"},{caption:l.SM.translation.subject(),cellTemplate:function(e,t){t.data.translationComplete()?$("<span>".concat(t.data.subject(),"</span>")).appendTo(e):($('<div id="waiting'.concat(t.data.messagePersonId(),'" class="translate-subject">\n                                ').concat(l.SM.translation.waitingToLoadTranslation(),"...</div>")).appendTo(e),$('<div id="subject'.concat(t.data.messagePersonId(),'"\n                                class="collapse translate-subject"><img src="images/ST/FormSubmit.gif" />\n                                ').concat(l.SM.translation.loadingTranslation(),"...</div>")).appendTo(e))},cssClass:"message-subject",dataField:"subject",width:300},{caption:"Body",cellTemplate:function(e,t){e.append($("<div>").append(t.data.messageText()).text())},dataField:"messageText"},{caption:l.SM.translation.date(),cssClass:"message-date",dataField:"sendDateTimeFormattedLong",width:250}],dataSource:[],filterRow:{applyFilter:"auto",visible:!1},hoverStateEnabled:!0,noDataText:l.SM.translation.noMessages(),onInitialized:function(t){e.messageGrid=t.component},onRowClick:function(e){l.SM.topWindow().SM.instantiateViewMessage(e.data.messageId())},onRowPrepared:function(e){e.rowElement.addClass("message-text"),e.data&&!e.data.mailRead()&&e.rowElement.addClass("unread")},pager:{allowedPageSizes:[5,10,20],showInfo:!0,showPageSizeSelector:!0},paging:{enabled:!0,pageSize:10},remoteOperations:!0,sorting:{mode:"none"}}},e.prototype.search=function(){this.messageGrid.option("dataSource",this.getCustomStore())},e.prototype.print=function(e,t){s.MessageService.printAuditReport(this.recipients(),this.messageRelationship().value,this.keywords(),this.searchSubject(),this.searchBody(),this.searchAttachmentNames(),this.fromDate(),this.toDate()).catch((function(e){return r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Unable to Print Audit Report",e)}))},e.prototype.createRetentionSet=function(){var e=this;r.SMDialog.showInput("Create Retention Set","Enter retention set name","New Retention Set","You must enter a Retention Set Name.",(function(t,a){"Save"===t&&s.MessageService.createRetentionSet(a,e.recipients(),e.messageRelationship().value,e.keywords(),e.searchSubject(),e.searchBody(),e.searchAttachmentNames(),e.fromDate(),e.toDate()).then((function(e){var t=e?"Retention Set successfully created.":"Unable to create Retention Set.";r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Create Retention Set",t)}))}))},e.prototype.getCustomStore=function(){var e=this,t=0;return new o.DevExpress.data.CustomStore({key:"messagePersonId",load:function(a){return new Promise((function(i,n){(a=s.DBService.formatOptions(a)).take=e.messageGrid.pageSize(),s.MessageService.getAuditReportMessages(e.recipients(),e.messageRelationship().value,e.keywords(),e.searchSubject(),e.searchBody(),e.searchAttachmentNames(),e.fromDate(),e.toDate(),a).then((function(a){t=a.totalCount,e.limitResults(t>=1e3),i(a)}))}))},totalCount:function(e){return new Promise((function(e,a){e(t)}))}})},e}();t.SMAuditReportViewModel=c,t.SMAuditReportComponent={template:d,viewModel:c}},3946:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMComposeComponent=t.SMComposeViewModel=void 0;var i=a(1032),n=a(8076),s=a(2617),o=a(867),r=function(){function e(e){this.windowSize=i.observable(s.SMWindowSize.Normal),this.windowNormalX=0,this.windowNormalY=0,this.messageSent=!1,this.suppressUi=!1,this.modalInitialized=!1,this.composing=!1,this.titleText=i.observable(""),this.init()}return e.prototype.init=function(){var e=this;this.editorOptions={onInitialized:function(t){e.editor=t},onTitleUpdated:function(t){return e.titleText(t)},onMessageAction:function(t){e.close(),e.onAction&&e.onAction(t)},isEmbedded:!1}},e.prototype.setOnAction=function(e){this.onAction=e},e.prototype.toggleWindowSize=function(){var e=$("#composeDialogDrag");this.windowSize()===s.SMWindowSize.Normal?(this.windowNormalX=e.position().left,this.windowNormalY=e.position().top,e.css({top:0,left:0}),this.windowSize(s.SMWindowSize.Maximized),e.draggable("disable")):(e.css({top:this.windowNormalY,left:this.windowNormalX}),this.windowSize(s.SMWindowSize.Normal),e.draggable("enable"))},e.prototype.open=function(e,t,a){this.messageSent=!1,this.suppressUi=e.suppressUi,this.message=t,e.onSend&&(this.onAction=e.onSend),this.composing?n.SMDialog.showMessage(n.SMDialogButtons.Ok,s.SM.translation.unableToCompose(),s.SM.translation.unableToComposeWhileComposing()):(this.editor.setup(e),this.editor.initEditor(e,t,a),e.suppressUi||(window.onbeforeunload=function(){return"Changes you made may not be saved."},this.composing=!0,this.modalInitialized||($("#composeDialog").stModal({show:!1,allowClose:!1,customDialog:!0,keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){return $("#composeDialog").modal("show")}),200)))},e.prototype.close=function(){window.onbeforeunload=null,$("#composeDialog").modal("hide"),this.composing=!1},e}();t.SMComposeViewModel=r,t.SMComposeComponent={template:o,viewModel:r}},2372:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMDialogComponent=t.SMDialogViewModel=t.SMDialogType=void 0;var i,n=a(1032),s=a(2617),o=a(5733);!function(e){e[e.Input=0]="Input",e[e.Message=1]="Message"}(i=t.SMDialogType||(t.SMDialogType={}));var r=function(){function e(e){var t=this;this.title=n.observable(),this.message=n.observable(),this.leftButtons=n.observableArray(),this.rightButtons=n.observableArray(),this.dialogId=n.observable("smDialog"),this.type=n.observable(i.Input),this.input=n.observable(""),this.validationMessage=n.observable(),this.inputHasFocus=n.observable(!1),this.modalInitialized=!1;var a=e.options;this.title(a.title),this.message(a.message),this.type(a.type),this.input(a.initialValue),this.validationMessage(a.validationMessage),this.leftButtons(a.leftButtons),this.rightButtons(a.rightButtons),this.dialogId(a.dialogId),this.formValid=n.pureComputed((function(){return t.input()&&0!==t.input().length})),a.onInitialized(this)}return e.prototype.show=function(e){var t=this;e&&(this.onDismissed=e),this.modalInitialized?s.SM.topWindow().$("#".concat(this.dialogId())).modal("show"):(s.SM.topWindow().$("#".concat(this.dialogId())).stModal({customDialog:!0,keepOnHide:!0,allowClose:!1}),this.modalInitialized=!0),setTimeout((function(){t.inputHasFocus(!0)}),50)},e.prototype.hide=function(){s.SM.topWindow().$("#".concat(this.dialogId())).modal("hide"),s.SM.topWindow().$("#".concat(this.dialogId())).remove()},e.prototype.inputFocused=function(e,t){$(t.target).select()},e.prototype.buttonPressed=function(e){this.hide(),this.onDismissed&&this.onDismissed(e,this.input())},e}();t.SMDialogViewModel=r,t.SMDialogComponent={template:o,viewModel:r}},2958:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditContactGroupComponent=t.SMEditContactGroupViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(2617),r=a(9061),l=a(7319),d=function(){function e(e){this.modalInitialized=!1,this.recipients=i.observableArray(),this.addRecipient=i.observable(),this.nameHasFocus=i.observable(!1),this.nameValid=i.observable(!0),this.descriptionValid=i.observable(!0),this.formError=i.observable(),this.organizationData=i.observableArray(),this.selectedOrganizationId=i.observable(),this.editMode=i.observable(!1),this.contactGroup=i.observable(new n.ContactGroup({isPublic:!1,isEditableByStaff:!1}));var t=e.options;this.onDialogClosed=t.onDialogClosed,this.init(),t.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-contact-group").remove();var t=$('<sm-edit-contact-group params="options: editContactGroupOptions"></sm-edit-contact-group>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({editContactGroupOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.editMode(!!e),0===this.organizationData().length?s.OrganizationService.getOrganizations().then((function(a){t.organizationData(a),(o.SM.userType===n.UserType.Staff||o.SM.userType===n.UserType.Student&&o.SM.studentRecipientAccess===n.StudentRecipientAccess.SchoolStaffDistrictStudents)&&t.organizationData.unshift(new n.Organization({id:"",name:o.SM.translation.district()})),t.selectCurrentOrganization(),t.load(e)})):(this.selectCurrentOrganization(),this.load(e)),this.modalInitialized?o.SM.topWindow().$("#editContactGroupDialog").modal("show"):(o.SM.topWindow().$("#editContactGroupDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){t.nameHasFocus(!0)}),50)},e.prototype.load=function(e){var t=this;e?s.RecipientService.getContactGroup(e).then((function(e){t.contactGroup(e),t.selectedOrganizationId(t.contactGroup().organizationYearId()),t.recipients(t.contactGroup().recipients())})):(this.contactGroup(new n.ContactGroup({name:o.SM.translation.newContactGroup(),isPublic:!1})),this.recipients(this.contactGroup().recipients()),this.selectCurrentOrganization())},e.prototype.title=function(){return this.editMode()?o.SM.translation.editContactGroup():o.SM.translation.newContactGroup()},e.prototype.nameFocused=function(e,t){$(t.target).select()},e.prototype.init=function(){var e=this;r.SMAddRecipientViewModel.instantiate({id:"editContactGroupAddRecipient",onInitialized:function(t){e.addRecipient(t)},showContactGroups:!1,allowNonStaffRecipients:!0}),this.selectOrganizationOptions={onContentReady:function(t){0!==e.organizationData().filter((function(t){return t.id()===e.selectedOrganizationId()})).length&&e.selectedOrganizationId(e.organizationData()[0].id())},displayExpr:"name",items:this.organizationData,value:this.selectedOrganizationId,valueExpr:"id"},this.recipientListOptions={addRecipient:this.addRecipient,recipients:this.recipients,title:o.SM.translation.contacts(),contactGroupName:this.contactGroup().name}},e.prototype.selectCurrentOrganization=function(){var e=o.SM.focusOrgYearId||this.organizationData()[0].id(),t=this.organizationData().filter((function(t){return t.id()===e}))[0];t&&this.selectedOrganizationId(t.id())},e.prototype.save=function(){var e=this;this.contactGroup().organizationYearId(this.selectedOrganizationId()),this.contactGroup().recipients(this.recipients()),this.contactGroup().id()?s.RecipientService.updateContactGroup(this.contactGroup()).then((function(){e.close(),e.onDialogClosed&&e.onDialogClosed()})):s.RecipientService.addContactGroup(this.contactGroup()).then((function(){e.close(),e.onDialogClosed&&e.onDialogClosed()}))},e.prototype.close=function(){this.addRecipient().removeDialog(),this.dialog.modal("hide")},e}();t.SMEditContactGroupViewModel=d,t.SMEditContactGroupComponent={template:l,viewModel:d}},1575:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditFolderComponent=t.SMEditFolderViewModel=void 0;var i=a(1032),n=a(6853),s=a(3031),o=a(2617),r=a(2509),l=function(){function e(e){this.title=i.observable(),this.folder=i.observable(new n.Folder),this.folderNameHasFocus=i.observable(!1),this.modalInitialized=!1,this.formError=i.observable();var t=e.options;this.init(),t.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-folder").remove();var t=$('<sm-edit-folder params="options: editFolderOptions"></sm-edit-folder>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({editFolderOptions:e},t[0])},e.prototype.create=function(e,t){this.onDismissed=t,this.title(o.SM.translation.newFolder()),this.folder(new n.Folder({name:o.SM.translation.newFolder()})),this.show()},e.prototype.edit=function(e,t){this.originalName=e.name(),this.onDismissed=t,this.title(o.SM.translation.editFolder()),this.folder(new n.Folder({folderId:e.folderId(),name:e.name()})),this.show()},e.prototype.init=function(){var e=this;this.formValid=i.pureComputed((function(){return e.folder().name()&&0!==e.folder().name().length}))},e.prototype.show=function(){var e=this;this.formError(""),this.folder().name.subscribe((function(){e.formError("")})),this.modalInitialized?o.SM.topWindow().$("#editFolderDialog").modal("show"):(o.SM.topWindow().$("#editFolderDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){e.folderNameHasFocus(!0)}),50)},e.prototype.folderNameFocused=function(e,t){$(t.target).select()},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){var e=this;this.folder().name()===this.originalName?(this.hide(),this.onDismissed&&this.onDismissed(null)):this.formValid()&&(this.folder().folderId()?s.FolderService.updateFolder(this.folder()).then((function(t){t.successful?(e.hide(),e.onDismissed&&e.onDismissed(null)):e.formError(t.errorMessage)})):s.FolderService.addFolder(this.folder()).then((function(t){t.successful?(e.hide(),e.onDismissed&&e.onDismissed(t.data)):e.formError(t.errorMessage)})))},e}();t.SMEditFolderViewModel=l,t.SMEditFolderComponent={template:r,viewModel:l}},6326:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditSignatureComponent=t.SMEditSignatureViewModel=void 0;var i=a(1032),n=a(6853),s=a(6174),o=a(2617),r=a(7935),l=function(){function e(e){this.title=i.observable(),this.signature=i.observable(new n.Signature),this.modalInitialized=!1,e.options.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-signature").remove();var t=$('<sm-edit-signature params="options: editSignatureOptions"></sm-edit-signature>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({editSignatureOptions:e},t[0])},e.prototype.show=function(e,t){var a=this;this.onDismissed=t,this.classicEditorNewSignature?this.classicEditorNewSignature.setData(e.newMessages()):o.SM.createEditor({element:o.SM.$("#newSignature")[0],showViewTemplates:!1,showInsertToken:!1}).then((function(t){a.classicEditorNewSignature=t,a.classicEditorNewSignature.setData(e.newMessages())})),this.classicEditorNewSignature?this.classicEditorReplySignature.setData(e.replies()):o.SM.createEditor({element:o.SM.$("#repliesSignature")[0],showViewTemplates:!1,showInsertToken:!1}).then((function(t){a.classicEditorReplySignature=t,a.classicEditorReplySignature.setData(e.replies())})),this.modalInitialized?o.SM.$("#editSignatureDialog").modal("show"):(o.SM.$("#editSignatureDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){a.dialog=e},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){var e=this,t=this.classicEditorNewSignature.getData(),a=this.classicEditorReplySignature.getData();s.MiscService.updateSignature(t,a).then((function(){e.hide(),(null===o.SM||void 0===o.SM?void 0:o.SM.editorVM)&&(null===o.SM||void 0===o.SM||o.SM.editorVM.updateSignature(new n.Signature({newMessages:t,replies:a}))),e.onDismissed&&e.onDismissed(new n.Signature({newMessages:t,replies:a}))}))},e}();t.SMEditSignatureViewModel=l,t.SMEditSignatureComponent={template:r,viewModel:l}},7279:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditTemplateComponent=t.SMEditTemplateViewModel=void 0;var i=a(1032),n=a(6853),s=a(2449),o=a(2617),r=a(6224),l=function(){function e(e){this.template=i.observable(new n.UserTemplate),this.originalTemplate=i.observable(),this.modalInitialized=!1,this.templateNameHasFocus=i.observable(!1),e.options.onInitialized(this),this.init()}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-edit-template").remove();var t=$('<sm-edit-template params="options: editTemplateOptions"></sm-edit-template>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({editTemplateOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.originalTemplate(e),this.template().userTemplateId(e.userTemplateId()),this.template().name(e.name()),this.template().messageText(e.messageText()),this.template(new n.UserTemplate({messageText:e.messageText(),name:e.name(),templateId:e.userTemplateId()})),o.SM.createEditor({element:$("#template")[0],showViewTemplates:!1,showInsertToken:!0}).then((function(e){t.classicEditor=e,t.classicEditor.setData(t.template().messageText())})),this.modalInitialized?o.SM.topWindow().$("#editTemplateDialog").modal("show"):(o.SM.topWindow().$("#editTemplateDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0}),this.modalInitialized=!0),setTimeout((function(){t.templateNameHasFocus(!0)}),50)},e.prototype.init=function(){var e=this;this.formValid=i.pureComputed((function(){return e.template().name()&&0!==e.template().name().length}))},e.prototype.hide=function(){this.dialog.modal("hide"),this.classicEditor.destroy()},e.prototype.save=function(){var e=this;this.formValid()&&(this.template().messageText(this.classicEditor.getData()),s.UserTemplateService.updateUserTemplate(this.template()).then((function(){e.originalTemplate().name(e.template().name()),e.originalTemplate().messageText(e.template().messageText()),e.hide()})))},e.prototype.templateNameFocused=function(e,t){$(t.target).select()},e}();t.SMEditTemplateViewModel=l,t.SMEditTemplateComponent={template:r,viewModel:l}},5956:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMEditorComponent=t.SMEditorViewModel=t.SMEditorType=t.SMEditorAction=void 0;var i,n,s,o=a(1032),r=a(6853),l=a(3720),d=a(6885),c=a(8076),u=a(2617),p=a(9061),h=a(2372),m=a(7279),b=a(1953),g=a(6197),S=a(3298),v=a(4005);!function(e){e[e.Send=0]="Send",e[e.SaveDraft=1]="SaveDraft",e[e.DiscardDraft=2]="DiscardDraft",e[e.SaveTemplate=3]="SaveTemplate"}(i=t.SMEditorAction||(t.SMEditorAction={})),function(e){e[e.New=0]="New",e[e.EditDraft=1]="EditDraft"}(n=t.SMEditorType||(t.SMEditorType={})),function(e){e[e.None=0]="None",e[e.Saving=1]="Saving",e[e.Successful=2]="Successful",e[e.Failed=3]="Failed"}(s||(s={}));var f=function(){function e(e){var t=this;this.message=o.observable(new r.Message),this.messageSent=!1,this.addRecipientVM=o.observable(),this.ccVisible=o.observable(!1),this.bccVisible=o.observable(!1),this.showCcVisible=o.observable(!0),this.showBccVisible=o.observable(!0),this.isDirty=o.observable(!1),this.isDirtyCounter=o.observable(0),this.autoSaveDate=o.observable(),this.autoSaveState=o.observable(s.None),this.isUploadingAttachmentDragDrop=!1,this.isUploadingAttachment=o.observable(!1),this.topicHasFocus=o.observable(!1),this.subjectHasFocus=o.observable(!1),this.templateData=o.observableArray(),this.templateDataFiltered=o.observableArray(),this.modalInitialized=!1,this.fromOptionsInternal=o.observableArray(),this.editTemplate=o.observable(),this.loading=o.observable(!1),this.loadMessage=o.observable(),this.addressToTeacher=o.observable(!1),this.addressToParents=o.observable(!0),this.addressToStudents=o.observable(!0),this.contactCategoriesInternal=o.observableArray(),this.draggingFiles=o.observable(!1),this.uploadCancelled=!1,this.isEmbedded=o.observable(!0),this.allowSend=o.observable(!0),this.allowAttachments=o.observable(!0),this.allowDraft=o.observable(!0),this.allowSelectSender=o.observable(!0),this.allowNonStaffRecipients=o.observable(u.SM.allowNonStaffRecipients),this.includeSignature=o.observable(!0),this.studentGU=o.observable(),this.studentStudent=o.observable(),this.studentParents=o.observableArray([]),this.studentTeachers=o.observableArray([]),this.studentStudentGroups=o.observableArray([]),this.studentCounselor=o.observable(),this.teacherSections=o.observableArray([]),this.teacherStudentGroups=o.observableArray([]),this.teacherAddressToParents=o.observable(!0),this.teacherAddressToStudents=o.observable(!0),this.surveyBeginDateOptions={type:"date",value:this.message().surveyInfo().startDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.surveyBeginDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.surveyBeginTimeOptions={type:"time",value:this.message().surveyInfo().startDate,displayFormat:"h:mm a",onContentReady:function(e){t.surveyBeginTimeControl=e.component}},this.surveyEndDateOptions={type:"date",value:this.message().surveyInfo().endDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.surveyEndDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.surveyEndTimeOptions={type:"time",value:this.message().surveyInfo().endDate,displayFormat:"h:mm a",onContentReady:function(e){t.surveyEndTimeControl=e.component}},this.meetingDate=o.observable(),this.meetingStartTime=o.observable(),this.meetingDateOptions={type:"date",value:this.meetingDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.meetingDateControl=e.component},onValueChanged:function(e){e.value&&e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())}},this.meetingStartTimeOptions={type:"time",value:this.meetingStartTime,displayFormat:"h:mm a",onContentReady:function(e){t.meetingStartTimeControl=e.component}},this.meetingEndTimeOptions={type:"time",value:this.message().meetingEndDate,displayFormat:"h:mm a"},this.hours=o.observable(1),this.hourOptions={displayExpr:"text",valueExpr:"value",items:[{value:0,text:"0 hours"},{value:1,text:"1 hour"},{value:2,text:"2 hours"},{value:3,text:"3 hours"},{value:4,text:"4 hours"},{value:5,text:"5 hours"},{value:6,text:"6 hours"},{value:7,text:"7 hours"},{value:8,text:"8 hours"},{value:9,text:"9 hours"},{value:10,text:"10 hours"},{value:11,text:"11 hours"},{value:12,text:"12 hours"},{value:13,text:"13 hours"},{value:14,text:"14 hours"},{value:15,text:"15 hours"},{value:16,text:"16 hours"},{value:17,text:"17 hours"},{value:18,text:"18 hours"},{value:19,text:"19 hours"},{value:20,text:"20 hours"},{value:21,text:"21 hours"},{value:22,text:"22 hours"},{value:23,text:"23 hours"},{value:24,text:"24 hours"}],onInitialized:function(e){t.hourSelectBox=e.component},value:this.hours},this.minutes=o.observable(0),this.minuteOptions={displayExpr:"text",valueExpr:"value",items:[{value:0,text:"0 minutes"},{value:15,text:"15 minutes"},{value:30,text:"30 minutes"},{value:45,text:"45 minutes"}],onInitialized:function(e){t.minuteSelectBox=e.component},value:this.minutes},this.selectedTab=o.observable({id:0}),this.composeOptions=o.observable(),this.template=new r.Template,this.templatePriorityOptions={displayExpr:"text",valueExpr:"value",items:[{value:"NRM",text:"Normal"},{value:"URG",text:"Urgent"}],value:this.template.priority},this.allowSMS=o.observable(!1),this.allowVoice=o.observable(!1),this.allowSocial=o.observable(!1),this.voiceType=o.observable(0),this.sendAllStaff=o.observable(!0),this.sendAllParents=o.observable(!0),this.sendAllStudents=o.observable(!1);var a=e&&e.options;a&&(this.onTitleUpdated=a.onTitleUpdated,this.onMessageAction=a.onMessageAction,void 0!==a.isEmbedded&&this.isEmbedded(a.isEmbedded)),this.init(),this.isEmbedded()&&this.initEditor({editorType:n.New},new r.Message),a&&a.onInitialized&&a.onInitialized(this)}return Object.defineProperty(e.prototype,"isStudentSpecific",{get:function(){return!!this.studentGU()},enumerable:!1,configurable:!0}),e.prototype.focusedOrganization=function(){return void 0===ST.FocusOrganizations?"":ST.FocusOrganizations.filter((function(e){return e.Value===ST.FocusOrgGU}))[0].InputDisp},e.prototype.unloadEvent=function(){return"Changes you made may not be saved."},e.prototype.setMessage=function(e){var t=new r.Message(JSON.parse(e));this.initEditor({editorType:n.EditDraft},t)},e.prototype.getMessage=function(){return this.message().messageText(encodeURIComponent(this.classicEditor.getData())),o.toJSON(this.message())},e.prototype.setup=function(e){var t,a=this;this.isEmbedded(!1),this.allowSend(!0),this.allowAttachments(!0),this.allowDraft(!0),this.allowSelectSender(!0),this.allowNonStaffRecipients(null===(t=null==e?void 0:e.allowNonStaffRecipients)||void 0===t||t),this.includeSignature(!0),this.studentGU(e.studentGU),p.SMAddRecipientViewModel.instantiate({id:"composeAddRecipients",allowNonStaffRecipients:this.allowNonStaffRecipients(),onInitialized:function(e){a.addRecipientVM(e)}})},e.prototype.setupEmbedded=function(e){var t,a,i,n,s,o,r=this;this.isEmbedded(!0),this.allowSend(null!==(t=null==e?void 0:e.allowSend)&&void 0!==t&&t),this.allowAttachments(null!==(a=null==e?void 0:e.allowAttachments)&&void 0!==a&&a),this.allowDraft(null!==(i=null==e?void 0:e.allowDraft)&&void 0!==i&&i),this.allowSelectSender(null!==(n=null==e?void 0:e.allowSelectSender)&&void 0!==n&&n),this.allowNonStaffRecipients(null===(s=null==e?void 0:e.allowNonStaffRecipients)||void 0===s||s),this.includeSignature(null===(o=null==e?void 0:e.includeSignature)||void 0===o||o),this.studentGU(e.studentGU),p.SMAddRecipientViewModel.instantiate({id:"composeAddRecipients",allowNonStaffRecipients:this.allowNonStaffRecipients(),onInitialized:function(e){r.addRecipientVM(e)}})},Object.defineProperty(e.prototype,"allowScheduleSend",{get:function(){return!this.message().isMeeting()&&!this.message().surveyGU()&&u.SM.currentWebPortal!==r.CurrentWebPortal.StudentVUE&&u.SM.currentWebPortal!==r.CurrentWebPortal.ParentVUE},enumerable:!1,configurable:!0}),e.prototype.stopDragging=function(e){e.preventDefault(),e.stopImmediatePropagation(),this.draggingFiles(!1)},e.prototype.initEditor=function(e,t,a){var i,d,c,p=this;this.messageSent=!1,this.selectedTab({id:0}),u.SM.editorVM=this,this.isEmbedded()?(this.allowSMS(!1),this.allowVoice(!1),this.allowSocial(!1)):(this.allowSMS(null===(i=e.allowSMS)||void 0===i||i),this.allowVoice(null===(d=e.allowVoice)||void 0===d||d),this.allowSocial(null===(c=e.allowSocial)||void 0===c||c)),this.communicationTab&&this.communicationTab.getDataSource().reload(),this.isDirtyCounterSub=this.isDirtyCounter.extend({rateLimit:{timeout:u.SM.autoSaveTimeout,method:"notifyWhenChangesStop"}}).subscribe((function(t){!p.allowDraft()||!p.isDirty()||p.isUploadingAttachment()||e.isEditingTemplate||p.isUploadingAttachmentDragDrop||p.loading()||p.autoSave().catch((function(){}))})),e.suppressUi||this.isEmbedded()||(window.onbeforeunload=function(){return"Changes you made may not be saved."},this.autoSaveState(s.None)),u.SM.isAdvancedUpload()&&this.allowAttachments()&&$("sm-editor .modal-body, #attachmentDropBox").on("dragover",this.bodyDragOver.bind(this)).on("dragleave",(function(e){null!==e.relatedTarget&&"attachmentDropBox"===e.relatedTarget.id||p.stopDragging(e)})).on("drop",(function(e){p.stopDragging(e);var t=e.originalEvent.dataTransfer.files;p.uploadAttachments(t)})),this.signature.then((function(i){p.fromOptions.then((function(s){p.isTeacher&&(p.isStudentSpecific?l.RecipientService.getStudentRecipients({studentGU:p.studentGU(),orgFilter:u.SM.focusOrgYearId}).then((function(e){var t,a="Student: "+e.student().name()+(e.student().noContactReason()?" ("+e.student().noContactReason()+")":"");if(p.studentStudent(new v.SelectObject(e.student(),a,!1,!1===(null===(t=e.student())||void 0===t?void 0:t.canReceive()))),p.studentParents(e.parents().map((function(e){var t=(e.relationship()?e.relationship()+": "+e.name():e.name())+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new v.SelectObject(e,t,!1,!1===e.canReceive())}))),p.studentTeachers(e.teachers().map((function(e){var t="Period "+e.period()+": "+e.course()+" ("+e.sectionId()+") - "+e.teacher()+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new v.SelectObject(e,t,!1,!1===e.canReceive())}))),p.studentStudentGroups(e.studentGroups().map((function(e){var t=e.groupName()+" "+e.typeValue()+" - "+e.staffName()+(e.noContactReason()?" ("+e.noContactReason()+")":"");return new v.SelectObject(e,t,!1,!1===e.canReceive())}))),e.counselor()){var i=e.counselor().name()+(e.counselor().noContactReason()?" ("+e.counselor().noContactReason()+")":"");p.studentCounselor(new v.SelectObject(e.counselor(),i,!1,!1===e.counselor().canReceive()))}})):l.RecipientService.getTeacherRecipients().then((function(e){p.teacherSections(e.sections().map((function(e){var t="Period "+e.period()+": "+e.course()+" ("+e.sectionId()+")";return new v.SelectObject(e,t)}))),p.teacherStudentGroups(e.studentGroups().map((function(e){return new v.SelectObject(e,e.groupName())})))}))),p.meetingDate(new Date);var d=new Date;d.setHours(d.getHours()+1),d.setMinutes(0),d.setSeconds(0),p.meetingStartTime(d),p.message().to.removeAll(),p.message().cc.removeAll(),p.message().bcc.removeAll(),p.message().attachments.removeAll(),p.message().subject(""),p.message().messageText(""),p.message().smsMessage(""),p.message().voiceText(""),p.message().socialText(""),p.message().sendEmail(!1),p.message().sendSMS(!1),p.message().sendVoice(!1),p.message().sendSocial(!1),p.message().updateContactLog(!1),p.message().meetingStartDate(p.meetingDate()),p.message().isMeeting(!1),p.message().recurrence(null),p.message().vidConfId(null),p.message().bccSender(!1),p.message().shouldTranslate(!0),p.message().scheduleSendDate(null),p.template.templateId(""),p.template.organizationId(e.templateOrgGU),p.template.name("New Template"),p.template.priority("NRM");var c=u.SM.defaultDuration%60;if(c=c<15?0:c<30?15:c<45?30:45,p.minutes(c),p.hours(Math.floor(u.SM.defaultDuration/60)),t&&(t=new r.Message(t.getData())),u.SM.contactCategoriesEnabled&&p.contactCategories.then((function(){p.message().contactCategory(t&&t.isMeeting()?u.SM.vidConfDefaultContactLogCategory:u.SM.defaultContactLogCategory)})),e.editorType===n.New){p.message().messageId(null),p.message().messagePersonId(null),t&&(p.message().to(t.to()),p.message().cc(t.cc()),p.message().bcc(t.bcc()),p.message().subject(t.subject()||""),p.message().messageText(t.messageText()||""),p.message().smsMessage(t.smsMessage()||""),p.message().voiceText(t.voiceText()||""),p.message().socialText(t.socialText()||""),p.message().sendEmail(t.sendEmail()||!1),p.message().sendSMS(t.sendSMS()||!1),p.message().sendVoice(t.sendVoice()||!1),p.message().sendSocial(t.sendSocial()||!1),p.message().isMeeting(t.isMeeting()),p.message().bccSender(t.bccSender()),p.message().shouldTranslate(t.shouldTranslate()),p.message().surveyGU(t.surveyGU()),p.message().scheduleSendDate(t.scheduleSendDate()),t.meetingStartDate()&&p.message().meetingStartDate(t.meetingStartDate()),t.meetingEndDate()&&p.message().meetingEndDate(t.meetingEndDate()),p.message().recurrence(t.recurrence()));var h=p.message().messageText();if(p.includeSignature()&&(h+="<p>".concat(i.newMessages(),"</p>")),p.message().messageText(h),p.message().surveyGU()){var m=new r.Attachment;m.name(p.message().subject()||"Survey"),m.attachmentType(r.AttachmentType.Survey),t.attachments=o.observableArray([m])}}else if(e.editorType===n.EditDraft){p.message().messageId(t.messageId()),p.message().messagePersonId(t.messagePersonId()),p.message().to(t.to()),p.message().cc(t.cc()),p.message().bcc(t.bcc()),p.message().subject(t.subject()),p.message().messageText(t.messageText()),p.message().smsMessage(t.smsMessage()),p.message().voiceText(t.voiceText()),p.message().socialText(t.socialText()),p.message().sendEmail(t.sendEmail()),p.message().sendSMS(t.sendSMS()),p.message().sendVoice(t.sendVoice()),p.message().sendSocial(t.sendSocial()),p.message().attachments(t.attachments()),p.message().updateContactLog(t.updateContactLog()),p.message().contactCategory(t.contactCategory()),p.message().isMeeting(t.isMeeting()),p.message().meetingStartDate(t.meetingStartDate()),p.message().meetingEndDate(t.meetingEndDate()),p.message().vidConfId(t.vidConfId()),p.message().surveyGU(t.surveyGU()),p.message().recurrence(t.recurrence()),p.message().bccSender(t.bccSender()),p.message().shouldTranslate(t.shouldTranslate()),p.message().scheduleSendDate(t.scheduleSendDate());var b=moment(t.meetingStartDate()),g=moment(t.meetingEndDate()),S=moment.duration(g.diff(b));p.meetingDate(b.toDate()),p.meetingStartTime(b.toDate()),p.hours(S.hours()),p.minutes(S.minutes())}switch(u.SM.contactLogOption){case r.ContactLogOption.NoLogging:p.message().updateContactLog(!1);break;case r.ContactLogOption.AlwaysLog:p.message().updateContactLog(!0)}p.composeOptions(e),p.onTitleUpdated&&p.onTitleUpdated(p.titleText()),u.SM.createEditor({element:$("#editor-"+p.instanceId)[0],showViewTemplates:u.SM.userType===r.UserType.Staff,showInsertToken:u.SM.userType===r.UserType.Staff,onChange:function(){p.incrementIsDirty(),p.message().sendEmail(!0)},onPaste:function(e){l.MiscService.getAttachmentsFromLinks([e]).then((function(e){var t=e[0];p.message().messagePersonId()?p.addLinkAttachment(t):p.saveMessage().then((function(){p.addLinkAttachment(t)}))}))}}).then((function(a){p.classicEditor=a,p.classicEditor.setData(unescape(p.message().messageText())),e.editorType===n.New&&t&&t.attachments().length>0&&p.saveMessage().then((function(){for(var e=0,a=t.attachments();e<a.length;e++){var i=a[e];p.addLinkAttachment(i)}}))})),setTimeout((function(){e.scTemplateGU&&(p.template.templateId(a.templateId()),p.template.organizationId(a.organizationId()),p.template.name(a.name()),p.template.priority(a.priority()),p.message().sendEmail(a.sendEmail()),p.message().sendSMS(a.sendSMS()),p.message().sendVoice(a.sendVoice()),p.message().sendSocial(a.sendSocial())),p.autoSaveDate(""),p.clearIsDirty(),p.showCc(p.message().cc().length>0),p.showBcc(p.message().bcc().length>0),e.suppressUi?p.preSendMessage():p.isEmbedded()||(p.message().isMeeting()?p.topicHasFocus(!0):p.subjectHasFocus(!0))}),100)}))}))},e.prototype.addLinkAttachment=function(e){var t=this;this.message().attachments().filter((function(t){return t.link()===e.link()})).length>0||l.MessageService.addAttachment(this.message().messagePersonId(),e).then((function(){t.message().attachments.push(e)})).catch((function(){$.pnotify_error("Unable to add link: ".concat(e.name()))}))},e.prototype.setMeetingStartTimeNow=function(){this.meetingDate(new Date),this.meetingStartTime(new Date)},e.prototype.send=function(){this.message().isMeeting()?this.validateMeeting():this.validateMessage()},e.prototype.validateMeeting=function(){if(!this.composeOptions().suppressUi){var e=this.meetingDate();e.setHours(this.meetingStartTime().getHours()),e.setMinutes(this.meetingStartTime().getMinutes()),e.setSeconds(0),this.message().meetingStartDate(e);var t=new Date(this.meetingDate().getTime()+6e4*this.hours()*60+6e4*this.minutes());this.message().meetingEndDate(t)}var a=new Date;a.setHours(0,0,0,0),this.message().meetingStartDate()<a?c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.meetingStartDate(),u.SM.translation.meetingStartDateInPast()):this.validateMessage()},e.prototype.validateSurveyInfo=function(){return this.surveyBeginDateControl.option("isValid")?this.surveyBeginTimeControl.option("isValid")?this.surveyEndDateControl.option("isValid")?this.surveyEndTimeControl.option("isValid")?void 0:["End Time","You must enter a valid end time."]:["End Date","You must enter a valid end date."]:["Begin Time","You must enter a valid start time."]:["Begin Date","You must enter a valid start date."]},e.prototype.validateMessage=function(){var e=this,t=this.message().surveyGU()&&this.validateSurveyInfo(),a=this.message().to().length+this.message().cc().length+this.message().bcc().length;this.isTeacher&&(this.isStudentSpecific?a+=this.getStudentRecipients().length:a+=this.getTeacherRecipients().length),this.composeOptions().isCommunication?this.message().subject()?this.confirmCommunication():c.SMDialog.showMessage(c.SMDialogButtons.YesNo,u.SM.translation.blankSubjectTitle(),u.SM.translation.blankSubjectText(),(function(t){"Yes"===t&&e.confirmCommunication()})):t?c.SMDialog.showMessage(c.SMDialogButtons.Ok,t[0],t[1]):this.message().isMeeting()&&!this.meetingDateControl.option("isValid")?c.SMDialog.showMessage(c.SMDialogButtons.Ok,"Start Date","You must enter a valid start date."):this.message().isMeeting()&&!this.meetingStartTimeControl.option("isValid")?c.SMDialog.showMessage(c.SMDialogButtons.Ok,"Start Time","You must enter a valid start time."):0===a?c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.noRecipientsTitle(),u.SM.translation.noRecipientsText()):this.message().subject()||this.message().messageText()?this.preSendMessage():c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.blankSubjectAndBodyTitle(),u.SM.translation.blankSubjectAndBodyText())},e.prototype.confirmCommunication=function(){var e=this;if(this.composeOptions().isCommunication){var t=[];this.message().sendEmail()&&t.push("Email"),this.message().sendSMS()&&t.push("Text"),this.message().sendVoice()&&t.push("Voice"),this.message().sendSocial()&&t.push("Social");var a=[];this.sendAllStaff()&&a.push("Staff"),this.sendAllParents()&&a.push("Parents"),this.sendAllStudents()&&a.push("Students");var i=this.combineWords(t),n=this.composeOptions().isUrgent?this.combineWords(a):"Selected Recipients",s="<p>Are you sure you would like to send the following message?</p>";this.composeOptions().isUrgent&&(s+="<p><strong>Focus:</strong> ".concat(this.focusedOrganization(),"</p>")),s+="<p><strong>Type:</strong> ".concat(i,"</p>\n                <p><strong>To:</strong> ").concat(n,"</p>"),c.SMDialog.showMessage(c.SMDialogButtons.YesNo,"Confirm Message",s,(function(t){"Yes"===t&&e.preSendMessage()}))}else this.preSendMessage()},e.prototype.combineWords=function(e){return e.slice(0,-1).join(", ")+(e.length<=1?"":" and ")+e.slice(-1)},e.prototype.preSendMessage=function(){var e,t,a=this;if(this.message().messageText(encodeURIComponent(this.classicEditor.getData())),this.composeOptions().suppressUi&&this.classicEditor.destroy(),this.message().isMeeting()){var i=u.SM.meetingAuth&&!this.message().hasParentRecipients;this.message().vidConfId()?VideoConferenceAPI.Update({vidConfGU:this.message().vidConfId(),name:this.message().subject(),startDate:this.message().meetingStartDate(),endDate:this.message().meetingEndDate(),recurOptions:null===(e=this.message().recurrence())||void 0===e?void 0:e.getDataUpperCase(),meetingAuth:i,success:function(e){a.message().meetingStartDate()<=new Date&&VideoConferenceAPI.JoinStartMeeting({vidConfGU:a.message().vidConfId()}),a.sendMessage()}}):VideoConferenceAPI.Create({name:this.message().subject(),startDate:this.message().meetingStartDate(),endDate:this.message().meetingEndDate(),recurOptions:null===(t=this.message().recurrence())||void 0===t?void 0:t.getDataUpperCase(),meetingAuth:i,success:function(e){var t=e.VidConfGU;t?(a.message().meetingStartDate()<=new Date&&VideoConferenceAPI.JoinStartMeeting({vidConfGU:t}),a.message().vidConfId(t),a.sendMessage()):u.SM.handleError(null,"Unable to create meeting")}})}else this.message().surveyGU()?this.sendMessage().then((function(){var e=$("#PrimaryView").viewData().FindControl("SURVEY_COLLECTORS");e&&e.Refresh(!0)})):this.sendMessage()},e.prototype.sendMessage=function(){var e,t,a=this;this.composeOptions().suppressUi||(this.loadMessage("Sending"),this.loading(!0));var s=new r.Message(this.message().getData());return this.isTeacher&&(this.isStudentSpecific?(e=s.bcc).push.apply(e,this.getStudentRecipients()):(t=s.bcc).push.apply(t,this.getTeacherRecipients())),l.MessageService.sendMessage(s).then((function(){if(a.clearIsDirty(),a.messageSent=!0,a.composeOptions().suppressUi||a.loading(!1),a.isEmbedded()?(a.initEditor({editorType:n.New},new r.Message),$.pnotify_success("Message sent!")):a.disableCompose(),a.onMessageAction)try{a.onMessageAction(i.Send)}catch(e){}})).catch((function(){a.loading(!1)}))},e.prototype.getStudentRecipients=function(){var e,t=[];this.studentStudent().selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.Students,id:this.studentStudent().object().id(),organizationYearId:this.studentStudent().object().organizationYearId(),organizationName:this.studentStudent().object().organizationName()}));for(var a=0,i=this.studentParents();a<i.length;a++){var n=i[a];n.selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.Parents,id:n.object().id(),associatedStudentId:n.object().associatedStudentId(),associatedStudentName:n.object().associatedStudentName(),organizationYearId:n.object().organizationYearId(),organizationName:n.object().organizationName()}))}for(var s=0,o=this.studentTeachers();s<o.length;s++){var l=o[s];l.selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.Teachers,id:l.object().id(),section:{sectionId:l.object().sectionId(),course:l.object().course(),period:l.object().period(),room:l.object().room()},organizationYearId:l.object().organizationYearId(),organizationName:l.object().organizationName()}))}for(var d=0,c=this.studentStudentGroups();d<c.length;d++){var u=c[d];u.selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.StudentGroups,id:u.object().id(),associatedGroupId:u.object().groupId(),associatedGroupName:u.object().groupName(),organizationYearId:u.object().organizationYearId(),organizationName:u.object().organizationName()}))}return(null===(e=this.studentCounselor())||void 0===e?void 0:e.selected())&&t.push(new r.Recipient({recipientList:r.RecipientList.Staff,id:this.studentCounselor().object().id(),organizationYearId:this.studentCounselor().object().organizationYearId(),organizationName:this.studentCounselor().object().organizationName()})),t},e.prototype.getTeacherRecipients=function(){var e=r.GroupUserType.None,t=[];if(this.teacherAddressToParents()&&(e|=r.GroupUserType.Parent),this.teacherAddressToStudents()&&(e|=r.GroupUserType.Student),e!==r.GroupUserType.None){for(var a=0,i=this.teacherSections();a<i.length;a++){var n=i[a];n.selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.Classes,groupUserTypes:e,id:n.object().id(),section:{period:n.object().period(),term:n.object().term(),sectionId:n.object().sectionId(),courseId:n.object().courseId(),course:n.object().course(),teacher:n.object().teacher(),room:n.object().room(),grade:n.object().grade()},organizationYearId:n.object().organizationYearId(),organizationName:n.object().organizationName()}))}for(var s=0,o=this.teacherStudentGroups();s<o.length;s++){var l=o[s];l.selected()&&t.push(new r.Recipient({recipientList:r.RecipientList.MassStudentGroups,groupUserTypes:e,id:l.object().id(),associatedGroupId:l.object().groupId(),associatedGroupName:l.object().groupName(),organizationYearId:l.object().organizationYearId(),organizationName:l.object().organizationName()}))}}return t},e.prototype.disableCompose=function(){window.onbeforeunload=null,this.isDirtyCounterSub.dispose(),this.disableDragAndDrop(),this.classicEditor.destroy()},e.prototype.autoSave=function(){var e=this;return new Promise((function(t,a){e.autoSaveState(s.Saving),e.saveMessage().then((function(){e.autoSaveDate(moment(Date.now()).format("h:mm:ss A")),e.autoSaveState(s.Successful),t()})).catch((function(t){e.autoSaveState(s.Failed),a(t)}))}))},e.prototype.close=function(){var e=this;this.isUploadingAttachment()||this.isUploadingAttachmentDragDrop?c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.attachmentsUploading(),u.SM.translation.attachmentsUploadingWaitOrCancel()):this.message().isMeeting()&&!this.messageSent?c.SMDialog.showDialog({message:"Are you sure you want to discard your changes?",onDismissed:function(t){"Discard"===t&&(e.message().messagePersonId()&&l.MessageService.discardDraft(e.message().messagePersonId()),e.disableCompose(),e.onMessageAction&&e.onMessageAction(i.DiscardDraft))},rightButtons:[{label:"Discard Changes",value:"Discard",css:"btn btn-danger"},{label:"Return to Meeting Request",value:"Return",css:"btn btn-primary"}],title:"Meeting Request",type:h.SMDialogType.Message}):this.isDirty()?(this.loadMessage("Saving"),this.loading(!0),this.saveMessage().then((function(){e.autoSaveState(s.Successful),e.onMessageAction&&e.onMessageAction(i.SaveDraft),e.loading(!1),e.disableCompose()})).catch((function(t){e.loading(!1),c.SMDialog.showDialog({message:"How would you like to proceed?",onDismissed:function(t){"Discard"===t&&(e.disableCompose(),e.onMessageAction&&e.onMessageAction(i.SaveDraft))},rightButtons:[{label:"Discard Changes",value:"Discard",css:"btn btn-danger"},{label:"Return to Message",value:"Return",css:"btn btn-primary"}],title:"Unable to Save Message",type:h.SMDialogType.Message})}))):(this.disableCompose(),this.onMessageAction&&this.onMessageAction(i.SaveDraft))},e.prototype.saveMessage=function(){var e=this;return new Promise((function(t,a){e.message().messageText(encodeURIComponent(e.classicEditor.getData())),e.composeOptions().isEditingTemplate?(e.template.organizationId(e.composeOptions().templateOrgGU),e.template.emailSubject(e.message().subject()),e.template.emailBody(e.message().messageText()),e.template.smsMessage(e.message().smsMessage()),e.template.voiceText(e.message().voiceText()),e.template.socialText(e.message().socialText()),e.template.sendEmail(e.message().sendEmail()),e.template.sendSMS(e.message().sendSMS()),e.template.sendVoice(e.message().sendVoice()),e.template.sendSocial(e.message().sendSocial()),l.TemplateService.saveTemplate(e.template).then((function(a){e.template.templateId(a),e.clearIsDirty(),t()})).catch((function(e){a(e)}))):l.MessageService.saveDraft(e.message()).then((function(a){e.message().messagePersonId(a),e.clearIsDirty(),t()})).catch((function(e){a(e)}))}))},e.prototype.openAttachment=function(e){switch(e.attachmentType()){case r.AttachmentType.File:e.status()===r.AttachmentStatus.Complete&&(window.ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(e.attachmentId()),$("#openAttachmentForm").submit());break;case r.AttachmentType.Survey:break;case r.AttachmentType.STQuery:ST.OpenViewWindow("E51430E2-DFD1-4348-9266-BDCFB437820D",null,null,{SERVER_STATE:{D:[{"@K":"SM_ATTACH_GU","@V":e.attachmentId()},{"@K":"SM_QUERY_XML","@V":e.queryXml()}]}});break;default:ST.OpenViewWindow(e.viewGU(),e.tabGU(),e.identityGU())}},e.prototype.showTemplateDropDown=function(e){this.templatePopoverSettings.visible()?this.templatePopover.hide():this.templatePopover.show($(e))},e.prototype.updateSignature=function(e){this.signatureInternal=e},e.prototype.init=function(){var e=this;this.instanceId=ST.UUIDv4(),$("#uploadFrame").on("load",this.uploadFrameLoaded.bind(this)),g.SMScheduleSendViewModel.instantiate({onInitialized:function(t){e.scheduleSend=t}}),b.SMRecurrenceViewModel.instantiate({onInitialized:function(t){e.recurrence=t},onUpdate:function(t){e.message().recurrence(t)}}),m.SMEditTemplateViewModel.instantiate({onInitialized:function(t){e.editTemplate(t)}}),this.loadPanelSettings={message:this.loadMessage,position:{of:"#composeDialogDrag .modal-content"},shading:!0,shadingColor:"rgba(0, 0, 0, 0.4)",visible:this.loading},this.toRecipientListOptions={addRecipient:this.addRecipientVM,onDialogClosed:this.addDialogClosed.bind(this),recipients:this.message().to,title:u.SM.translation.to(),isMeeting:this.message().isMeeting},this.ccRecipientListOptions={addRecipient:this.addRecipientVM,onDialogClosed:this.addDialogClosed.bind(this),recipients:this.message().cc,title:u.SM.translation.cc(),isMeeting:this.message().isMeeting},this.bccRecipientListOptions={addRecipient:this.addRecipientVM,onDialogClosed:this.addDialogClosed.bind(this),recipients:this.message().bcc,title:u.SM.translation.bcc(),isMeeting:this.message().isMeeting},this.fromSettings={displayExpr:"description",items:this.fromOptionsInternal,onInitialized:function(t){e.fromSelectBox=t.component},value:this.message().fromOption},this.contactCategorySettings={displayExpr:"name",items:this.contactCategoriesInternal,onInitialized:function(t){e.contactCategorySelectBox=t.component},valueExpr:"id",value:this.message().contactCategory,disabled:o.pureComputed((function(){return!e.message().updateContactLog()}))},this.message().to.subscribe((function(){e.incrementIsDirty()})),this.message().cc.subscribe((function(){e.incrementIsDirty()})),this.message().bcc.subscribe((function(t){e.incrementIsDirty(),t.length&&e.showBcc(!0)})),this.message().subject.subscribe((function(){e.incrementIsDirty(),e.message().sendEmail(!0)})),this.message().attachments.subscribe((function(){e.incrementIsDirty(),e.message().sendEmail(!0)})),this.message().smsMessage.subscribe((function(){e.incrementIsDirty(),e.message().sendSMS(!0)})),this.message().voiceText.subscribe((function(){e.incrementIsDirty(),e.message().sendVoice(!0)})),this.message().socialText.subscribe((function(){e.incrementIsDirty(),e.message().sendSocial(!0)})),this.template.name.subscribe((function(){e.incrementIsDirty()})),this.template.priority.subscribe((function(){e.incrementIsDirty()})),this.sendAllStaff.subscribe((function(){e.incrementIsDirty()})),this.sendAllParents.subscribe((function(){e.incrementIsDirty()})),this.sendAllStudents.subscribe((function(){e.incrementIsDirty()})),this.message().sendEmail.subscribe((function(){e.incrementIsDirty()})),this.message().sendSMS.subscribe((function(){e.incrementIsDirty()})),this.message().sendVoice.subscribe((function(){e.incrementIsDirty()})),this.message().sendSocial.subscribe((function(){e.incrementIsDirty()})),this.templatePopoverSettings={deferRendering:!1,onContentReady:function(t){e.templatePopover=t.component},shading:!1,visible:o.observable(!1),width:275},this.templateSearchSettings={mode:"search",onValueChanged:function(t){e.filterTemplateData()},placeholder:"Search",value:o.observable(""),valueChangeEvent:"keyup"},this.templateListSettings={dataSource:this.templateDataFiltered,height:"100%",onContentReady:function(t){e.templateList=t.component},onItemClick:function(t){var a=t.itemData,i=a.messageText(),n=e.message().to()[0];if(n){var s="",o="";switch(n.recipientList()){case r.RecipientList.Parents:s=n.associatedStudentId(),o=n.id();break;case r.RecipientList.Students:s=n.id()}s||o?l.UserTemplateService.getUserTemplateMerged(a.userTemplateId(),s,o).then((function(t){e.classicEditor.setData(t,e.classicEditor.model.document.selection.getFirstPosition())})):e.classicEditor.setData(i,e.classicEditor.model.document.selection.getFirstPosition())}else e.classicEditor.setData(i,e.classicEditor.model.document.selection.getFirstPosition());e.templatePopover.hide()}},this.showAutoSaving=o.pureComputed((function(){return e.autoSaveState()===s.Saving})),this.autoSaveResults=o.pureComputed((function(){switch(e.autoSaveState()){case s.Successful:return"".concat(u.SM.translation.autosavedAt()," ").concat(e.autoSaveDate());case s.Failed:return"Autosave Failed";default:return null}})),this.recurrenceText=o.pureComputed((function(){return e.message().recurrence()?(e.message().recurrence().startDate(e.meetingDate()),e.message().recurrence().startTime(e.meetingStartTime()),e.message().recurrence().stopDate(new Date(e.message().recurrence().stopDate())),VideoConferenceAPI.RecurText(e.message().recurrence().getDataUpperCase())):"None"})),this.sendText=o.pureComputed((function(){return e.message().isMeeting()?e.message().vidConfId()?"Send Updated Meeting Request":"Send Meeting Request":u.SM.translation.send()})),this.communicationTabOptions={dataSource:this.getCustomStore(),itemTemplate:function(e,t,a){a.append('<span class="'.concat(e.icon,'" style="font-size: 2rem; padding-right: 5px;"></span>\n                    <span style="padding-right: 20px;">').concat(e.text,"</span>"));var i=$("<span/>").addClass(e.toggle()?"fa-regular fa-square-check":"fa-regular fa-square").on("click",(function(t){e.toggle(!e.toggle())}));e.toggle.subscribe((function(e){i.attr("class",e?"fa-regular fa-square-check":"fa-regular fa-square")})),a.append(i)},onContentReady:function(t){void 0===e.communicationTab&&(e.communicationTab=t.component)},scrollByContent:!1,scrollingEnabled:!1,showNavButtons:!1,selectedItem:this.selectedTab},this.voiceTypeOptions={dataSource:[{id:0,text:"Text To Speech"},{id:1,text:"Record My Message"}],displayExpr:"text",layout:"horizontal",valueExpr:"id",value:this.voiceType},this.loadTemplateData()},e.prototype.getCustomStore=function(){var e=this;return new d.DevExpress.data.CustomStore({key:"id",load:function(t){return e.getCommunicationData()}})},e.prototype.getCommunicationData=function(){var e=this;return new Promise((function(t,a){var i=[{icon:"fas fa-envelope",text:"Email",id:r.CommunicationType.Email,toggle:e.message().sendEmail}];e.allowSMS()&&u.SM.smsTabVisible&&i.push({icon:"fas fa-sms",text:"Text",id:r.CommunicationType.Text,toggle:e.message().sendSMS}),e.allowVoice()&&u.SM.voiceTabVisible&&i.push({icon:"fas fa-phone",text:"Voice",id:r.CommunicationType.Voice,toggle:e.message().sendVoice}),e.allowSocial()&&u.SM.socialTabVisible&&i.push({icon:"fa-regular fa-share-nodes",text:"Social",id:r.CommunicationType.Social,toggle:e.message().sendSocial}),t(i)}))},Object.defineProperty(e.prototype,"titleText",{get:function(){var e=this;return o.pureComputed((function(){return e.message().isMeeting()?e.message().vidConfId()?"Update Meeting Request":"New Meeting Request":e.composeOptions().isEditingTemplate?"Edit Template":u.SM.translation.newMessage()}))},enumerable:!1,configurable:!0}),e.prototype.bodyDragOver=function(e){e.preventDefault(),e.stopPropagation(),this.draggingFiles(!0)},e.prototype.disableDragAndDrop=function(){u.SM.isAdvancedUpload()&&$("sm-editor .modal-body").off("dragover",this.bodyDragOver.bind(this)).off("dragleave").off("drop")},e.prototype.openScheduleSend=function(){var e=this;this.scheduleSend.create((function(t){e.message().scheduleSendDate(t),e.send()}))},e.prototype.filterTemplateData=function(){var e=this.templateSearchSettings.value().toLowerCase(),t=this.templateData().filter((function(t){return t.name().toLowerCase().indexOf(e)>-1}));this.templateDataFiltered(t)},e.prototype.loadTemplateData=function(){var e=this;l.UserTemplateService.getUserTemplates().then((function(t){e.templateData(t),e.filterTemplateData()}))},e.prototype.newTemplate=function(){var e=this;this.templatePopover.hide(),c.SMDialog.showInput("New Template From Message","Enter template name","New Template","You must enter a valid name.",(function(t,a){"Save"===t&&l.UserTemplateService.addUserTemplate(new r.UserTemplate({messageText:e.classicEditor.getData(),name:a})).then((function(){e.loadTemplateData()}))}))},e.prototype.addDialogClosed=function(){this.subjectHasFocus(!0)},e.prototype.incrementIsDirty=function(){this.isDirty(!0),this.isDirtyCounter(this.isDirtyCounter()+1)},e.prototype.clearIsDirty=function(){this.isDirty(!1)},e.prototype.showCc=function(e){void 0===e&&(e=!0),this.ccVisible(e),this.showCcVisible(!e)},e.prototype.showBcc=function(e){void 0===e&&(e=!0),this.bccVisible(e),this.showBccVisible(!e)},e.prototype.addAttachment=function(){$("#uploadFile").click()},e.prototype.removeAttachment=function(e){var t=this;e.status()===r.AttachmentStatus.UploadFailed||e.status()===r.AttachmentStatus.WaitingToUpload||e.attachmentType()===r.AttachmentType.Link||e.attachmentType()===r.AttachmentType.Survey?this.message().attachments.remove(e):(e.status()===r.AttachmentStatus.Uploading&&(this.uploadCancelled=!0,this.currentXhr.abort()),e.attachmentId()?l.MessageService.deleteAttachment(this.message().messagePersonId(),e.attachmentId()).then((function(a){t.message().attachments.remove(e)})):this.message().attachments.remove(e))},e.prototype.uploadAttachments=function(e){var t=this,a=[],i=[],n=1048576,s="";if(u.SM.isAdvancedUpload()){for(var o=function(e){var t=!0,s=e.name.split(".").pop().toUpperCase();if(u.SM.blockedExtensions.filter((function(e){return e.toUpperCase()===s})).length>0?(i.push(e),t=!1):e.size>=u.SM.maxAttachmentSizeMB*n&&(a.push(e),t=!1),t){var o=new r.Attachment;o.name(e.name),o.status(r.AttachmentStatus.WaitingToUpload),o.file(e),l.message().attachments.push(o)}},l=this,d=0,p=e;d<p.length;d++)o(f=p[d]);if(i.length>0){s+="<strong>".concat(u.SM.translation.attachmentExtensionBlocked(),"</strong>"),s+="<ul>";for(var h=0,m=i;h<m.length;h++){var b=(f=m[h]).name.split(".").pop().toUpperCase();s+="<li>".concat(f.name," (").concat(b,")</li>")}s+="</ul>"}if(a.length>0){var g=u.SM.translation.format(u.SM.translation.attachmentTooLarge(),{maxAttachmentSizeMB:u.SM.maxAttachmentSizeMB});s+="<strong>".concat(g,"</strong>"),s+="<ul>";for(var S=0,v=a;S<v.length;S++){var f=v[S];s+="<li>".concat(f.name," (").concat((f.size/n).toFixed(0)," MB)</li>")}s+="</ul>"}s.length>0&&c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.unableToAddAttachment(),s)}else{var M=$("#uploadFile").val().toString();if(0===M.length)return;var y=M.indexOf("\\")>=0?M.lastIndexOf("\\"):M.lastIndexOf("/"),T=M.substring(y);0!==T.indexOf("\\")&&0!==T.indexOf("/")||(T=T.substring(1));var w=new r.Attachment;w.name(T),w.attachmentId("-1"),w.status(r.AttachmentStatus.Uploading),this.message().attachments.push(w)}$("#uploadFile").val(""),this.message().messagePersonId()?this.submitAttachments():this.saveMessage().then((function(){t.submitAttachments()}))},e.prototype.submitAttachments=function(){u.SM.isAdvancedUpload()?(this.uploadErrors=[],this.uploadNextAttachment()):($("#messagePersonId").val(this.message().messagePersonId()),$("#uploadRequest").val('\n                <REV_REQUEST>\n                    <EVENT NAME="Rev_Upload">\n                        <REQUEST DA_OBJ_ID="A59FEDA5-5C90-4452-B91F-51E09FC3747D"></REQUEST>\n                    </EVENT>\n                </REV_REQUEST>'),this.isUploadingAttachment(!0),$("#uploadForm").submit(),setTimeout((function(){$("#uploadFile").val("")}),500))},e.prototype.uploadNextAttachment=function(){var e=this;if(!this.isUploadingAttachmentDragDrop){this.uploadCancelled=!1;var t=this.message().attachments().filter((function(e){return e.status()===r.AttachmentStatus.WaitingToUpload}))[0];if(t)t.status(r.AttachmentStatus.Uploading),this.isUploadingAttachmentDragDrop=!0,l.MessageService.addAttachment(this.message().messagePersonId(),t,(function(e){t.progress(e)}),(function(t){return e.currentXhr=t})).then((function(a){if(a.successful){var i=a.data;t.attachmentId(i),t.status(r.AttachmentStatus.Complete),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()}else t.status(r.AttachmentStatus.UploadFailed),e.uploadErrors.push(a.errorMessage),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()})).catch((function(){e.uploadCancelled||t.status(r.AttachmentStatus.UploadFailed),e.isUploadingAttachmentDragDrop=!1,e.uploadNextAttachment()}));else if(this.uploadErrors.length>0){var a=this.uploadErrors.map((function(e){return"<li>".concat(e,"</li>")})).join("");c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.unableToAddAttachment(),"<ul>".concat(a,"</ul>"))}}},e.prototype.uploadFrameLoaded=function(){if(this.isUploadingAttachment()){this.isUploadingAttachment(!1);var e=$($("#uploadFrame")[0].contentDocument),t=this.message().attachments().filter((function(e){return"-1"===e.attachmentId()}))[0];if(e.find("MANUAL_FILE").length>0){var a=e.find("MANUAL_FILE").attr("UPLOADED_FILE_GU");t.attachmentId(a),t.status(r.AttachmentStatus.Complete)}else{this.message().attachments.remove(t);var i;i=e.find("ERROR").length>0?e.find("ERROR").text():e.find("title").text(),c.SMDialog.showMessage(c.SMDialogButtons.Ok,u.SM.translation.unableToAddAttachment(),i)}}},e.prototype.removeTemplate=function(e){var t=this;this.templatePopover.hide(),c.SMDialog.showMessage(c.SMDialogButtons.YesNo,"Delete Template","Are you sure you want to delete the template '".concat(e.name(),"'?"),(function(a){"Yes"===a&&l.UserTemplateService.deleteUserTemplate(e.userTemplateId()).then((function(){t.loadTemplateData()}))}))},e.prototype.doEditTemplate=function(e){this.templatePopover.hide(),this.editTemplate().show(e)},Object.defineProperty(e.prototype,"isTeacher",{get:function(){return this.fromOptionsInternal().filter((function(e){return e.fromType()===r.FromType.Teacher})).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fromOptions",{get:function(){var e=this;return new Promise((function(t,a){u.SM.userType!==r.UserType.Staff?t(null):e.fromOptionsInternal.length>0?(e.message().fromOption(e.fromOptionsInternal()[0]),t(e.fromOptionsInternal)):l.MiscService.getFromOptions().then((function(a){e.fromOptionsInternal(a),e.message().fromOption(e.fromOptionsInternal()[0]),t(e.fromOptionsInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signature",{get:function(){var e=this;return new Promise((function(t,a){e.signatureInternal?t(e.signatureInternal):l.MiscService.getSignature().then((function(a){e.signatureInternal=a,t(e.signatureInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contactCategories",{get:function(){var e=this;return new Promise((function(t,a){e.contactCategoriesInternal.length>0?t(e.contactCategoriesInternal):l.MiscService.getContactCategories().then((function(a){a.unshift(new r.ContactCategory({id:"-1",name:""})),e.contactCategoriesInternal(a),t(e.contactCategoriesInternal)}))}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentContactLogOption",{get:function(){return this.message().isMeeting()?u.SM.vidConfContactLogOption:u.SM.contactLogOption},enumerable:!1,configurable:!0}),e.prototype.editRecurrence=function(){this.recurrence.show(this.message().recurrence())},e.prototype.removeRecurrence=function(){this.message().recurrence(null)},e}();t.SMEditorViewModel=f,t.SMEditorComponent={template:S,viewModel:f}},114:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMMessageComponent=t.SMMessageViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(2617),r=a(4827),l=function(){function e(e){this.message=i.observable(),this.recipientsVisible=i.observable(!1),this.originalTextVisible=i.observable(!1),this.message=e.message,this.init()}return e.prototype.init=function(){var e=this;this.message.subscribe((function(){if(e.recipientsVisible(!1),e.message()&&e.message().isMeeting()&&e.message().meetingStartDate()){var t=new Date(e.message().meetingStartDate()),a=new Date(t.getTime()-9e5);o.SM.openVidConfId&&new Date>=a&&(VideoConferenceAPI.JoinStartMeeting({vidConfGU:o.SM.openVidConfId}),o.SM.openVidConfId=null)}}))},e.prototype.toggleRecipients=function(){this.recipientsVisible(!this.recipientsVisible())},e.prototype.showReadStatus=function(e){var t=null,a=null;e.isGroup()?a=e.id():t=e.id();var i=this.message().to().concat(this.message().cc(),this.message().bcc());o.SM.topWindow().SM.showReadStatus(this.message().messageId(),t,a,i)},e.prototype.getSurveyInfo=function(){var e=this.message().surveyInfo(),t="Survey Details Not Found";if(this.message().isSurvey()&&e.startDate()&&e.endDate()){var a=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit"}),i=a.format(new Date(e.startDate())),n=a.format(new Date(e.endDate()));t="<strong>".concat(e.name(),"</strong>: ").concat(i," - ").concat(n)}return t},e.prototype.openSurvey=function(){var e=this.message().surveyAttachment();e&&s.MessageService.getSurveyLink(e.surveyCollectorGU()).then((function(e){return ST.OpenWindowURL(e)}))},e.prototype.getVideoConferenceInfo=function(){var e="Meeting details not found";if(this.message().isMeeting()&&this.message().meetingStartDate()&&this.message().meetingEndDate()){var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit"}).format(new Date(this.message().meetingStartDate())),a=new Intl.DateTimeFormat("en",{hour:"numeric",minute:"2-digit"}).format(new Date(this.message().meetingEndDate()));e="<strong>".concat(o.SM.translation.meeting(),"</strong>: ").concat(t," - ").concat(a),this.message().recurrence()&&(VideoConferenceAPI.RecurText(this.message().recurrence()),e+="<br><strong>".concat(o.SM.translation.recurrence(),"</strong>: ").concat(this.message().recurrenceText()))}return e},e.prototype.meetingActive=function(){return this.message().meetingEndDate()>new Date},e.prototype.joinMeeting=function(){VideoConferenceAPI.JoinStartMeeting({vidConfGU:this.message().vidConfId()})},e.prototype.toggleOriginalText=function(){this.originalTextVisible(!this.originalTextVisible())},e.prototype.showMessageReadStatus=function(){var e=this.message().to().concat(this.message().cc(),this.message().bcc());o.SM.topWindow().SM.showReadStatus(this.message().messageId(),null,null,e)},e.prototype.getMessageReadText=function(){var e=this.message().readCount(),t=this.message().personCount(),a=t>0?Math.round(e/t*100):0;return"".concat(e," / ").concat(t," (").concat(a,"%) ").concat(o.SM.translation.read())},e.prototype.openAttachment=function(e){switch(e.attachmentType()){case n.AttachmentType.File:ST.GetRootWindow().ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(e.attachmentId()),$("#aID").val(o.SM.auditId),$("#dbID").val(3),$("#openAttachmentForm").submit(),setTimeout((function(){ST.GetRootWindow().ignoreUnloadMessage=!1}),10);break;case n.AttachmentType.Survey:s.MessageService.getSurveyLink(e.surveyCollectorGU()).then((function(e){return ST.OpenWindowURL(e)}));break;case n.AttachmentType.STQuery:ST.OpenViewWindow("E51430E2-DFD1-4348-9266-BDCFB437820D",null,null,{SERVER_STATE:{D:[{"@K":"SM_ATTACH_GU","@V":e.attachmentId()},{"@K":"SM_QUERY_XML","@V":e.queryXml()}]}});break;default:ST.OpenViewWindow(e.viewGU(),e.tabGU(),e.identityGU())}},e.prototype.openICS=function(){ST.GetRootWindow().ignoreUnloadMessage=!0,$("#openAttachmentFdId").val(this.message().messagePersonId()),$("#aID").val(o.SM.auditId),$("#dbID").val(4),$("#openAttachmentForm").submit(),setTimeout((function(){ST.GetRootWindow().ignoreUnloadMessage=!1}),10)},e}();t.SMMessageViewModel=l,t.SMMessageComponent={template:r,viewModel:l}},6623:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMReadStatusComponent=t.SMReadStatusViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(6885),r=a(2617),l=a(5956),d=a(2159),c=function(){function e(e){var t=this;this.modalInitialized=!1,this.countText=i.observable();var a=e.options;this.dataGridOptions={allowColumnReordering:!1,columns:[{alignment:"left",caption:r.SM.translation.read(),dataField:"read",dataType:"boolean",cellTemplate:function(e,t){var a="",i="";t.value?(a="fa fa-envelope-open-o",i=r.SM.translation.read()):(a="fa fa-envelope-o",i=r.SM.translation.unread());var n='<span><i class="'.concat(a,'" aria-hidden="true"></i> ').concat(i,"</span>");$(n).appendTo(e)},lookup:{dataSource:[{value:!0,display:r.SM.translation.read()},{value:!1,display:r.SM.translation.unread()}],valueExpr:"value",displayExpr:"display"},width:100},{caption:r.SM.translation.name(),dataField:"name",width:200},{caption:r.SM.translation.group(),dataField:"groupName"},{caption:r.SM.translation.school(),dataField:"organizationName",width:200}],filterRow:{applyFilter:"auto",visible:!0},height:350,hoverStateEnabled:!0,onInitialized:function(e){t.dataGrid=e.component,a.onInitialized(t)},remoteOperations:!0,scrolling:{mode:"infinite"},sorting:{mode:"none"}}}return e.instantiate=function(e){$(r.SM.topWindow().document.body).find("sm-read-status").remove();var t=$('<sm-read-status params="options: readStatusOptions"></sm-read-status>');$(r.SM.topWindow().document.body).append(t),i.applyBindings({readStatusOptions:e},t[0])},e.prototype.show=function(e,t,a,i){var n=this;this.recipients=i,this.messageId=e,this.groupId=a,this.modalInitialized?r.SM.topWindow().$("#readStatusDialog").modal("show"):(r.SM.topWindow().$("#readStatusDialog").stModal({allowClose:!1,customDialog:!0,init:function(i){n.dialog=i,n.dataGrid.option("dataSource",new o.DevExpress.data.CustomStore({key:"id",load:function(i){return n.loadData(e,t,a,i)}}))},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.loadData=function(e,t,a,i){var n=this;return new Promise((function(t,o){s.MessageService.getRecipientReadStatus(e,a,s.DBService.formatOptions(i)).then((function(e){var a=e.readCount(),i=e.personCount(),s=i>0?Math.round(a/i*100):0;n.countText("".concat(a," / ").concat(i," (").concat(s,"%)")),t(e.recipients())}))}))},e.prototype.close=function(){this.dialog.modal("hide")},e.prototype.compose=function(){var e=s.DBService.formatOptions({filter:this.dataGrid.getCombinedFilter()});e.skip=null,e.take=null,s.MessageService.getRecipientReadStatus(this.messageId,this.groupId,e).then((function(e){for(var t=new n.Message,a=0,i=e.recipients();a<i.length;a++){var s=i[a],o=new n.Recipient({contactDetails1:"",contactDetails2:"",id:s.id(),recipientList:s.recipientList(),organizationYearId:s.orgYearId(),organizationName:s.organizationName()});o.regenerateDetails(s.name()),t.to.push(o)}r.SM.topWindow().SM.compose({editorType:l.SMEditorType.New},t)}))},e}();t.SMReadStatusViewModel=c,t.SMReadStatusComponent={template:d,viewModel:c}},7449:function(e,t,a){"use strict";var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var a,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientBoxComponent=t.SMRecipientBoxViewModel=void 0;var s=a(1032),o=a(6853),r=a(8240),l=a(2617),d=a(2439),c=function(){function e(e){var t=this;this.recipient=s.observable(new o.Recipient),this.readOnly=s.observable(!0),this.isSender=s.observable(!1),this.teacherSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Staff)>0})),this.parentsSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Parent)>0})),this.studentsSelected=s.pureComputed((function(){return(t.recipient().groupUserTypes()&o.GroupUserType.Student)>0})),this.keepMenuOpen=!1,this.recipient(e.options.recipient),this.onRemove=e.options.onRemove,this.onShowReadStatus=e.options.onShowReadStatus,void 0!==e.options.readOnly&&this.readOnly(e.options.readOnly),void 0!==e.options.isSender&&(this.isSender=e.options.isSender),this.id="to".concat(this.recipient().id().split(",").join("-")),e.options.onInitialized&&e.options.onInitialized(this)}return Object.defineProperty(e.prototype,"element",{get:function(){return $("#".concat(this.id))},enumerable:!1,configurable:!0}),e.prototype.showGroupUserTypes=function(){return this.recipient().recipientList()===o.RecipientList.Classes||this.recipient().recipientList()===o.RecipientList.MassStudentGroups||this.recipient().recipientList()===o.RecipientList.MassEmail&&!this.teacherSelected()},e.prototype.showReadStatus=function(){this.onShowReadStatus&&this.onShowReadStatus(this.recipient())},e.prototype.getReadTitle=function(){var e=this.recipient().readCount(),t=this.recipient().personCount(),a=t>0?Math.round(e/t*100):0;return this.recipient().isGroup()?"".concat(a,"% ").concat(l.SM.translation.read()):e===t?l.SM.translation.read():l.SM.translation.unread()},e.prototype.getReadText=function(){var e=this.recipient().readCount(),t=this.recipient().personCount();return t>0&&Math.round(e/t*100),"".concat(e," / ").concat(t)},e.prototype.getReadIcon=function(){return this.recipient().readCount()===this.recipient().personCount()?"fa fa-envelope-open-o":"fa fa-envelope-o"},e.prototype.showSnapshot=function(){this.closeMenu(),l.SM.showSnapshot(this.element,this.recipient().recipientList(),this.recipient().id())},e.prototype.hideSnapshot=function(){l.SM.hideSnapshot(this.element)},e.prototype.hideAll=function(){var e=this;this.hideSnapshot(),setTimeout((function(){e.keepMenuOpen||(e.keepMenuOpen=!1,e.closeMenu())}),100)},e.prototype.keepOpen=function(){this.keepMenuOpen=!0},e.prototype.editSTQueryContent=function(e){var t=this,a=window;a&&a.ST&&a.ST.OpenViewInDialog&&(a.ST.OpenViewInDialog("50AA41AC-0156-4A21-820B-9E0C5A319D43",null,{REV_RENDER:{SERVER_STATE:{D:[{"@K":"ANALYTICS_QUERY_TEXT","@V":e.content()},{"@K":"FROM_ANALYTICS","@V":"Y"}]}}}),$.extend(a.Namespace("Actions.Analytics",a.ST),{SetSTQueryText:function(a){return i(t,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,r.RecipientService.validateSTQuery(a&&a.STQueryText["#cdata"])];case 1:return t.sent()&&e.content(a.STQueryText["#cdata"]),[2]}}))}))}}))},e.prototype.openMenu=function(e,t){if(this.recipient().recipientList()!==o.RecipientList.STQuery){if(!(this.recipient().recipientList()!==o.RecipientList.Classes&&this.recipient().recipientList()!==o.RecipientList.MassStudentGroups&&this.recipient().recipientList()!==o.RecipientList.MassEmail||this.readOnly()||this.recipient().recipientList()===o.RecipientList.MassEmail&&this.teacherSelected()))if(this.hideSnapshot(),this.isMenuOpen())this.closeMenu();else{var a=this.recipient().recipientList()!==o.RecipientList.MassEmail||this.recipient().recipientList()!==o.RecipientList.MassEmail&&this.teacherSelected()?"\n            <li>\n                <span class=\"fa-regular\" data-bind=\"click: toggleSelected.bind($data, GroupUserType.Staff),\n                    clickBubble: false, css: teacherSelected() ? 'fa-square-check' : 'fa-square'\">\n                </span> ".concat(this.recipient().staffName(),"\n            </li>"):"",i=$('\n            <div id="contactMenu" class="contact-box-menu" data-bind="click: function(){}, clickBubble: false,\n                event: { mouseenter: keepOpen, mouseleave: closeMenu }">\n                <ul>\n                    '.concat(a,'\n                    <li>\n                        <span class="fa-regular" data-bind="click: toggleSelected.bind($data, GroupUserType.Parent),\n                            clickBubble: false, css: parentsSelected() ? \'fa-square-check\' : \'fa-square\'">\n                        </span> Parents\n                    </li>\n                    <li>\n                        <span class="fa-regular" data-bind="click: toggleSelected.bind($data, GroupUserType.Student),\n                            clickBubble: false, css: studentsSelected() ? \'fa-square-check\' : \'fa-square\'">\n                        </span> Students\n                    </li>\n                </ul>\n                <div class="contact-box-menu-close" data-bind="click: closeMenu.bind($data)">\n                    Close</div>\n            </div>')),n=$(t.target).closest(".contact-box");$("body").append(i),i.css("top",n.offset().top+n.height()+7).css("left",n.offset().left+n.width()-(i.width()+6)),s.applyBindings(e,i[0])}}else this.editSTQueryContent(this.recipient())},e.prototype.isMenuOpen=function(){return!!$("#contactMenu")[0]},e.prototype.closeMenu=function(){var e=$("#contactMenu");e[0]&&e.remove()},e.prototype.toggleSelected=function(e){var t=this.recipient().groupUserTypes()^e;0!==t&&this.recipient().groupUserTypes(t)},e.prototype.imgSrc=function(e){var t="images/ST_GENESIS/";switch(e){case o.RecipientList.STQuery:return"images/ST_REVELATION/Query_S.gif";case o.RecipientList.Staff:return"".concat(t,"Staff_s.gif");case o.RecipientList.Parents:return"".concat(t,"Parent_s.gif");case o.RecipientList.Students:return"".concat(t,"Student_s.gif");case o.RecipientList.Classes:case o.RecipientList.Teachers:return"".concat(t,"StudentClasses_s.gif");case o.RecipientList.Counselors:return"".concat(t,"User_s.gif");case o.RecipientList.StudentGroups:case o.RecipientList.MassStudentGroups:return"".concat(t,"StudentGroups_s.gif");case o.RecipientList.UserGroups:return"images/ST_REVELATION/UserGroup_s.gif";case o.RecipientList.MassEmail:return"".concat(t,"SIS_MassEmail_S.gif");case o.RecipientList.ContactGroups:return"".concat(t,"Parent_s.gif")}},e.prototype.remove=function(){this.closeMenu(),this.hideSnapshot(),this.onRemove&&this.onRemove(this.recipient())},e}();t.SMRecipientBoxViewModel=c,t.SMRecipientBoxComponent={template:d,viewModel:c}},340:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientListEditComponent=t.SMRecipientListEditViewModel=void 0;var i=a(1032),n=a(8076),s=a(2617),o=a(6344),r=function(){function e(e){this.title=i.observable(),this.recipients=i.observableArray(),this.addRecipient=i.observable(),this.showContactGroups=!0,this.isMeeting=i.observable(!1),this.title(e.options.title),this.showContactGroups=!e.options.contactGroupName,this.contactGroupName=e.options.contactGroupName,this.recipients=e.options.recipients,this.addRecipient=e.options.addRecipient,this.onDialogClosed=e.options.onDialogClosed,e.options.isMeeting&&(this.isMeeting=e.options.isMeeting)}return e.prototype.clearRecipients=function(){var e=this;n.SMDialog.showMessage(n.SMDialogButtons.YesNo,s.SM.translation.removeAllRecipientsTitle(),s.SM.translation.removeAllRecipientsText(),(function(t){"Yes"===t&&e.recipients.removeAll()}))},e.prototype.removeRecipient=function(e){this.recipients.remove(e)},e.prototype.showRecipientDialog=function(){try{this.addRecipient().open(this.title(),this.recipients(),this.isMeeting(),this.updateRecipients.bind(this),this.dialogClosed.bind(this))}catch(e){console.log(e)}},e.prototype.updateRecipients=function(e){this.recipients(e),this.dialogClosed()},e.prototype.dialogClosed=function(){this.onDialogClosed&&this.onDialogClosed()},e}();t.SMRecipientListEditViewModel=r,t.SMRecipientListEditComponent={template:o,viewModel:r}},7940:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecipientSearchComponent=t.SMRecipientSearchViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(6885),r=a(8076),l=a(2617),d=a(2958),c=a(6007),u=function(){function e(e){this.isMeeting=i.observable(!1),this.addressToTeacher=i.observable(!1),this.addressToParents=i.observable(!0),this.addressToStudents=i.observable(!0),this.teacherData=i.observableArray(),this.selectedSchool=i.observable(),this.selectedTerm=i.observable(),this.selectedOrganization=i.observable(),this.selectedSection=i.observable(),this.massStudentGroupScope=i.observable(),this.classScope=i.observable(),this.grades=i.observableArray(),this.dataLoaded=!1;var t=e.options;this.recipientList=t.recipientList,this.onSelect=t.onSelect,this.onExitGrid=t.onExitGrid,this.onAddAll=t.onAddAll,this.onInitialized=t.onInitialized,this.isMeeting=t.isMeeting,this.init(),this.onInitialized&&this.onInitialized(this)}return e.prototype.loadData=function(e,t,a,r,l){var d=this;void 0===t&&(t=0),void 0===a&&(a=null),void 0===r&&(r=0),void 0===l&&(l=0),this.selectedOrganization(e),this.selectedSection(a),this.massStudentGroupScope(r),this.classScope(l),this.contactGroupScope=t,this.recipientList===n.RecipientList.MassEmail?s.OrganizationService.getOrganizationGrades(this.selectedOrganization().id()).then((function(e){d.grades(e.map((function(e){return{description:e.description,id:e.id,selected:i.observable(!1)}})))})):this.dataLoaded?this.dataGrid.refresh():(this.recipientList===n.RecipientList.Teachers?s.RecipientService.getTeachers(null).then((function(e){d.teacherData(e),d.teacherData().length>0&&d.selectedSchool(d.teacherData()[0])})):this.dataGrid.option("dataSource",new o.DevExpress.data.CustomStore({key:"id",load:this.loadFunction})),this.dataGrid.updateDimensions(),this.dataLoaded=!0)},e.prototype.repaintGrid=function(){this.dataGrid.repaint()},e.prototype.refreshGrid=function(){this.dataGrid.refresh()},e.prototype.init=function(){var e,t=this;switch(this.selectedSchoolTerms=i.pureComputed((function(){return void 0===t.selectedSchool()?i.observableArray():t.selectedSchool().terms})),this.selectSchoolOptions={dataSource:this.teacherData,displayExpr:"name",value:this.selectedSchool},this.selectTermOptions={displayExpr:"name",items:this.selectedSchoolTerms,value:this.selectedTerm},this.selectedSchool.subscribe((function(){var e=t.selectedSchool().terms().filter((function(e){return e.active()}));t.selectedTerm(e[0])})),this.selectedTerm.subscribe((function(){t.dataGrid.option("dataSource",t.selectedTerm().teachers()),t.dataGrid.refresh()})),this.recipientList){case n.RecipientList.STQuery:break;case n.RecipientList.Staff:this.loadFunction=function(e){return s.RecipientService.getStaff(t.getOptions(e))},(e=[]).push({caption:l.SM.translation.name(),dataField:"name"}),l.SM.jobTitleColumnVisible&&e.push({caption:l.SM.translation.jobTitle(),dataField:"jobTitle"}),l.SM.typeColumnVisible&&e.push({caption:l.SM.translation.type(),dataField:"type"}),e.push({dataField:"organizationName",caption:l.SM.translation.school()});break;case n.RecipientList.Parents:this.loadFunction=function(e){return s.RecipientService.getParents(t.getOptions(e))},e=[{caption:l.SM.translation.name(),dataField:"name",width:250},{caption:l.SM.translation.description(),dataField:"description"}];break;case n.RecipientList.Students:this.loadFunction=function(e){return s.RecipientService.getStudents(t.getOptions(e))},e=[{caption:l.SM.translation.name(),cellTemplate:function(e,t){var a,i=t.data;(null===(a=l.SM.editorVM)||void 0===a?void 0:a.isTeacher)&&i.associatedStudentId()?e[0].innerHTML="&nbsp;&nbsp;&nbsp;&nbsp; ".concat(i.relationship(),": ").concat(i.name()):e[0].innerHTML=i.name()},dataField:"name",width:250},{caption:l.SM.translation.description(),dataField:"description"}];break;case n.RecipientList.Classes:this.loadFunction=function(e){return s.RecipientService.getSections(t.getOptions(e))},e=[{dataField:"course",caption:l.SM.translation.course()},{dataField:"term",caption:l.SM.translation.term(),width:50},{dataField:"period",caption:l.SM.translation.period(),width:60},{dataField:"sectionId",caption:l.SM.translation.sectionId(),width:100},{dataField:"courseId",caption:l.SM.translation.courseId(),width:100},{dataField:"room",caption:l.SM.translation.room(),width:70},{dataField:"grade",caption:l.SM.translation.grade(),width:60},{dataField:"teacher",caption:l.SM.translation.teacher()},{dataField:"organizationName",caption:l.SM.translation.school()}];break;case n.RecipientList.Teachers:this.loadFunction=function(e){return s.RecipientService.getTeachers(t.getOptions(e))},e=[{dataField:"period",caption:l.SM.translation.period(),width:60},{dataField:"course",caption:l.SM.translation.course()},{dataField:"teacher",caption:l.SM.translation.teacher()},{dataField:"room",caption:l.SM.translation.room(),width:70}];break;case n.RecipientList.Counselors:this.loadFunction=function(e){return s.RecipientService.getCounselors(t.getOptions(e))},e=[{dataField:"name",caption:l.SM.translation.name()},{dataField:"organizationName",caption:l.SM.translation.school()}];break;case n.RecipientList.StudentGroups:this.loadFunction=function(e){return s.RecipientService.getStudentGroups(t.getOptions(e))},e=[{dataField:"staffName",caption:l.SM.translation.name()},{dataField:"groupName",caption:l.SM.translation.groupName()},{dataField:"typeValue",caption:l.SM.translation.jobTitle()},{dataField:"organizationName",caption:l.SM.translation.school()}];break;case n.RecipientList.MassStudentGroups:this.loadFunction=function(e){return s.RecipientService.getMassStudentGroups(t.getOptions(e))},e=[{dataField:"groupName",caption:l.SM.translation.groupName()},{dataField:"organizationName",caption:l.SM.translation.school()}];break;case n.RecipientList.UserGroups:this.loadFunction=function(e){return s.RecipientService.getUserGroups(t.getOptions(e))},e=[{dataField:"name",caption:l.SM.translation.name()},{dataField:"users",caption:l.SM.translation.users(),alignment:"left"}];break;case n.RecipientList.MassEmail:this.loadFunction=null,e=null;break;case n.RecipientList.ContactGroups:this.loadFunction=function(e){return s.RecipientService.getContactGroups(t.getOptions(e))},e=[{dataField:"name",caption:l.SM.translation.name()},{dataField:"description",caption:l.SM.translation.description()},{dataField:"organizationName",caption:l.SM.translation.school()}],l.SM.userType===n.UserType.Staff&&(e.push({alignment:"left",caption:l.SM.translation.public(),dataField:"isPublic",dataType:"boolean",lookup:{dataSource:[{value:!0,display:l.SM.translation.yes()},{value:!1,display:l.SM.translation.no()}],valueExpr:"value",displayExpr:"display"},width:80}),e.push({alignment:"center",headerCellTemplate:function(e,t){$("<span/>").addClass("row-command fa fa-pencil").appendTo(e),$("<span/>").addClass("row-command fa fa-times").appendTo(e)},cellTemplate:function(e,a){var i=a.data;i.isOwner()&&($("<span/>").addClass("row-command fa fa-pencil").attr("title",l.SM.translation.edit()).on("dxclick",(function(e){d.SMEditContactGroupViewModel.instantiate({onInitialized:function(e){e.show(i.id())},onDialogClosed:function(){t.refreshGrid()}}),e.stopPropagation()})).appendTo(e),$("<span/>").addClass("row-command fa fa-times").attr("title",l.SM.translation.delete()).on("dxclick",(function(e){r.SMDialog.showMessage(r.SMDialogButtons.YesNo,l.SM.translation.deleteContactGroup(),l.SM.translation.deleteContactGroupText(),(function(e){"Yes"===e&&s.RecipientService.deleteContactGroup(i.id()).then((function(){t.dataGrid.refresh()}))})),e.stopPropagation()})).appendTo(e))},width:60}))}this.dataGridOptions={allowColumnReordering:!1,columns:e,filterRow:{applyFilter:"auto",visible:!0},height:350,hoverStateEnabled:!0,onInitialized:function(e){t.dataGrid=e.component},onKeyDown:function(e){27===e.event.keyCode&&t.onExitGrid()},onRowPrepared:function(e){"data"!==e.rowType||t.rowActive(e.data)||e.rowElement.addClass("row-disabled")},onSelectionChanged:function(e){var a=e.component;if(a.getSelectedRowKeys().length>0){var i=a.getRowElement(a.getRowIndexByKey(a.getSelectedRowKeys()[0]));t.rowClicked({jQueryEvent:{pageX:i.offset().left,pageY:i.offset().top},data:a.getSelectedRowsData()[0]}),a.clearSelection()}},remoteOperations:!0,selection:{mode:"single"},scrolling:{mode:"infinite"},sorting:{mode:"none"}}},e.prototype.addMassEmail=function(e,t){var a=new n.Recipient,i=[];a.recipientList(this.recipientList),a.id(Date.now().toString()),a.groupUserTypes(this.getGroupUserType());for(var s=0,o=this.grades();s<o.length;s++){var d=o[s];d.selected()&&(a.grades.push(d.id()),i.push(d.description()))}a.groupUserTypes()!==n.GroupUserType.None?0!==a.grades().length?(a.contactDetails1((i.length>1?l.SM.translation.grades():l.SM.translation.grade())+": "+i.join(", ")),this.onSelect(a,t.pageX,t.pageY)):r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.grade(),l.SM.translation.mustSelectGrade()):r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient())},e.prototype.addStaffMassEmail=function(e,t){var a=new n.Recipient;a.recipientList(this.recipientList),a.id(Date.now().toString()),a.groupUserTypes(n.GroupUserType.Staff),a.contactDetails1(l.SM.translation.staffAllGrades()),this.onSelect(a,t.pageX,t.pageY)},e.prototype.rowActive=function(e){var t=!0;switch(this.recipientList){case n.RecipientList.UserGroups:t=e.users()>0;break;case n.RecipientList.Teachers:case n.RecipientList.Counselors:case n.RecipientList.StudentGroups:t=e.canReceive();break;case n.RecipientList.Parents:case n.RecipientList.Students:t=e.canReceive()||this.isMeeting()}return t},e.prototype.getOptions=function(e){var t,a,i=s.DBService.formatOptions(e);return(l.SM.userType===n.UserType.Staff&&this.recipientList!==n.RecipientList.UserGroups||this.recipientList===n.RecipientList.Staff||this.recipientList===n.RecipientList.StudentGroups||l.SM.userType===n.UserType.Student&&this.recipientList===n.RecipientList.Students&&l.SM.studentRecipientAccess!==n.StudentRecipientAccess.SchoolStaff)&&(null===(t=this.selectedOrganization())||void 0===t?void 0:t.id())&&$.extend(i,{orgFilter:this.selectedOrganization().id()}),l.SM.userType===n.UserType.Staff&&this.recipientList===n.RecipientList.ContactGroups&&$.extend(i,{ownerOnly:0===this.contactGroupScope}),(null===(a=null===l.SM||void 0===l.SM?void 0:l.SM.editorVM)||void 0===a?void 0:a.isTeacher)&&(this.recipientList!==n.RecipientList.Parents&&this.recipientList!==n.RecipientList.Students||!this.selectedSection()?this.recipientList===n.RecipientList.MassStudentGroups?$.extend(i,{ownerOnly:0===this.massStudentGroupScope()}):this.recipientList===n.RecipientList.Classes&&$.extend(i,{staffOnly:0===this.classScope()}):$.extend(i,{sectionId:this.selectedSection().id()})),i},e.prototype.rowClicked=function(e){var t,a,i=this.recipientList;if((null===(t=l.SM.editorVM)||void 0===t?void 0:t.isTeacher)&&i===n.RecipientList.Students&&e.data.associatedStudentId()&&(i=n.RecipientList.Parents),this.rowActive(e.data)){var s=new n.Recipient;switch(s.recipientList(i),i===n.RecipientList.UserGroups?(s.organizationYearId(null),s.organizationName(l.SM.translation.district())):(s.organizationYearId(e.data.organizationYearId()),s.organizationName(e.data.organizationName())),i){case n.RecipientList.STQuery:break;case n.RecipientList.Staff:s.id(e.data.id()),s.contactDetails1(e.data.name()),s.contactDetails2(e.data.jobTitleFormatted);break;case n.RecipientList.Parents:s.id(e.data.id()),s.contactDetails1(e.data.name()),e.data.associatedStudentName()?s.contactDetails2("Parent of ".concat(e.data.associatedStudentName())):s.contactDetails2("Parent"),s.associatedStudentId(e.data.associatedStudentId()),s.associatedStudentName(e.data.associatedStudentName());break;case n.RecipientList.Students:s.id(e.data.id()),s.contactDetails1(e.data.name()),s.contactDetails2("Student");break;case n.RecipientList.Classes:if(this.getGroupUserType()===n.GroupUserType.None)return void r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient());s.id(e.data.id()),s.contactDetails1("".concat(e.data.sectionId()," - ").concat(e.data.course())),s.section(e.data),s.groupUserTypes(this.getGroupUserType());break;case n.RecipientList.Teachers:s.id(e.data.id()),s.associatedSectionId(e.data.sectionId()),s.contactDetails1(e.data.teacher()),s.contactDetails2("".concat(e.data.period(),"-").concat(e.data.course()," Rm: ").concat(e.data.room()));break;case n.RecipientList.Counselors:s.id(e.data.id()),s.contactDetails1(e.data.name()),s.contactDetails2("Counselor");break;case n.RecipientList.StudentGroups:s.id(e.data.id()),s.associatedGroupId(e.data.groupId()),s.contactDetails1(e.data.staffName()),s.contactDetails2("".concat(e.data.groupName()," ").concat(e.data.jobTitle()||"")),s.groupUserTypes(this.getGroupUserType());break;case n.RecipientList.MassStudentGroups:if(this.getGroupUserType()===n.GroupUserType.None)return void r.SMDialog.showMessage(r.SMDialogButtons.Ok,l.SM.translation.addressTo(),l.SM.translation.mustSelectRecipient());s.id(e.data.id()),s.contactDetails1("".concat(e.data.groupName()," ").concat(e.data.jobTitle()||"")),s.groupUserTypes(this.getGroupUserType());break;case n.RecipientList.UserGroups:s.id(e.data.id()),s.contactDetails1(e.data.name()),s.contactDetails2("User Group"),s.groupUserTypes(n.GroupUserType.Staff);break;case n.RecipientList.ContactGroups:s.id(e.data.id()),s.contactDetails1(e.data.name()),s.contactDetails2("Contact List")}s&&this.onSelect(s,e.jQueryEvent.pageX,e.jQueryEvent.pageY)}else{var o="";switch(i){case n.RecipientList.UserGroups:o="This user group has no members.";break;case n.RecipientList.Counselors:o="This counselor has been excluded from ParentVUE & StudentVUE.";break;case n.RecipientList.StudentGroups:o="This Student Group does not have a staff member assigned or this staff has been excluded from ParentVUE & StudentVUE.";break;case n.RecipientList.Students:o=(null===(a=l.SM.editorVM)||void 0===a?void 0:a.isTeacher)?"This recipient does not have Synergy Mail, an SMTP address or permission to receive communication.":"This student does not have Synergy Mail or an SMTP address.";break;case n.RecipientList.Parents:o="This parent does not have Synergy Mail, an SMTP address or permission to receive communication.";break;case n.RecipientList.Teachers:o="This Teacher has been excluded from ParentVUE & StudentVUE.";break;default:o="This row has no recipients and cannot be selected."}r.SMDialog.showMessage(r.SMDialogButtons.Ok,"Recipient Unavailable",o)}},e.prototype.addAll=function(){var e=this,t=this.dataGrid.getDataSource().items().map((function(t){var a=new n.Recipient;return a.recipientList(e.recipientList),a.id(t.id()),a.contactDetails1(t.teacher()),a.contactDetails2("".concat(t.period(),"-").concat(t.course()," Rm: ").concat(t.room())),a.organizationYearId(t.organizationYearId()),a.organizationName(t.organizationName()),a}));this.onAddAll(t)},e.prototype.getGroupUserType=function(){return(this.addressToTeacher()?n.GroupUserType.Staff:0)|(this.addressToParents()?n.GroupUserType.Parent:0)|(this.addressToStudents()?n.GroupUserType.Student:0)},e}();t.SMRecipientSearchViewModel=u,t.SMRecipientSearchComponent={template:c,viewModel:u}},1953:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRecurrenceComponent=t.SMRecurrenceViewModel=void 0;var i=a(1032),n=a(6853),s=a(8076),o=a(2617),r=a(1426),l=function(){function e(e){var t=this;this.modalInitialized=!1,this.recurrence=this.getDefaultRecurrence(),this.recurrenceTypeOptions={displayExpr:"text",valueExpr:"value",layout:"horizontal",value:this.recurrence.recurType,items:[{value:1,text:"Daily"},{value:2,text:"Weekly"},{value:3,text:"Monthly"}]},this.monthDayTypeOptions={displayExpr:"text",valueExpr:"value",value:this.recurrence.monthDayType,dataSource:[{value:1,text:"First"},{value:2,text:"Second"},{value:3,text:"Third"},{value:4,text:"Fourth"},{value:5,text:"Last"}]},this.monthDayofWeek={displayExpr:"text",valueExpr:"value",value:this.recurrence.monthDayofWeek,items:[{value:1,text:"Monday"},{value:2,text:"Tuesday"},{value:3,text:"Wednesday"},{value:4,text:"Thursday"},{value:5,text:"Friday"},{value:6,text:"Saturday"},{value:0,text:"Sunday"}]},this.monthTypeOne=i.observable(0),this.monthTypeOneOptions={displayExpr:"text",valueExpr:"value",value:this.monthTypeOne,items:[{value:1,text:""}],onValueChanged:function(e){t.monthTypeTwo(0===t.monthTypeOne()?1:0),t.recurrence.monthType(0)}},this.monthTypeTwo=i.observable(0),this.monthTypeTwoOptions={displayExpr:"text",valueExpr:"value",value:this.monthTypeTwo,items:[{value:1,text:""}],onValueChanged:function(e){t.monthTypeOne(0===t.monthTypeTwo()?1:0),t.recurrence.monthType(1)}},this.dayOfMonthOptions={value:this.recurrence.monthDayofMonth,items:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},this.stopDateOptions={type:"date",value:this.recurrence.stopDate,displayFormat:"M/d/yyyy",onContentReady:function(e){t.stopDate=e.component},onValueChanged:function(e){var a=new Date(e.value);a.getFullYear()<1e3&&(a.setFullYear(a.getFullYear()+2e3),t.recurrence.stopDate(a),e.component._updateValue())}};var a=e.options;a.onInitialized(this),this.onUpdate=a.onUpdate}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-recurrence").remove();var t=$('<sm-recurrence params="options: recurrenceOptions"></sm-recurrence>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({recurrenceOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.modalInitialized?(o.SM.topWindow().$("#recurrenceDialog").modal("show"),this.load(e)):(o.SM.topWindow().$("#recurrenceDialog").stModal({allowClose:!1,customDialog:!0,init:function(a){t.dialog=a,t.load(e)},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.load=function(e){e||(e=this.getDefaultRecurrence()),this.recurrence.loadData(e.getData()),1===this.recurrence.monthType()?(this.monthTypeOne(0),this.monthTypeTwo(1)):(this.monthTypeOne(1),this.monthTypeTwo(0))},e.prototype.getDefaultRecurrence=function(){return new n.Recurrence({recurType:1,stopDate:new Date,weekCount:1,dayCount:1,monthType:0,monthDayType:1,monthDayofWeek:0,monthDayofMonth:1,monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!1,sunday:!1,january:!0,february:!0,march:!0,april:!0,may:!0,june:!0,july:!0,august:!0,september:!0,october:!0,november:!0,december:!0})},e.prototype.save=function(){if(1===this.recurrence.recurType()){if(isNaN(this.recurrence.dayCount()))return void s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Daily","You must enter a valid number of days.");this.recurrence.dayCount(Math.floor(this.recurrence.dayCount()))}else this.recurrence.dayCount(0);if(2===this.recurrence.recurType()){if(isNaN(this.recurrence.dayCount()))return void s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Weekly","You must enter a valid number of weeks.");this.recurrence.weekCount(Math.round(this.recurrence.weekCount()))}else this.recurrence.weekCount(0),this.recurrence.monday(!1),this.recurrence.tuesday(!1),this.recurrence.wednesday(!1),this.recurrence.thursday(!1),this.recurrence.friday(!1),this.recurrence.saturday(!1),this.recurrence.sunday(!1);if(null!==this.recurrence.stopDate()&&this.stopDate.option("isValid")){3!==this.recurrence.recurType()&&(this.recurrence.monthDayType(0),this.recurrence.monthDayofMonth(0),this.recurrence.monthDayType(0),this.recurrence.monthDayofWeek(0),this.recurrence.january(!1),this.recurrence.february(!1),this.recurrence.march(!1),this.recurrence.april(!1),this.recurrence.may(!1),this.recurrence.june(!1),this.recurrence.july(!1),this.recurrence.august(!1),this.recurrence.september(!1),this.recurrence.october(!1),this.recurrence.november(!1),this.recurrence.december(!1));var e=new n.Recurrence(this.recurrence.getData());this.onUpdate(e),this.close()}else s.SMDialog.showMessage(s.SMDialogButtons.Ok,"Stop On Date","You must enter a valid stop date.")},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMRecurrenceViewModel=l,t.SMRecurrenceComponent={template:r,viewModel:l}},1822:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMRootComponent=t.SMRootViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(6174),r=a(6885),l=a(8076),d=a(2617),c=a(1575),u=a(6326),p=a(5956),h=a(3658),m=a(8068),b=function(){function e(e){var t=this;this.folders=i.observableArray(),this.messageGridFocused=i.observable(!1),this.selectedFolder=i.observable(new n.Folder({folderType:d.SM.defaultFolderType})),this.selectedMessage=i.observable(null),this.selectedRows=i.observableArray(),this.searchVisible=i.observable(!1),this.availableLanguages=i.observableArray(),this.refreshingInbox=!1,this.translateQueue=i.observableArray(),this.nextIndex=0,this.unreadMessages=-1,this.showDeleted=i.observable(!1),this.signature=i.observable(new n.Signature),this.settingsData=i.observable(new n.Settings),this.initDraggable=function(){var e=this;d.SM.impersonated||$(".message-text").draggable({appendTo:"body",cursor:"pointer",cursorAt:{top:-10,left:-10},delay:100,helper:function(e){return $('<div class="ui-widget-header"></div>')},revert:!1,start:function(t,a){var i=$("#messageGrid tr").index(t.target)-1;e.searchVisible()&&i--;var n=e.messageGrid.getKeyByRowIndex(i);e.messageGrid.isRowSelected(n)||(e.messageGrid.clearSelection(),e.messageGrid.selectRowsByIndexes([i]));var s=e.messageGrid.getSelectedRowKeys().length>1?d.SM.translation.messages():d.SM.translation.message();a.helper.text("".concat(d.SM.translation.move()," ").concat(e.messageGrid.getSelectedRowKeys().length," ").concat(s))},zIndex:1e3})},this.onMessageLoaded=function(e,a){!e.isItDraft()||d.SM.impersonated||d.SM.auditing?(t.selectedMessage(e),$("#subjectText").focus()):(e.scheduleSendDate(null),d.SM.topWindow().SM.compose({editorType:p.SMEditorType.EditDraft},e)),a&&($(t.messageGrid.getRowElement(t.messageGrid.getRowIndexByKey(e.messagePersonId()))).removeClass("unread"),t.loadFolders())},d.SM.topWindow().SM.allowEmailAtDistrict=d.SM.allowEmailAtDistrict,d.SM.canViewMail&&(this.init(),d.SM.topWindow().SM.composeViewModel.then((function(e){e.setOnAction((function(){d.SM.rootWindow()&&(t.loadFolders(),t.refreshingInbox=!0,t.messageGrid.refresh())}))})),d.SM.SMApp().rootViewModel=this)}return e.prototype.refreshInbox=function(e){if(this.unreadMessages!==e){var t=this.folders().filter((function(e){return e.folderType()===n.FolderType.Inbox}))[0];t&&t.unreadMessages(e)}this.selectedFolder().folderType()===n.FolderType.Inbox&&this.unreadMessages!==e&&(this.unreadMessages=e,this.refreshingInbox=!0,this.messageGrid.refresh())},e.prototype.init=function(){var e=this;d.SM.internalCompose=!0,$(window).resize((function(){e.closeMenu()})),$("body").click((function(){e.closeMenu()})),c.SMEditFolderViewModel.instantiate({onInitialized:function(t){e.editFolder=t}}),u.SMEditSignatureViewModel.instantiate({onInitialized:function(t){e.editSignature=t}}),h.SMSettingsViewModel.instantiate({onInitialized:function(t){e.settings=t}}),this.archiveText=i.computed((function(){return e.selectedFolder()&&e.selectedFolder().folderType()===n.FolderType.Archive?e.numSelectedArchivedMessages()>0?d.SM.translation.delete():d.SM.translation.undelete():d.SM.translation.trash()})),this.numSelectedMessages=i.computed((function(){return e.selectedFolder().folderType()===n.FolderType.Archive||e.selectedFolder().folderType()===n.FolderType.SystemMessage||e.selectedFolder().folderType()===n.FolderType.Outbox?0:e.selectedRows().length})),this.numSelectedArchivedMessages=i.computed((function(){return e.selectedFolder().folderType()===n.FolderType.Archive?e.selectedRows().filter((function(e){return!e.deleted()})).length:0})),this.numSelectedDeletedMessages=i.computed((function(){return e.selectedFolder().folderType()===n.FolderType.Archive?e.selectedRows().filter((function(e){return e.deleted()})).length:0})),this.numSelectedSystemMessages=i.computed((function(){return e.selectedFolder().folderType()===n.FolderType.SystemMessage?e.selectedRows().filter((function(e){return!e.isSystemMessageDeletable()})).length>0?0:e.selectedRows().filter((function(e){return e.isSystemMessage()})).length:0})),this.dropFolders=i.computed((function(){return e.folders().filter((function(e){return e.folderType()!==n.FolderType.Sent&&e.folderType()!==n.FolderType.Outbox}))})),this.showDeleteButton=i.computed((function(){var t=e.numSelectedMessages(),a=e.numSelectedArchivedMessages(),i=e.numSelectedDeletedMessages(),n=e.numSelectedSystemMessages();return(t>0||a>0||i>0||n>0)&&!(a>0&&i>0)})),this.archiveIconClass=i.computed((function(){if(!e.selectedFolder()||e.selectedFolder().folderType()!==n.FolderType.Archive)return"fa fa-trash";var t=e.selectedRows().filter((function(e){return!e.deleted()})).length;return e.selectedRows().filter((function(e){return e.deleted()})).length===e.selectedRows().length?"fa fa-undo":t===e.selectedRows().length?"fa fa-trash":void 0})),o.MiscService.getSignature().then((function(t){e.signature(t)})),o.MiscService.getSettings().then((function(t){e.settingsData(t)})),this.messageGridOptions={columns:[{caption:d.SM.translation.status(),dataField:"messageStatusFormatted",visible:!1,allowFiltering:!1,width:150},{caption:d.SM.translation.status(),calculateDisplayValue:function(e){return e.deleted()?"Deleted":""},dataField:"deleted",dataType:"String",visible:!1,allowFiltering:!1,width:150},{headerCellTemplate:function(e,t){$('<span class="fa fa-paperclip"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.hasAttachments()&&$('<span class="fa fa-paperclip"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center"},{headerCellTemplate:function(e,t){$('<span class="fa fa-video"></span>').appendTo(e)},cellTemplate:function(e,t){t.data.isMeeting()&&$('<span class="fa fa-video"></span>').appendTo(e)},dataType:"string",width:35,alignment:"center"},{caption:d.SM.translation.from(),cellTemplate:function(e,t){var a=t.data;$("<span>".concat(a.from().contactDetails1(),"</span>")).appendTo(e)},calculateFilterExpression:function(e,t,a){return["from","contains",e]},cssClass:"message-name",dataType:"string",dataField:"from",filterOperations:["contains"],width:"20%"},{caption:d.SM.translation.to(),cellTemplate:function(e,t){var a=t.data,i=$.map(a.to(),(function(e){return e.contactDetails1()})).join(", ");$("<span>".concat(i,"</span>")).appendTo(e)},calculateFilterExpression:function(e,t,a){return["to","contains",e]},cssClass:"message-name",dataType:"string",dataField:"to",visible:!1,filterOperations:["contains"]},{caption:d.SM.translation.subject(),cellTemplate:function(e,t){var a=$('<div class="message-subject-container"></div>');t.data.translationComplete()?$('<span class="subject-text">'.concat(t.data.subject(),"</span>")).appendTo(a):($('<div id="waiting'.concat(t.data.messagePersonId(),'" class="translate-subject">\n                                ').concat(d.SM.translation.waitingToLoadTranslation(),"...</div>")).appendTo(a),$('<div id="subject'.concat(t.data.messagePersonId(),'"\n                                class="collapse translate-subject subject-text"><img src="images/ST/FormSubmit.gif" />\n                                ').concat(d.SM.translation.loadingTranslation(),"...</div>")).appendTo(a)),!1===t.data.shouldTranslate()&&$('<i class="fa-regular fa-align-slash" data-toggle="tooltip" data-placement="top" title="'.concat(d.SM.translation.senderDisabledTranslation(),'"}"></i>')).appendTo(a),$(a).appendTo(e)},cssClass:"message-subject",dataField:"subject",filterOperations:["contains"],width:"60%"},{caption:d.SM.translation.date(),cssClass:"message-date",dataField:"sendDateTimeFormattedLong",dataType:"date",format:"shortDate",calculateFilterExpression:function(e,t,a){return["sendDateTimeFormattedLong",t,e]},width:"30%",filterOperations:["=","<",">"]}],dataSource:this.getCustomStore(),filterRow:{applyFilter:"auto",visible:!1},onEditorPrepared:function(e){"sendDateTimeFormattedLong"===e.dataField&&"filterRow"===e.parentType&&(e.editorOptions.displayFormat="shortDate",e.editorElement.dxDateBox("instance").option("type","date"),e.editorElement.find(".dx-texteditor-input").attr("readonly",!0),e.editorElement.dxDateBox("instance").option("onValueChanged",(function(t){return e.setValue(t.value)})))},hoverStateEnabled:!0,noDataText:d.SM.translation.noMessages(),onContentReady:function(t){e.initDraggable(),e.selectedFolder().folderType()!==n.FolderType.SystemMessage&&e.startTranslation(),!e.refreshingInbox&&e.selectedMessage()&&e.selectIndexedMessage(e.nextIndex),d.SM.openMessagePersonId&&(e.selectMessage(new n.Message({messagePersonId:d.SM.openMessagePersonId,isItDraft:!1})),d.SM.openMessagePersonId=null),t.component.element().find(".dx-datagrid-nodata").html(d.SM.translation.noMessages())},onInitialized:function(t){e.messageGrid=t.component},onRowClick:function(t){e.selectMessage(t.data)},onRowPrepared:function(e){e.rowElement.addClass("message-text"),e.data&&!e.data.mailRead()&&e.rowElement.addClass("unread")},onSelectionChanged:function(t){e.selectedRows(t.selectedRowsData)},pager:{allowedPageSizes:[5,10,20],showInfo:!0,showPageSizeSelector:!0},paging:{enabled:!0,pageSize:10},remoteOperations:!0,selection:{mode:"multiple",deferred:!1},sorting:{mode:"none"}}},e.prototype.getCustomStore=function(){var e=this;return new r.DevExpress.data.CustomStore({key:"messagePersonId",load:function(t){var a=e.selectedFolder()?e.selectedFolder().folderType():n.FolderType.Inbox,i=e.selectedFolder()?e.selectedFolder().folderId():null;return e.translateQueue.removeAll(),t=s.DBService.formatOptions(t),s.MessageService.getMessages(a,i,d.SM.languageCode(),e.showDeleted(),t)},onLoaded:function(t){e.loadFolders()}})},e.prototype.auditIcon=function(){switch(d.SM.auditType){case n.UserType.Staff:return"images/ST_GENESIS/Staff_s.gif";case n.UserType.Parent:return"images/ST_GENESIS/Parent_s.gif";case n.UserType.Student:return"images/ST_GENESIS/Student_s.gif";default:return""}},e.prototype.startTranslation=function(){this.translateQueue.removeAll();for(var e=0,t=this.messageGrid.getVisibleRows();e<t.length;e++){var a=t[e].data;a.translationComplete()||this.translateQueue.push(a)}this.translateNext()},e.prototype.translateNext=function(){var e=this,t=this.translateQueue.shift();t&&($("#waiting".concat(t.messagePersonId())).hide(),$("#subject".concat(t.messagePersonId())).show(),s.MessageService.getTranslatedSubject(t.messagePersonId(),d.SM.languageCode()).then((function(a){$("#subject".concat(t.messagePersonId())).text(a).removeClass("translate-subject"),setTimeout((function(){e.translateNext()}),500)})))},e.prototype.loadFolders=function(){var e=this;s.FolderService.getFolders().then((function(t){e.folders.removeAll();for(var a=0,i=t;a<i.length;a++){var s=i[a];e.folders.push(s)}null===e.selectedFolder()&&e.selectFolder(e.folders()[0],!1);var o=t.filter((function(e){return e.folderType()===n.FolderType.Inbox}))[0];if(o){e.unreadMessages=o.unreadMessages();var r=t.filter((function(e){return e.folderType()===n.FolderType.SystemMessage}))[0];r&&(e.unreadMessages+=r.unreadMessages()),d.SM.updateUnreadMessagesBadge(e.unreadMessages)}e.createDropTargets()})).catch((function(e){d.SM.handleError(e,"Unable to get folders.")}))},e.prototype.createFolder=function(){var e=this;this.editFolder.create(null,(function(t){e.loadFolders(),e.messageGrid.getSelectedRowKeys().length>0&&e.moveMessages(t)}))},e.prototype.editFolderEx=function(e){var t=this;this.editFolder.edit(e,(function(){t.loadFolders()}))},e.prototype.deleteFolder=function(e){var t=this,a=d.SM.translation.format(d.SM.translation.deleteFolderText(),{folder:e.name()});l.SMDialog.showMessage(l.SMDialogButtons.YesNo,d.SM.translation.deleteFolderTitle(),a,(function(a){"Yes"===a&&s.FolderService.deleteFolder(e.folderId()).then((function(){t.loadFolders()})).catch((function(e){l.SMDialog.showMessage(l.SMDialogButtons.Ok,d.SM.translation.unableToDeleteFolderTitle(),d.SM.translation.unableToDeleteFolderText())}))}))},e.prototype.closeMenu=function(){$("#contactMenu").remove()},e.prototype.closeMessage=function(){this.selectedMessage(null)},e.prototype.goBack=function(){this.selectedMessage()?this.closeMessage():this.messageGridFocused()&&this.messageGridFocused(!1)},e.prototype.startCompose=function(){this.newMessage()},e.prototype.newMessage=function(e){d.SM.topWindow().SM.compose({editorType:p.SMEditorType.New},e)},e.prototype.reply=function(){if(!this.selectedMessage().noReply()){var e=new n.Message(this.selectedMessage().getData());s.MessageService.createMessage(n.CreateMessageType.Reply,e.messagePersonId(),d.SM.languageCode()).then((function(e){d.SM.topWindow().SM.compose({editorType:p.SMEditorType.EditDraft},e)}))}},e.prototype.replyAll=function(){if(!this.selectedMessage().noReply()){var e=new n.Message(this.selectedMessage().getData());s.MessageService.createMessage(n.CreateMessageType.ReplyAll,e.messagePersonId(),d.SM.languageCode()).then((function(e){d.SM.topWindow().SM.compose({editorType:p.SMEditorType.EditDraft},e)}))}},e.prototype.forward=function(){var e=new n.Message(this.selectedMessage().getData());s.MessageService.createMessage(n.CreateMessageType.Forward,e.messagePersonId(),d.SM.languageCode()).then((function(e){d.SM.topWindow().SM.compose({editorType:p.SMEditorType.EditDraft},e)}))},e.prototype.cancelScheduledSend=function(){var e=this;l.SMDialog.showMessage(l.SMDialogButtons.YesNo,"Cancel Scheduled Send","Canceling this scheduled send will return it to your drafts folder.\n            Are you sure you want to continue?",(function(t){if("Yes"===t){var a=new n.Message(e.selectedMessage().getData());s.MessageService.cancelScheduledSend(a.messagePersonId()).then((function(){e.closeMessage();var t=e.folders().filter((function(e){return e.folderType()===n.FolderType.Draft}))[0];e.selectFolder(t,!0)}))}}))},e.prototype.archiveSelectedMessages=function(){var e=this;if(this.selectedFolder().folderType()===n.FolderType.Archive||this.selectedFolder().folderType()===n.FolderType.SystemMessage)if(this.numSelectedDeletedMessages()>0)this.showLoadingForSelectedRows(),s.MessageService.undeleteMessages(this.messageGrid.getSelectedRowKeys()).then((function(){e.messageGrid.refresh(),e.loadFolders()}));else{var t=this.messageGrid.getSelectedRowKeys().length,a=t>1?d.SM.translation.messages():d.SM.translation.message(),i=d.SM.translation.format(d.SM.translation.deleteMessagesText(),{numMessages:"".concat(t," ").concat(a)});l.SMDialog.showMessage(l.SMDialogButtons.YesNo,d.SM.translation.format(d.SM.translation.deleteMessagesTitle(),{messages:a}),i,(function(t){"Yes"===t&&(e.showLoadingForSelectedRows(),s.MessageService.deleteMessages(e.selectedFolder().folderType(),e.messageGrid.getSelectedRowKeys()).then((function(){e.messageGrid.deselectAll(),e.messageGrid.refresh(),e.loadFolders()})))}))}else this.moveMessages(new n.Folder({folderType:n.FolderType.Archive})),this.closeMessage()},e.prototype.setRowLoading=function(e,t){var a=this.messageGrid.getRowIndexByKey(e),i=this.messageGrid.getRowElement(a),n=$(i).find(".dx-command-select"),s=$(i).find(".dx-select-checkbox"),o=$(n).find("img");o[0]||(o=n.append('<img src="images/ST/FormSubmit.gif" />')),t?(s.hide(),o.show()):(s.show(),o.hide())},e.prototype.showLoadingForSelectedRows=function(){for(var e=0,t=this.messageGrid.getSelectedRowKeys();e<t.length;e++){var a=t[e];this.setRowLoading(a,!0)}},e.prototype.showLoadingForVisibleRows=function(){for(var e=0,t=this.messageGrid.getVisibleRows();e<t.length;e++){var a=t[e];this.setRowLoading(a.key,!0)}},e.prototype.moveMessages=function(e){var t=this;this.showLoadingForSelectedRows(),this.closeMessage(),s.MessageService.moveMessages(this.messageGrid.getSelectedRowKeys(),e).then((function(){t.messageGrid.clearSelection(),t.messageGrid.getDataSource().reload(),t.loadFolders()}))},e.prototype.markAsRead=function(){d.SM.impersonated||d.SM.auditing||this.updateRead(this.messageGrid.getSelectedRowKeys(),!0)},e.prototype.markAsUnread=function(){d.SM.impersonated||d.SM.auditing||this.updateRead(this.messageGrid.getSelectedRowKeys(),!1)},e.prototype.updateAllRead=function(e,t){var a=this;d.SM.impersonated||d.SM.auditing||(this.showLoadingForVisibleRows(),s.MessageService.updateAllRead(e.folderType(),e.folderId(),t).then((function(){a.loadFolders(),a.messageGrid.refresh()})))},e.prototype.archiveAll=function(e){var t=this;d.SM.impersonated||d.SM.auditing||l.SMDialog.showMessage(l.SMDialogButtons.YesNo,d.SM.translation.deleteAllMessagesTitle(),d.SM.translation.deleteAllMessagesText(),(function(a){"Yes"===a&&(t.showLoadingForVisibleRows(),s.MessageService.archiveAll(e.folderType(),e.folderId()).then((function(){t.loadFolders(),t.messageGrid.refresh()})))}))},e.prototype.updateRead=function(e,t){var a=this;this.showLoadingForSelectedRows(),s.MessageService.updateRead(this.selectedFolder().folderType(),e,t).then((function(){for(var i=function(e){a.setRowLoading(e,!1);var i=a.messageGrid.getDataSource().items().filter((function(t){return t.messagePersonId()===e}))[0];if(i){i.mailRead(t);var n=$(a.messageGrid.getRowElement(a.messageGrid.getRowIndexByKey(e)));n&&(t?n.removeClass("unread"):n.addClass("unread"))}},n=0,s=e;n<s.length;n++)i(s[n]);a.loadFolders()}))},e.prototype.toggleSearch=function(){this.searchVisible(!this.searchVisible()),this.messageGrid.option("filterRow",{applyFilter:"auto",visible:this.searchVisible()})},e.prototype.createDropTargets=function(){var e=this;$(".folder").droppable({drop:function(t,a){var n=i.dataFor(t.target),s=e.messageGrid.getSelectedRowsData();$(t.target).css("cursor","pointer"),$(t.target).find("div").css("cursor","pointer"),n.folderId()===e.selectedFolder().folderId()&&n.folderType()===e.selectedFolder().folderType()||!e.moveAllowed(s,n)||e.moveMessages(n)},out:function(e,t){i.dataFor(e.target),$(e.target).css("cursor","pointer"),$(e.target).find("div").css("cursor","pointer")},over:function(t,a){var n=i.dataFor(t.target),s=e.messageGrid.getSelectedRowsData();e.moveAllowed(s,n)||($(t.target).css("cursor","no-drop"),$(t.target).find("div").css("cursor","no-drop"))},tolerance:"pointer"})},e.prototype.moveAllowed=function(e,t){var a=!0,i=t.folderType();if(this.selectedFolder().folderType()===n.FolderType.SystemMessage)return!1;if(this.numSelectedDeletedMessages()>0)return!1;for(var s=0,o=e;s<o.length;s++){var r=o[s].messageStatus();i===n.FolderType.Draft&&r!==n.MessageStatus.Draft&&r!==n.MessageStatus.WaitingToSend&&(a=!1),r===n.MessageStatus.Draft&&i!==n.FolderType.Archive&&i!==n.FolderType.Draft&&(a=!1),r===n.MessageStatus.WaitingToSend&&i!==n.FolderType.Draft&&(a=!1),r!==n.MessageStatus.Sending&&r!==n.MessageStatus.Error||(a=!1),i===n.FolderType.Outbox&&(a=!1)}return a},e.prototype.selectFolder=function(e,t){if(void 0===t&&(t=!0),this.selectedFolder(e),this.messageGridFocused(!0),t){switch(this.closeMessage(),this.messageGrid.columnOption("from","visible",!0),this.messageGrid.columnOption("to","visible",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!1),this.messageGrid.columnOption("deleted","visible",!1),e.folderType()){case n.FolderType.Sent:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!0),this.messageGrid.columnOption("messageStatusFormatted","visible",!1);break;case n.FolderType.Draft:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!1);break;case n.FolderType.Outbox:this.messageGrid.columnOption("from","visible",!1),this.messageGrid.columnOption("to","visible",!0),this.messageGrid.columnOption("to","allowFiltering",!1),this.messageGrid.columnOption("messageStatusFormatted","visible",!0);break;case n.FolderType.Archive:this.messageGrid.columnOption("deleted","visible",this.showDeleted())}this.messageGrid.clearFilter(),this.messageGrid.clearSelection(),this.messageGrid.refresh()}},e.prototype.isFolderSelected=function(e){return!!this.selectedFolder()&&(this.selectedFolder().folderType()===n.FolderType.UserFolder?this.selectedFolder().folderId()===e.folderId():this.selectedFolder().folderType()===e.folderType())},e.prototype.showContextMenuIcon=function(e,t){d.SM.impersonated||$(e).find(".dropdown-toggle").show()},e.prototype.hideContextMenuIcon=function(e){d.SM.accessibilityMode||$(e).find(".dropdown-toggle").hide()},e.prototype.selectMessage=function(e){var t=this;this.messageGrid.selectRows([e.messagePersonId()],!1);var a=!d.SM.impersonated&&!e.isItDraft()&&!e.mailRead()&&e.messageStatus()!==n.MessageStatus.Scheduled;this.showLoadingForSelectedRows(),s.MessageService.getMessage(e.messagePersonId(),a,d.SM.languageCode(),e.isSystemMessage()).then((function(i){t.setRowLoading(e.messagePersonId(),!1),t.onMessageLoaded(i,a)}))},e.prototype.selectIndexedMessage=function(e){var t=this,a=this.messageGrid.getKeyByRowIndex(e);this.messageGrid.byKey(a).done((function(e){t.selectMessage(e)}))},e.prototype.previousMessage=function(){var e=this.messageGrid.getSelectedRowKeys()[0],t=this.messageGrid.getRowIndexByKey(e)-1;if(t<0){if(0===this.messageGrid.pageIndex())return;this.nextIndex=this.messageGrid.pageSize()-1,this.messageGrid.pageIndex(this.messageGrid.pageIndex()-1)}else this.selectIndexedMessage(t)},e.prototype.nextMessage=function(){var e=this.messageGrid.getSelectedRowKeys()[0],t=this.messageGrid.getRowIndexByKey(e)+1;if(t>this.messageGrid.pageSize()-1){if(this.messageGrid.pageIndex()>=this.messageGrid.pageCount()-1)return;this.nextIndex=0,this.messageGrid.pageIndex(this.messageGrid.pageIndex()+1)}else this.selectIndexedMessage(t)},e.prototype.editSignatures=function(){var e=this;d.SM.impersonated||d.SM.auditing||this.editSignature.show(this.signature(),(function(t){e.signature(t)}))},e.prototype.editSettings=function(){d.SM.impersonated||d.SM.auditing||this.settings.show()},e.prototype.toggleDeletedMessages=function(){this.showDeleted(!this.showDeleted()),this.messageGrid.columnOption("deleted","visible",this.showDeleted()),this.messageGrid.getDataSource().reload()},e}();t.SMRootViewModel=b,t.SMRootComponent={template:m,viewModel:b}},6197:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMScheduleSendComponent=t.SMScheduleSendViewModel=void 0;var i=a(1032),n=a(2617),s=a(2467),o=a(8076),r=function(){function e(e){var t=this;this.title=i.observable(),this.modalInitialized=!1,this.requiredFieldValidator={validationRules:[{type:"required"}]},this.sendDate=i.observable(new Date),this.sendDateOptions={type:"datetime",value:this.sendDate,displayFormat:"M/d/yyyy h:mm a",onContentReady:function(e){t.sendDateControl=e.component},onValueChanged:function(e){e.value.getFullYear()<1e3&&(e.value.setFullYear(e.value.getFullYear()+2e3),e.component._updateValue())},onOpened:function(e){n.SM.$("body").append($(".dx-datebox-wrapper"))}},e.options.onInitialized(this)}return e.instantiate=function(e){n.SM.$(n.SM.topWindow().document.body).find("sm-schedule-send").remove();var t=n.SM.$('<sm-schedule-send params="options: scheduleSendOptions"></sm-schedule-send>');n.SM.$(n.SM.topWindow().document.body).append(t),i.applyBindings({scheduleSendOptions:e},t[0])},e.prototype.create=function(e){this.onDismissed=e,this.show()},e.prototype.show=function(){var e=this,t=new Date;this.sendDate(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,8)),this.modalInitialized?n.SM.topWindow().$("#scheduleSendDialog").modal("show"):(n.SM.topWindow().$("#scheduleSendDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.hide=function(){this.dialog.modal("hide")},e.prototype.save=function(){this.sendDateControl.option("isValid")?this.sendDate()<new Date?o.SMDialog.showMessage(o.SMDialogButtons.Ok,"Send Date/Time","You must enter a date/time in the future."):(this.hide(),this.onDismissed&&this.onDismissed(this.sendDate())):o.SMDialog.showMessage(o.SMDialogButtons.Ok,"Send Date/Time","You must enter a valid date/time.")},e}();t.SMScheduleSendViewModel=r,t.SMScheduleSendComponent={template:s,viewModel:r}},9568:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMSelectAddressesComponent=t.SMSelectAddressesViewModel=void 0;var i=a(1032),n=a(2617),s=a(9061),o=a(505),r=function(){function e(e){this.to=i.observableArray(),this.cc=i.observableArray(),this.bcc=i.observableArray(),this.addRecipient=i.observable(),this.modalInitialized=!1;var t=e&&e.options;this.onSubmit=t&&t.onSubmit,this.init(),t&&t.onInitialized&&t.onInitialized(this)}return e.prototype.open=function(e){return this.onSubmit=e,this.modalInitialized?$("#selectAddressesDialog").modal("show"):($("#selectAddressesDialog").stModal({allowClose:!1,customDialog:!0,keepOnHide:!0}),this.modalInitialized=!0),this},e.prototype.close=function(){$("#selectAddressesDialog").modal("hide")},e.prototype.submit=function(){this.onSubmit&&this.onSubmit(this.to().slice(0),this.cc().slice(0),this.bcc().slice(0)),this.close()},e.prototype.init=function(){var e=this;this.addRecipientOptions={id:"selectAddressesAddRecipients",onInitialized:function(t){e.addRecipient(t)}},s.SMAddRecipientViewModel.instantiate(this.addRecipientOptions),this.toRecipientListOptions={addRecipient:this.addRecipient,recipients:this.to,title:n.SM.translation.to(),isMeeting:!1},this.ccRecipientListOptions={addRecipient:this.addRecipient,recipients:this.cc,title:n.SM.translation.cc(),isMeeting:!1},this.bccRecipientListOptions={addRecipient:this.addRecipient,recipients:this.bcc,title:n.SM.translation.bcc(),isMeeting:!1}},e}();t.SMSelectAddressesViewModel=r,t.SMSelectAddressesComponent={template:o,viewModel:r}},3658:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMSettingsComponent=t.SMSettingsViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(2617),r=a(5125),l=function(){function e(e){this.modalInitialized=!1,this.settings=i.observable(new n.Settings),e.options.onInitialized(this)}return e.instantiate=function(e){$(o.SM.topWindow().document.body).find("sm-settings").remove();var t=$('<sm-settings params="options: settingsOptions"></sm-settings>');$(o.SM.topWindow().document.body).append(t),i.applyBindings({settingsOptions:e},t[0])},e.prototype.show=function(){var e=this;this.modalInitialized?(o.SM.topWindow().$("#settingsDialog").modal("show"),this.load()):(o.SM.topWindow().$("#settingsDialog").stModal({allowClose:!1,customDialog:!0,init:function(t){e.dialog=t,e.load()},keepOnHide:!0}),this.modalInitialized=!0)},e.prototype.load=function(){var e=this;s.MiscService.getSettings().then((function(t){e.settings(t)}))},e.prototype.save=function(){var e=this;s.MiscService.updateSettings(this.settings().enableForwarding()).then((function(){e.close()}))},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMSettingsViewModel=l,t.SMSettingsComponent={template:r,viewModel:l}},2999:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMTokenPopoverComponent=t.SMTokenPopoverViewModel=void 0;var i=a(1032),n=a(6853),s=a(2617),o=a(2812),r=function(){function e(e){var t=e.options;this.element=t.element,this.editor=t.editor,this.button=t.button,this.init()}return e.instantiate=function(e){var t=$('<sm-token-popover params="options: tokenPopoverOptions"></sm-token-popover>');$(s.SM.topWindow().document.body).append(t),e=$.extend(e,{element:t[0]}),i.applyBindings({tokenPopoverOptions:e},t[0])},e.prototype.init=function(){var e=this;this.popoverSettings={deferRendering:!1,onContentReady:function(t){e.popover=t.component,setTimeout((function(){e.popover.show($(e.button))}),0)},onHidden:function(t){e.element.remove()},shading:!1,visible:i.observable(!1),width:275},this.listSettings={dataSource:[new n.TokenValue({token:"<<he>>",value:"He/she"}),new n.TokenValue({token:"<<him>>",value:"Him/her"}),new n.TokenValue({token:"<<his>>",value:"His/her"}),new n.TokenValue({token:"<<hers>>",value:"His/hers"}),new n.TokenValue({token:"<<name>>",value:"Name"}),new n.TokenValue({token:"<<fullname>>",value:"Full Name (F L)"}),new n.TokenValue({token:"<<fullnameFML>>",value:"Full Name (FML)"})],height:"100%",onContentReady:function(t){e.list=t.component},onItemClick:function(t){var a=t.itemData;e.editor.model.change((function(t){t.insertText(a.token(),e.editor.model.document.selection.getFirstPosition())})),e.popover.hide()}}},e}();t.SMTokenPopoverViewModel=r,t.SMTokenPopoverComponent={template:o,viewModel:r}},6438:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMViewMessageComponent=t.SMViewMessageViewModel=void 0;var i=a(1032),n=a(6853),s=a(3720),o=a(8076),r=a(2617),l=a(5956),d=a(9806),c=function(){function e(e){this.message=i.observable(),this.modalInitialized=!1;var t=e.options;t&&(this.allowActions=t.allowActions,this.onDelete=t.onDelete,this.onSMTPReply=t.onSMTPReply),t&&t.onInitialized&&t.onInitialized(this)}return e.instantiate=function(e){r.SM.topWindow().$("#viewMessageDialog").modal("hide"),$(r.SM.topWindow().document.body).find("sm-view-message").remove();var t=$('<sm-view-message params="options: viewMessageOptions"></sm-view-message>');$(r.SM.topWindow().document.body).append(t),i.applyBindings({viewMessageOptions:e},t[0])},e.prototype.show=function(e){var t=this;this.message(e),this.modalInitialized?r.SM.topWindow().$("#viewMessageDialog").modal("show"):(r.SM.topWindow().$("#viewMessageDialog").stModal({allowClose:!1,customDialog:!0,init:function(e){t.dialog=e},keepOnHide:!0,focusPrimaryButton:!1}),this.modalInitialized=!0)},e.prototype.archiveMessage=function(){var e=this;if(this.message().isSystemMessage()){var t=r.SM.translation.message(),a=r.SM.translation.format(r.SM.translation.deleteMessagesText(),{numMessages:"".concat(1," ").concat(t)});o.SMDialog.showMessage(o.SMDialogButtons.YesNo,r.SM.translation.format(r.SM.translation.deleteMessagesTitle(),{messages:t}),a,(function(t){"Yes"===t&&(s.MessageService.deleteMessages(n.FolderType.SystemMessage,[e.message().messageId()]).then((function(){e.onDelete&&e.onDelete()})),e.close())}))}else s.MessageService.moveMessages([this.message().messagePersonId()],new n.Folder({folderType:n.FolderType.Archive})).then((function(){e.onDelete&&e.onDelete()})),this.close()},e.prototype.smtpReply=function(){this.onSMTPReply&&this.onSMTPReply()},e.prototype.reply=function(){var e=new n.Message(this.message().getData());s.MessageService.createMessage(n.CreateMessageType.Reply,e.messagePersonId(),r.SM.languageCode()).then((function(e){r.SM.topWindow().SM.compose({editorType:l.SMEditorType.EditDraft},e)})),this.close()},e.prototype.replyAll=function(){var e=new n.Message(this.message().getData());s.MessageService.createMessage(n.CreateMessageType.ReplyAll,e.messagePersonId(),r.SM.languageCode()).then((function(e){r.SM.topWindow().SM.compose({editorType:l.SMEditorType.EditDraft},e)})),this.close()},e.prototype.forward=function(){var e=new n.Message(this.message().getData());s.MessageService.createMessage(n.CreateMessageType.Forward,e.messagePersonId(),r.SM.languageCode()).then((function(e){r.SM.topWindow().SM.compose({editorType:l.SMEditorType.EditDraft},e)})),this.close()},e.prototype.close=function(){this.dialog.modal("hide")},e}();t.SMViewMessageViewModel=c,t.SMViewMessageComponent={template:d,viewModel:c}},971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxResponse=void 0;t.AjaxResponse=function(e){this.successful=e.Result.successful,this.errorMessage=e.Result.errorMessage,this.data=e.Result.data}},4452:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attachment=void 0;var i=a(1032),n=a(2390),s=a(6853),o=function(){function e(e){var t=this;this.attachmentId=i.observable(),this.name=i.observable(),this.attachmentType=i.observable(s.AttachmentType.File),this.link=i.observable(),this.iconPath=i.observable(),this.surveyCollectorGU=i.observable(),this.queryXml=i.observable(),this.size=i.observable(),this.progress=i.observable(0),this.file=i.observable(),this.status=i.observable(s.AttachmentStatus.Complete),this.viewGU=i.observable(),this.tabGU=i.observable(),this.identityGU=i.observable(),e&&this.loadData(e),this.canCancel=i.pureComputed((function(){return!(t.status()===s.AttachmentStatus.Uploading&&void 0===t.file())})),this.labelStatusClass=i.pureComputed((function(){var e="";switch(t.status()){case s.AttachmentStatus.Complete:e="label-primary";break;case s.AttachmentStatus.WaitingToUpload:e="label-default";break;case s.AttachmentStatus.Uploading:e="label-warning";break;case s.AttachmentStatus.UploadFailed:e="label-danger"}return"label attachment-label attachment "+e})),this.iconStatusClass=i.pureComputed((function(){var e="";switch(t.status()){case s.AttachmentStatus.UploadFailed:e="fa fa-exclamation-circle";break;case s.AttachmentStatus.Complete:e="fa fa-paperclip";break;case s.AttachmentStatus.WaitingToUpload:e="fa fa-hourglass-o"}return e}))}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e.prototype.progressText=function(){return this.canCancel()?"".concat(Math.round(this.progress()),"%"):""},e}();t.Attachment=o},4611:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactCategory=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.ContactCategory=s},8721:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactGroup=void 0;var i=a(1032),n=a(2390),s=a(6853),o=function(){function e(e){this.id=i.observable(),this.organizationYearId=i.observable(),this.ownerRecipient=i.observable(),this.name=i.observable(),this.description=i.observable(),this.isOwner=i.observable(),this.isPublic=i.observable(),this.organizationName=i.observable(),this.recipients=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={recipients:{create:function(e){return new s.Recipient(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),t,this)},Object.defineProperty(e.prototype,"scopeDesc",{get:function(){return this.isPublic()?"Public":"Private"},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return n.toJS(this)},e}();t.ContactGroup=o},7428:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counselor=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.canReceive=i.observable(),this.noContactReason=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Counselor=s},6605:(e,t)=>{"use strict";var a,i,n,s,o,r,l,d,c,u,p,h,m,b,g,S,v,f,M,y,T;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageRelationship=t.ContactLogOption=t.CreateMessageType=t.ContactListSecurity=t.StudentRecipientAccess=t.ParentRecipientAccess=t.TeacherStudentAccess=t.StaffRecipientAccess=t.AttachmentType=t.AttachmentStatus=t.FromType=t.GroupUserType=t.RecipientType=t.RecipientList=t.StaffType=t.UserType=t.CurrentWebPortal=t.FolderType=t.MessageStatus=t.CommunicationType=t.SynergyMailMode=void 0,(T=t.SynergyMailMode||(t.SynergyMailMode={}))[T.Off=0]="Off",T[T.OffWithEnhancments=1]="OffWithEnhancments",T[T.On=2]="On",(y=t.CommunicationType||(t.CommunicationType={}))[y.Email=0]="Email",y[y.Text=1]="Text",y[y.Voice=2]="Voice",y[y.Social=3]="Social",(M=t.MessageStatus||(t.MessageStatus={}))[M.Draft=0]="Draft",M[M.WaitingToSend=1]="WaitingToSend",M[M.WaitingToSendOutsideEmail=2]="WaitingToSendOutsideEmail",M[M.Sending=3]="Sending",M[M.Sent=4]="Sent",M[M.Error=5]="Error",M[M.Scheduled=6]="Scheduled",(f=t.FolderType||(t.FolderType={}))[f.Inbox=0]="Inbox",f[f.Sent=1]="Sent",f[f.Draft=2]="Draft",f[f.Archive=3]="Archive",f[f.Outbox=4]="Outbox",f[f.SystemMessage=5]="SystemMessage",f[f.UserFolder=6]="UserFolder",(v=t.CurrentWebPortal||(t.CurrentWebPortal={}))[v.Synergy=0]="Synergy",v[v.TeacherVUE=1]="TeacherVUE",v[v.ParentVUE=2]="ParentVUE",v[v.StudentVUE=3]="StudentVUE",(S=t.UserType||(t.UserType={}))[S.Staff=0]="Staff",S[S.Parent=1]="Parent",S[S.Student=2]="Student",(g=t.StaffType||(t.StaffType={}))[g.School=0]="School",g[g.District=1]="District",(b=t.RecipientList||(t.RecipientList={}))[b.Staff=0]="Staff",b[b.Parents=1]="Parents",b[b.Students=2]="Students",b[b.Classes=3]="Classes",b[b.StudentGroups=4]="StudentGroups",b[b.MassStudentGroups=5]="MassStudentGroups",b[b.Teachers=6]="Teachers",b[b.Counselors=7]="Counselors",b[b.UserGroups=8]="UserGroups",b[b.MassEmail=9]="MassEmail",b[b.ContactGroups=10]="ContactGroups",b[b.External=11]="External",b[b.STQuery=12]="STQuery",(m=t.RecipientType||(t.RecipientType={}))[m.To=0]="To",m[m.Cc=1]="Cc",m[m.Bcc=2]="Bcc",(h=t.GroupUserType||(t.GroupUserType={}))[h.None=0]="None",h[h.Staff=1]="Staff",h[h.Parent=2]="Parent",h[h.Student=4]="Student",(p=t.FromType||(t.FromType={}))[p.StudentGroup=0]="StudentGroup",p[p.Role=1]="Role",p[p.Teacher=2]="Teacher",p[p.Staff=3]="Staff",p[p.NoReply=4]="NoReply",(u=t.AttachmentStatus||(t.AttachmentStatus={}))[u.Complete=0]="Complete",u[u.WaitingToUpload=1]="WaitingToUpload",u[u.Uploading=2]="Uploading",u[u.UploadFailed=3]="UploadFailed",(c=t.AttachmentType||(t.AttachmentType={}))[c.File=0]="File",c[c.Link=1]="Link",c[c.Survey=2]="Survey",c[c.STQuery=3]="STQuery",(d=t.StaffRecipientAccess||(t.StaffRecipientAccess={}))[d.Focus=0]="Focus",d[d.District=1]="District",(l=t.TeacherStudentAccess||(t.TeacherStudentAccess={}))[l.All=0]="All",l[l.Own=1]="Own",(r=t.ParentRecipientAccess||(t.ParentRecipientAccess={}))[r.SchoolStaff=0]="SchoolStaff",r[r.DistrictStaff=1]="DistrictStaff",(o=t.StudentRecipientAccess||(t.StudentRecipientAccess={}))[o.SchoolStaff=0]="SchoolStaff",o[o.SchoolStaffSchoolStudents=1]="SchoolStaffSchoolStudents",o[o.SchoolStaffDistrictStudents=2]="SchoolStaffDistrictStudents",(s=t.ContactListSecurity||(t.ContactListSecurity={}))[s.Private=0]="Private",s[s.PublicSchool=1]="PublicSchool",s[s.PublicDistrict=2]="PublicDistrict",(n=t.CreateMessageType||(t.CreateMessageType={}))[n.Reply=0]="Reply",n[n.ReplyAll=1]="ReplyAll",n[n.Forward=2]="Forward",n[n.MeetingUpdate=3]="MeetingUpdate",(i=t.ContactLogOption||(t.ContactLogOption={}))[i.NoLogging=0]="NoLogging",i[i.StaffChoice=1]="StaffChoice",i[i.AlwaysLog=2]="AlwaysLog",(a=t.MessageRelationship||(t.MessageRelationship={}))[a.To=0]="To",a[a.From=1]="From",a[a.ToOrFrom=2]="ToOrFrom"},4186:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Folder=void 0;var i=a(1032),n=a(2390),s=a(2617),o=a(6605),r=function(){function e(e){this.folderId=i.observable(),this.folderType=i.observable(),this.name=i.observable(),this.unreadMessages=i.observable(),this.icon=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e.prototype.getFolderName=function(){switch(this.folderType()){case o.FolderType.Inbox:return s.SM.translation.inbox;case o.FolderType.Sent:return s.SM.translation.sent;case o.FolderType.Draft:return s.SM.translation.drafts;case o.FolderType.Archive:return s.SM.translation.trash;case o.FolderType.Outbox:return s.SM.translation.outbox;case o.FolderType.SystemMessage:return s.SM.translation.systemMessages;default:return this.name()}},e.prototype.getIcon=function(){switch(this.folderType()){case o.FolderType.Inbox:return"folder-icon fa-light fa-inbox";case o.FolderType.Sent:return"folder-icon fa-light fa-paper-plane";case o.FolderType.Draft:return"folder-icon fa-light fa-pencil";case o.FolderType.Archive:return"folder-icon fa-light fa-trash";case o.FolderType.Outbox:return"folder-icon fa-light fa-folder-open";case o.FolderType.SystemMessage:return"folder-icon fa-light fa-bell";default:return"folder-icon fa-light fa-folder-open"}},e}();t.Folder=r},7813:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FromOption=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.fromType=i.observable(),this.id=i.observable(),this.description=i.observable(),this.details2=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.FromOption=s},6853:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,n)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||i(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),n(a(971),t),n(a(4452),t),n(a(7428),t),n(a(4611),t),n(a(8721),t),n(a(6605),t),n(a(4186),t),n(a(7813),t),n(a(3553),t),n(a(4341),t),n(a(3153),t),n(a(9546),t),n(a(7038),t),n(a(5268),t),n(a(9119),t),n(a(5139),t),n(a(6228),t),n(a(7075),t),n(a(9577),t),n(a(20),t),n(a(5460),t),n(a(5700),t),n(a(2161),t),n(a(6862),t),n(a(5444),t),n(a(7392),t),n(a(989),t),n(a(7200),t),n(a(7050),t),n(a(7788),t),n(a(877),t)},3553:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Language=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.code=i.observable(),this.description=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Language=s},4341:function(e,t,a){"use strict";var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var a,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var s=a(1032),o=a(2390),r=a(3720),l=a(4452),d=a(6605),c=a(6853),u=a(5268),p=a(7075),h=a(140),m=function(){function e(e){var t=this;this.messageId=s.observable(),this.messagePersonId=s.observable(),this.fromOption=s.observable(new c.FromOption),this.from=s.observable(new u.Recipient),this.noReply=s.observable(),this.to=s.observableArray(),this.cc=s.observableArray(),this.bcc=s.observableArray(),this.sendDateTime=s.observable(),this.sendDateTimeFormattedShort=s.observable(),this.sendDateTimeFormattedLong=s.observable(),this.subject=s.observable(),this.isMeeting=s.observable(),this.vidConfId=s.observable(),this.surveyGU=s.observable(),this.surveyInfo=s.observable(new h.SurveyInfo),this.messageText=s.observable(),this.smsMessage=s.observable(),this.voiceText=s.observable(),this.socialText=s.observable(),this.sendEmail=s.observable(),this.sendSMS=s.observable(),this.sendVoice=s.observable(),this.sendSocial=s.observable(),this.priority=s.observable(),this.messageStatus=s.observable(),this.isItDraft=s.observable(),this.mailRead=s.observable(),this.deleted=s.observable(),this.translated=s.observable(),this.translationComplete=s.observable(),this.translationError=s.observable(),this.isSender=s.observable(),this.isSystemMessage=s.observable(),this.isSystemMessageDeletable=s.observable(),this.hasAttachments=s.observable(),this.originalLanguageCode=s.observable(),this.originalLanguageDescription=s.observable(),this.originalSubjectText=s.observable(),this.originalMessageText=s.observable(),this.attachments=s.observableArray(),this.personCount=s.observable(),this.readCount=s.observable(),this.updateContactLog=s.observable(),this.contactCategory=s.observable(),this.meetingStartDate=s.observable(),this.meetingEndDate=s.observable(),this.canJoinMeeting=s.observable(),this.recurrence=s.observable(),this.recurrenceText=s.observable(),this.bccSender=s.observable(!1),this.scheduleSendDate=s.observable(),this.shouldTranslate=s.observable(!0),e&&this.loadData(e),this.fileAttachments=s.pureComputed((function(){return t.attachments()?t.attachments().filter((function(e){return e.attachmentType()===d.AttachmentType.File})):[]})),this.linkAttachments=s.pureComputed((function(){return t.attachments()?t.attachments().filter((function(e){return e.attachmentType()===d.AttachmentType.Link||e.attachmentType()===d.AttachmentType.STQuery})):[]})),this.surveyAttachment=s.pureComputed((function(){return(t.attachments()||[]).filter((function(e){return e.attachmentType()===d.AttachmentType.Survey}))[0]})),this.isSurvey=s.pureComputed((function(){return!!t.surveyAttachment()}))}return e.prototype.addSTQueryRecipients=function(){var e=this,t=this,a=window;a&&a.ST&&a.ST.OpenViewInDialog&&(a.ST.OpenViewInDialog("50AA41AC-0156-4A21-820B-9E0C5A319D43",null,{REV_RENDER:{SERVER_STATE:{D:[{"@K":"ANALYTICS_QUERY_TEXT","@V":""},{"@K":"FROM_ANALYTICS","@V":"Y"}]}}}),$.extend(a.Namespace("Actions.Analytics",a.ST),{SetSTQueryText:function(a){return i(e,void 0,void 0,(function(){var e,i;return n(this,(function(n){switch(n.label){case 0:return[4,r.RecipientService.validateSTQuery(a&&a.STQueryText["#cdata"])];case 1:return n.sent()&&(e=t.to().filter((function(e){return e.recipientList()===d.RecipientList.STQuery})).length,i=new u.Recipient({id:"ST_QUERY_".concat(e),recipientList:d.RecipientList.STQuery,groupUserTypes:d.GroupUserType.Parent|d.GroupUserType.Staff|d.GroupUserType.Student,contactDetails1:"Synergy Query",contactDetails2:"",content:a.STQueryText["#cdata"]}),t.bcc.push(i)),[2]}}))}))}}))},Object.defineProperty(e.prototype,"messageStatusFormatted",{get:function(){switch(this.messageStatus()){case c.MessageStatus.WaitingToSend:return"Waiting to Send";case c.MessageStatus.WaitingToSendOutsideEmail:return"Waiting to Send Outbound";case c.MessageStatus.Sending:return"Sending";case c.MessageStatus.Error:return"Error";case c.MessageStatus.Scheduled:return"Scheduled"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageTextFormatted",{get:function(){var e=$("<div>").append(this.messageText());return e.find("a").attr("target","_blank"),e.html()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasParentRecipients",{get:function(){var e=this.to().concat(this.cc()).concat(this.bcc());return e.filter((function(e){return e.recipientList()===d.RecipientList.Parents})).length>0||e.filter((function(e){return(e.groupUserTypes()&d.GroupUserType.Parent)===d.GroupUserType.Parent})).length>0},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){var t=this,a={attachments:{create:function(e){return new l.Attachment(e.data)}},bcc:{create:function(e){return new u.Recipient(e.data)}},cc:{create:function(e){return new u.Recipient(e.data)}},from:{create:function(e){return s.observable(new u.Recipient(e.data))}},fromOption:{create:function(e){return s.observable(new c.FromOption(e.data))}},to:{create:function(e){return new u.Recipient(e.data)}},recurrence:{update:function(e){return e.data?new p.Recurrence(e.data):null}},meetingStartDate:{update:function(e){return new Date(e.data)}},meetingEndDate:{update:function(e){return new Date(e.data)}},scheduleSendDate:{update:function(e){return e.data?new Date(e.data):null}},surveyInfo:{update:function(e){return new h.SurveyInfo(t.messageStatus(),e.data)}}};o.fromJS(JSON.parse(JSON.stringify(e)),a,this)},e.prototype.getData=function(){return o.toJS(this)},e}();t.Message=m},9546:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationGrade=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.description=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.OrganizationGrade=s},3153:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Organization=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.currentSchool=i.observable(),this.parentVUEEnabled=i.observable(),this.studentVUEEnabled=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Organization=s},7038:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parent=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.associatedStudentId=i.observable(),this.associatedStudentName=i.observable(),this.relationship=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.canReceive=i.observable(),this.noContactReason=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Parent=s},9119:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientAddressing=void 0;var i=a(1032),n=a(2390),s=a(6853),o=function(){function e(e){this.to=i.observableArray(),this.cc=i.observableArray(),this.bcc=i.observableArray(),this.invalidRecipients=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t=this,a={bcc:{create:function(e){return new s.Recipient(e.data)}},cc:{create:function(e){return new s.Recipient(e.data)}},invalidRecipients:{create:function(e){return new s.Recipient(e.data)}},to:{create:function(e){return new s.Recipient(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),a,this),this.to.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0})),this.cc.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0})),this.bcc.remove((function(e){return t.invalidRecipients().filter((function(t){return t.id()===e.id()})).length>0}))},e.prototype.getData=function(){return n.toJS(this)},e}();t.RecipientAddressing=o},5139:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientReadResult=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.read=i.observable(),this.groupName=i.observable(),this.orgYearId=i.observable(),this.organizationName=i.observable(),this.recipientList=i.observable(),this.groupUserTypes=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.RecipientReadResult=s},6228:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientReadStatus=void 0;var i=a(1032),n=a(2390),s=a(6853),o=function(){function e(e){this.readCount=i.observable(),this.personCount=i.observable(),this.recipients=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={recipients:{create:function(e){return new s.RecipientReadResult(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.RecipientReadStatus=o},5268:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recipient=void 0;var i=a(1032),n=a(2390),s=a(6605),o=function(){function e(e){var t=this;this.id=i.observable(),this.recipientList=i.observable(),this.groupUserTypes=i.observable(),this.contactDetails1=i.observable(),this.contactDetails2=i.observable(),this.content=i.observable(),this.grades=i.observableArray(),this.section=i.observable(),this.associatedSectionId=i.observable(),this.associatedSectionName=i.observable(),this.associatedGroupId=i.observable(),this.associatedGroupName=i.observable(),this.associatedStudentId=i.observable(),this.associatedStudentName=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.personCount=i.observable(),this.readCount=i.observable(),e&&this.loadData(e),this.groupUserTypes.subscribe((function(){t.recipientList()!==s.RecipientList.Classes&&t.recipientList()!==s.RecipientList.MassStudentGroups&&t.recipientList()!==s.RecipientList.MassEmail||t.contactDetails2(t.getGroupUserTypeString())}))}return e.prototype.isGroup=function(){var e=!1;switch(this.recipientList()){case s.RecipientList.Classes:case s.RecipientList.MassStudentGroups:case s.RecipientList.UserGroups:case s.RecipientList.MassEmail:case s.RecipientList.ContactGroups:e=!0}return e},e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e.prototype.getGroupUserTypeString=function(){var e=[];return this.groupUserTypes()&s.GroupUserType.Staff&&e.push(this.staffName()),this.groupUserTypes()&s.GroupUserType.Parent&&e.push("Parents"),this.groupUserTypes()&s.GroupUserType.Student&&e.push("Students"),[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length<2?"":" & ")},e.prototype.generateDetails1=function(e){return this.recipientList()===s.RecipientList.Classes?"".concat(this.section().sectionId()," - ").concat(this.section().course()):e},e.prototype.generateDetails2=function(e,t){switch(this.recipientList()){case s.RecipientList.Staff:return t||"Staff";case s.RecipientList.Parents:return this.associatedStudentName()?"Parent of ".concat(this.associatedStudentName()):"Parent";case s.RecipientList.Students:return"Student";case s.RecipientList.Teachers:return this.section?"".concat(this.section().period(),"-").concat(this.section().course()," Rm: ").concat(this.section().room()):"Teacher";case s.RecipientList.Counselors:return"Counselor";case s.RecipientList.StudentGroups:return"".concat(e," ").concat(t||"");case s.RecipientList.UserGroups:return"User Group";case s.RecipientList.Classes:case s.RecipientList.MassStudentGroups:case s.RecipientList.MassEmail:return this.getGroupUserTypeString();default:return""}},e.prototype.regenerateDetails=function(e,t){void 0===t&&(t=null),this.contactDetails1(this.generateDetails1(e)),this.contactDetails2(this.generateDetails2(e,t))},e.prototype.staffName=function(){switch(this.recipientList()){case s.RecipientList.MassStudentGroups:case s.RecipientList.MassEmail:return"Staff";case s.RecipientList.Classes:return"Teacher"}},e}();t.Recipient=o},7075:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recurrence=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.recurType=i.observable(),this.startTime=i.observable(),this.startDate=i.observable(),this.stopDate=i.observable(),this.weekCount=i.observable(),this.dayCount=i.observable(),this.everyHour=i.observable(),this.everyMinute=i.observable(),this.monthType=i.observable(),this.monthDayType=i.observable(),this.monthDayofWeek=i.observable(),this.monthDayofMonth=i.observable(),this.monday=i.observable(),this.tuesday=i.observable(),this.wednesday=i.observable(),this.thursday=i.observable(),this.friday=i.observable(),this.saturday=i.observable(),this.sunday=i.observable(),this.january=i.observable(),this.february=i.observable(),this.march=i.observable(),this.april=i.observable(),this.may=i.observable(),this.june=i.observable(),this.july=i.observable(),this.august=i.observable(),this.september=i.observable(),this.october=i.observable(),this.november=i.observable(),this.december=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e.prototype.getDataUpperCase=function(){return{RecurType:this.recurType(),StartTime:this.startTime(),StartDate:this.startDate(),StopDate:this.stopDate(),WeekCount:this.weekCount(),DayCount:this.dayCount(),EveryHour:this.everyHour(),EveryMinute:this.everyMinute(),MonthType:this.monthType(),MonthDayType:this.monthDayType(),MonthDayofWeek:this.monthDayofWeek(),MonthDayofMonth:this.monthDayofMonth(),Monday:this.monday(),Tuesday:this.tuesday(),Wednesday:this.wednesday(),Thursday:this.thursday(),Friday:this.friday(),Saturday:this.saturday(),Sunday:this.sunday(),January:this.january(),February:this.february(),March:this.march(),April:this.april(),May:this.may(),June:this.june(),July:this.july(),August:this.august(),September:this.september(),October:this.october(),November:this.november(),December:this.december()}},e}();t.Recurrence=s},9577:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.School=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.name=i.observable(),this.terms=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.School=s},20:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.period=i.observable(),this.term=i.observable(),this.sectionId=i.observable(),this.courseId=i.observable(),this.course=i.observable(),this.teacher=i.observable(),this.room=i.observable(),this.grade=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Section=s},4005:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectObject=void 0;t.SelectObject=function(e,t,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1),this.object=ko.observable(),this.text=ko.observable(),this.selected=ko.observable(),this.disabled=ko.observable(),this.object(e),this.text(t),this.selected(a),this.disabled(i)}},5460:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.enableForwarding=i.observable(),this.emailAddresses=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Settings=s},5700:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signature=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.newMessages=i.observable(""),this.replies=i.observable(""),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Signature=s},2161:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Staff=void 0;var i=a(1032),n=a(2390),s=a(2617),o=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.jobTitle=i.observable(),this.type=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),e&&this.loadData(e)}return Object.defineProperty(e.prototype,"jobTitleFormatted",{get:function(){return this.jobTitle()||s.SM.translation.staff()},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Staff=o},5444:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudentGroup=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.staffName=i.observable(),this.groupId=i.observable(),this.groupName=i.observable(),this.jobTitle=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.canReceive=i.observable(),this.noContactReason=i.observable(),this.typeValue=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.StudentGroup=s},8626:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudentRecipients=void 0;var i=a(1032),n=a(2390),s=a(7428),o=a(7038),r=a(6862),l=a(5444),d=a(7392),c=function(){function e(e){this.student=i.observable(),this.parents=i.observableArray(),this.teachers=i.observableArray(),this.studentGroups=i.observableArray(),this.counselor=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={student:{create:function(e){return new r.Student(e.data)}},parents:{create:function(e){return new o.Parent(e.data)}},teachers:{create:function(e){return new d.Teacher(e.data)}},studentGroups:{create:function(e){return new l.StudentGroup(e.data)}},counselor:{create:function(e){return new s.Counselor(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.StudentRecipients=c},6862:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.canReceive=i.observable(),this.noContactReason=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Student=s},140:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyInfo=void 0;var i=a(1032),n=a(2390),s=a(6605),o=function(){function e(e,t){this.startDate=i.observable(new Date),this.endDate=i.observable(),this.name=i.observable(),this.isEnabled=i.observable(!0),this.isRequired=i.observable(!1),this.isAnonymous=i.observable(!1),this.splitStudents=i.observable(!1),this.isSentMessage=i.pureComputed((function(){return e===s.MessageStatus.Sent})),t&&this.loadData(t)}return e.prototype.setBeginTimeNow=function(){this.startDate(new Date)},e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(e){return i.toJS({startDate:this.startDate,endDate:this.endDate,name:this.name()||e,isEnabled:this.isEnabled,isRequired:this.isRequired,isAnonymous:this.isAnonymous,splitStudents:this.splitStudents})},e}();t.SurveyInfo=o},9478:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherRecipients=void 0;var i=a(1032),n=a(2390),s=a(20),o=a(5444),r=function(){function e(e){this.sections=i.observableArray(),this.studentGroups=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={sections:{create:function(e){return new s.Section(e.data)}},studentGroups:{create:function(e){return new o.StudentGroup(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.TeacherRecipients=r},7392:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Teacher=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.teacher=i.observable(),this.sectionId=i.observable(),this.course=i.observable(),this.period=i.observable(),this.room=i.observable(),this.organizationYearId=i.observable(),this.organizationName=i.observable(),this.canReceive=i.observable(),this.noContactReason=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Teacher=s},989:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Template=void 0;var i=a(1032),n=a(2390),s=a(4341),o=function(){function e(e){this.templateId=i.observable(),this.organizationId=i.observable(),this.name=i.observable(),this.priority=i.observable(),this.emailSubject=i.observable(),this.emailBody=i.observable(),this.smsMessage=i.observable(),this.voiceText=i.observable(),this.socialText=i.observable(),this.sendEmail=i.observable(),this.sendSMS=i.observable(),this.sendVoice=i.observable(),this.sendSocial=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){var t={message:{create:function(e){return new s.Message(e.data)}}};n.fromJS(JSON.parse(JSON.stringify(e)),t,this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Template=o},7200:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Term=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.name=i.observable(),this.active=i.observable(),this.teachers=i.observableArray(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.Term=s},7050:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenValue=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.token=i.observable(),this.value=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.TokenValue=s},7788:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserGroup=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.id=i.observable(),this.name=i.observable(),this.users=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.UserGroup=s},877:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserTemplate=void 0;var i=a(1032),n=a(2390),s=function(){function e(e){this.userTemplateId=i.observable(),this.name=i.observable(),this.messageText=i.observable(),e&&this.loadData(e)}return e.prototype.loadData=function(e){n.fromJS(JSON.parse(JSON.stringify(e)),{},this)},e.prototype.getData=function(){return n.toJS(this)},e}();t.UserTemplate=s},7970:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DBService=t.PagedResult=void 0;t.PagedResult=function(){};var a=function(){function e(){}return e.formatOptions=function(e){var t=[];if(e.filter)if(void 0!==e.filter.columnIndex)t.push({column:e.filter[0],operation:e.filter[1],value:e.filter[2]});else for(var a=0,i=e.filter;a<i.length;a++){var n=i[a];$.isArray(n)&&t.push({column:n[0],operation:n[1],value:n[2]})}return{filter:t,search:"",skip:e.skip,take:e.take}},e}();t.DBService=a},3031:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.getFolders=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetFolders").then((function(t){var a=t.Result.map((function(e){return new i.Folder(e)}));e(a)})).catch((function(e){t(e)}))}))},e.addFolder=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","AddFolder",{name:e.name()}).then((function(e){var a=new i.AjaxResponse(e);a.successful&&(a.data=new i.Folder(e.Result.data)),t(a)})).catch((function(e){n.SM.handleError(e,"Unable to add folder.")}))}))},e.updateFolder=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","UpdateFolder",{folderId:e.folderId(),name:e.name()}).then((function(e){t(new i.AjaxResponse(e))})).catch((function(e){n.SM.handleError(e,"Unable to update folder.")}))}))},e.deleteFolder=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","DeleteFolder",{folderId:e}).then((function(e){t(!0)})).catch((function(e){var t=JSON.parse(e).Error;a(new Error(t))})).catch((function(e){n.SM.handleError(e,"Unable to delete folder.")}))}))},e}();t.FolderService=s},3720:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,n)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||i(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),n(a(3031),t),n(a(6397),t),n(a(6174),t),n(a(760),t),n(a(8240),t),n(a(1683),t),n(a(2449),t),n(a(7970),t)},6397:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.getUnreadMessageCount=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetUnreadMessageCount").then((function(t){var a=new i.AjaxResponse(t);a.successful&&(a.data=t.Result.data),e(a)})).catch((function(e){t(e)}))}))},e.getMessages=function(e,t,a,s,o){return new Promise((function(r,l){$.extend(o,{folderId:t,folderType:e,languageCode:a,showDeleted:s}),n.SM.callOAuthService("ST.Messaging","GetMessages",o).then((function(e){var t={data:e.Result.data.map((function(e){return new i.Message(e)})),totalCount:e.Result.totalCount};r(t)})).catch((function(e){n.SM.handleError(e,"Unable to load messages.")}))}))},e.printAuditReport=function(e,t,a,i,s,o,r,l){return new Promise((function(d,c){var u={recipients:e.map((function(e){return e.getData()})),messageRelationship:t,keywords:a,searchSubject:i,searchBody:s,searchAttachmentNames:o,fromDate:r,toDate:l,RevRequest:{}};n.SM.callOAuthService("ST.Messaging","PrintAuditReport",u).then((function(e){e.Result.successful?d(!0):c(e.Result.errorMessage)})).catch((function(e){n.SM.handleError(e,"Unable to print audit report.")}))}))},e.getAuditReportMessages=function(e,t,a,s,o,r,l,d,c){return new Promise((function(u,p){$.extend(c,{recipients:e.map((function(e){return e.getData()})),messageRelationship:t,keywords:a,searchSubject:s,searchBody:o,searchAttachmentNames:r,fromDate:l,toDate:d}),n.SM.callOAuthService("ST.Messaging","GetAuditReportMessages",c).then((function(e){var t={data:e.Result.data.map((function(e){return new i.Message(e)})),totalCount:e.Result.totalCount};u(t)})).catch((function(e){n.SM.handleError(e,"Unable to load audit report messages.")}))}))},e.createRetentionSet=function(e,t,a,i,s,o,r,l,d){return new Promise((function(c,u){var p={retentionSetName:e,recipients:t.map((function(e){return e.getData()})),messageRelationship:a,keywords:i,searchSubject:s,searchBody:o,searchAttachmentNames:r,fromDate:l,toDate:d};n.SM.callOAuthService("ST.Messaging","CreateRetentionSet",p).then((function(e){c(e.Result.successful)})).catch((function(e){n.SM.handleError(e,"Unable to create Retention Set.")}))}))},e.getSurveyLink=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","GetSurveyLink",{surveyCollectorGU:e}).then((function(e){t(e.Result.SurveyLink)})).catch((function(e){n.SM.handleError(e,"Unable to load message.")}))}))},e.getMessage=function(e,t,a,s){return new Promise((function(o,r){n.SM.callOAuthService("ST.Messaging","GetMessage",{id:e,languageCode:a,markAsRead:t,isSystemMessage:s}).then((function(e){var t=new i.Message(e.Result);o(t)})).catch((function(e){n.SM.handleError(e,"Unable to load message.")}))}))},e.getViewMessage=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","GetMessage",{viewId:e,languageCode:n.SM.languageCode()}).then((function(e){var a=new i.Message(e.Result);t(a)})).catch((function(e){n.SM.handleError(e,"Unable to load message.")}))}))},e.getTranslatedSubject=function(e,t){return new Promise((function(a,i){n.SM.callOAuthService("ST.Messaging","GetTranslatedSubject",{languageCode:t,messagePersonId:e}).then((function(e){var t=e.Result;a(t)})).catch((function(e){n.SM.handleError(e,"Unable to get translated subject.")}))}))},e.getRecipientReadStatus=function(e,t,a){return void 0===t&&(t=null),new Promise((function(s,o){$.extend(a,{groupId:t,messageId:e}),n.SM.callOAuthService("ST.Messaging","GetRecipientReadStatus",a).then((function(e){var t=new i.RecipientReadStatus(e.Result);s(t)})).catch((function(e){n.SM.handleError(e,"Unable to get recipient read status.")}))}))},e.updateRead=function(e,t,a){return new Promise((function(i,s){n.SM.callOAuthService("ST.Messaging","UpdateRead",{folderType:e,ids:t,read:a}).then((function(e){i(!0)})).catch((function(e){n.SM.handleError(e,"Unable to update read status.")}))}))},e.updateAllRead=function(e,t,a){return new Promise((function(i,s){n.SM.callOAuthService("ST.Messaging","UpdateAllRead",{folderType:e,folderId:t,read:a}).then((function(e){i(!0)})).catch((function(e){n.SM.handleError(e,"Unable to update all read status.")}))}))},e.archiveAll=function(e,t){return new Promise((function(a,s){n.SM.callOAuthService("ST.Messaging","ArchiveAll",{folderType:e,folderId:t}).then((function(e){a(!0)})).catch((function(t){n.SM.handleError(t,e===i.FolderType.Archive?"Unable to delete all.":"Unable to archive all")}))}))},e.moveMessages=function(e,t){return new Promise((function(a,i){n.SM.callOAuthService("ST.Messaging","MoveMessages",{folderId:t.folderId(),folderType:t.folderType(),messagePersonIds:e}).then((function(e){a(!0)})).catch((function(e){n.SM.handleError(e,"Unable to move message(s).")}))}))},e.sendMessage=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","SendMessage",{bcc:e.bcc().map((function(e){return e.getData()})),cc:e.cc().map((function(e){return e.getData()})),fromOption:e.fromOption().getData(),messagePersonId:e.messagePersonId(),messageText:e.messageText(),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice(),priority:e.priority(),subject:e.subject(),to:e.to().map((function(e){return e.getData()})),updateContactLog:e.updateContactLog(),contactCategory:e.contactCategory(),isMeeting:e.isMeeting(),vidConfId:e.vidConfId(),surveyGU:e.surveyGU(),surveyInfo:e.surveyInfo().getData(e.subject()),bccSender:e.bccSender(),scheduleSendDate:e.scheduleSendDate(),shouldTranslate:e.shouldTranslate()}).then((function(e){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to send message."),a(e)}))}))},e.saveDraft=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","SaveDraft",{bcc:e.bcc().map((function(e){return e.getData()})),cc:e.cc().map((function(e){return e.getData()})),fromOption:e.fromOption().getData(),messagePersonId:e.messagePersonId(),messageText:e.messageText(),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice(),priority:e.priority(),subject:e.subject(),to:e.to().map((function(e){return e.getData()})),updateContactLog:e.updateContactLog(),contactCategory:e.contactCategory(),isMeeting:e.isMeeting(),vidConfId:e.vidConfId(),surveyGU:e.surveyGU(),surveyInfo:e.surveyInfo().getData(e.subject()),bccSender:e.bccSender(),scheduleSendDate:e.scheduleSendDate(),shouldTranslate:e.shouldTranslate()}).then((function(e){t(e.Result)})).catch((function(e){n.SM.handleError(e,"Unable to save draft."),a(e)}))}))},e.createMessage=function(e,t,a){return new Promise((function(s,o){n.SM.callOAuthService("ST.Messaging","CreateMessage",{createMessageType:e,messagePersonId:t,languageCode:a}).then((function(e){var t=new i.Message(e.Result);s(t)})).catch((function(e){n.SM.handleError(e,"Unable to create message.")}))}))},e.cancelScheduledSend=function(e){return new Promise((function(t){n.SM.callOAuthService("ST.Messaging","CancelScheduledSend",{messagePersonId:e}).then((function(){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to cancel scheduled send.")}))}))},e.discardDraft=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","DiscardDraft",{messagePersonId:e}).then((function(e){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to discard draft.")}))}))},e.deleteMessages=function(e,t){return new Promise((function(a,i){n.SM.callOAuthService("ST.Messaging","DeleteMessages",{folderType:e,messagePersonIds:t}).then((function(e){a(!0)})).catch((function(e){n.SM.handleError(e,"Unable to delete message(s).")}))}))},e.undeleteMessages=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","UndeleteMessages",{messagePersonIds:e}).then((function(e){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to undelete message(s).")}))}))},e.addAttachment=function(e,t,a,s){return new Promise((function(o,r){var l=new FormData,d={attachmentType:t.attachmentType(),name:t.name(),link:t.link(),iconPath:t.iconPath(),surveyCollectorGU:t.surveyCollectorGU(),queryXml:t.queryXml(),messagePersonId:e};l.append("data",JSON.stringify(d)),t.attachmentType()===i.AttachmentType.File&&l.append("attachments[]",t.file());var c=$.ajaxSettings.xhr();c.upload.onprogress=function(e){a&&a(e.loaded/e.total*100)},s&&s(c),n.SM.callOAuthService("ST.Messaging","AddAttachment",{},!1,{contentType:!1,data:l,processData:!1,xhr:function(){return c}}).then((function(e){var t=new i.AjaxResponse(e);o(t)})).catch((function(e){r(e)}))}))},e.deleteAttachment=function(e,t){return new Promise((function(a,i){n.SM.callOAuthService("ST.Messaging","DeleteAttachment",{attachmentId:t,messagePersonId:e}).then((function(e){a(!0)})).catch((function(e){n.SM.handleError(e,"Unable to delete attachment.")}))}))},e}();t.MessageService=s},6174:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiscService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.getFromOptions=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetFromOptions").then((function(t){var a=t.Result.map((function(e){return new i.Language(e)}));e(a)})).catch((function(e){n.SM.handleError(e,"Unable to get from options.")}))}))},e.getLanguages=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetLanguages").then((function(t){var a=t.Result.map((function(e){return new i.Language(e)}));e(a)})).catch((function(e){n.SM.handleError(e,"Unable to get languages.")}))}))},e.getAttachmentsFromQueryXml=function(e){return new Promise((function(t){e?n.SM.callOAuthService("ST.Messaging","GetAttachmentsFromQueryXml",{queryXml:e}).then((function(e){var a=e.Result.map((function(e){return new i.Attachment(e)}));t(a)})).catch((function(e){n.SM.handleError(e,"Unable to get attachments.")})):t([])}))},e.getAttachmentsFromLinks=function(e){return new Promise((function(t){e?n.SM.callOAuthService("ST.Messaging","GetAttachmentsFromLinks",{links:e}).then((function(e){var a=e.Result.map((function(e){return new i.Attachment(e)}));t(a)})).catch((function(e){n.SM.handleError(e,"Unable to get attachments.")})):t(null)}))},e.getSignature=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetSignature").then((function(t){e(new i.Signature(t.Result))})).catch((function(e){n.SM.handleError(e,"Unable to get signature.")}))}))},e.getContactCategories=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetContactCategories").then((function(t){var a=t.Result.map((function(e){return new i.ContactCategory(e)}));e(a)})).catch((function(e){n.SM.handleError(e,"Unable to get contact categories.")}))}))},e.updateSignature=function(e,t){return new Promise((function(a,i){n.SM.callOAuthService("ST.Messaging","UpdateSignature",{newMessages:encodeURIComponent(e),replies:encodeURIComponent(t)}).then((function(e){a(!0)})).catch((function(e){n.SM.handleError(e,"Unable to update signature.")}))}))},e.getSettings=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetSettings").then((function(t){e(new i.Settings(t.Result))})).catch((function(e){n.SM.handleError(e,"Unable to get settings.")}))}))},e.updateSettings=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","UpdateSettings",{enableForwarding:e}).then((function(e){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to update settings.")}))}))},e}();t.MiscService=s},760:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.getOrganizations=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetOrganizations").then((function(t){var a=t.Result.map((function(e){return new i.Organization(e)}));e(a)})).catch((function(e){n.SM.handleError(e,"Unable to get organizations.")}))}))},e.getOrganizationGrades=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","GetOrganizationGrades",{id:e}).then((function(e){var a=e.Result.map((function(e){return new i.OrganizationGrade(e)}));t(a)})).catch((function(e){n.SM.handleError(e,"Unable to get organization grades.")}))}))},e}();t.OrganizationService=s},8240:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecipientService=void 0;var i=a(6853),n=a(8626),s=a(9478),o=a(2617),r=function(){function e(){}return e.getStaff=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetStaff",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.Staff(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get staff.")}))}))},e.getParents=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetParents",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.Parent(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get parents.")}))}))},e.getStudents=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetStudents",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.Student(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get students.")}))}))},e.getSections=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetSections",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.Section(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get sections.")}))}))},e.getTeachers=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetTeachers",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.School(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get teachers.")}))}))},e.getCounselors=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetCounselors",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.Counselor(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get counselors.")}))}))},e.getStudentGroups=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetStudentGroups",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.StudentGroup(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get student groups.")}))}))},e.getMassStudentGroups=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetMassStudentGroups",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.StudentGroup(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get mass student groups.")}))}))},e.getUserGroups=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetUserGroups",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.UserGroup(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get user groups.")}))}))},e.getContactGroups=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetContactGroups",e).then((function(e){var a=$.map(e.Result,(function(e){return new i.ContactGroup(e)}));t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get contact lists.")}))}))},e.getContactGroup=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetContactGroup",{contactGroupId:e}).then((function(e){t(new i.ContactGroup(e.Result))})).catch((function(e){o.SM.handleError(e,"Unable to get contact list.")}))}))},e.addContactGroup=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","AddContactGroup",{organizationYearId:e.organizationYearId(),name:e.name(),description:e.description(),isPublic:e.isPublic(),recipients:e.recipients().map((function(e){return e.getData()}))}).then((function(e){t(!0)})).catch((function(e){o.SM.handleError(e,"Unable to add contact list.")}))}))},e.updateContactGroup=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","UpdateContactGroup",{id:e.id(),organizationYearId:e.organizationYearId(),name:e.name(),description:e.description(),isPublic:e.isPublic(),recipients:e.recipients().map((function(e){return e.getData()}))}).then((function(e){t(!0)})).catch((function(e){o.SM.handleError(e,"Unable to update contact list.")}))}))},e.deleteContactGroup=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","DeleteContactGroup",{contactGroupId:e}).then((function(e){t(!0)})).catch((function(e){o.SM.handleError(e,"Unable to delete contact list.")}))}))},e.getRecipientAddressing=function(e,t,a){return new Promise((function(n,s){o.SM.callOAuthService("ST.Messaging","GetRecipientAddressing",{to:e,cc:t,bcc:a}).then((function(e){n(new i.RecipientAddressing(e.Result))})).catch((function(e){o.SM.handleError(e,"Unable to get recipient addressing.")}))}))},e.validateSTQuery=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","ValidateSTQuery",{queryString:e}).then((function(e){t(e.Result)}))}))},e.getTeacherRecipients=function(){return new Promise((function(e,t){o.SM.callOAuthService("ST.Messaging","GetTeacherRecipients").then((function(t){var a=new s.TeacherRecipients(t.Result);e(a)})).catch((function(e){o.SM.handleError(e,"Unable to get teacher recipients.")}))}))},e.getStudentRecipients=function(e){return new Promise((function(t,a){o.SM.callOAuthService("ST.Messaging","GetStudentRecipients",e).then((function(e){var a=new n.StudentRecipients(e.Result);t(a)})).catch((function(e){o.SM.handleError(e,"Unable to get student recipients.")}))}))},e}();t.RecipientService=r},1683:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.saveTemplate=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","SaveTemplate",{templateId:e.templateId(),organizationId:e.organizationId(),name:e.name(),priority:e.priority(),emailSubject:e.emailSubject(),emailBody:encodeURIComponent(e.emailBody()),smsMessage:e.smsMessage(),voiceText:e.voiceText(),sendEmail:e.sendEmail(),sendSMS:e.sendSMS(),sendVoice:e.sendVoice()}).then((function(e){t(e.Result)})).catch((function(e){n.SM.handleError(e,"Unable to save template.")}))}))},e.getTemplate=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","GetTemplate",{templateId:e}).then((function(e){var a=new i.Template(e.Result);t(a)})).catch((function(e){n.SM.handleError(e,"Unable to get template.")}))}))},e}();t.TemplateService=s},2449:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserTemplateService=void 0;var i=a(6853),n=a(2617),s=function(){function e(){}return e.getUserTemplates=function(){return new Promise((function(e,t){n.SM.callOAuthService("ST.Messaging","GetUserTemplates").then((function(t){var a=t.Result.map((function(e){return new i.UserTemplate(e)}));e(a)})).catch((function(e){n.SM.handleError(e,"Unable to get user templates.")}))}))},e.addUserTemplate=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","AddUserTemplate",{messageText:encodeURIComponent(e.messageText()),name:e.name()}).then((function(e){t(e.Result)})).catch((function(e){n.SM.handleError(e,"Unable to add user template.")}))}))},e.updateUserTemplate=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","UpdateUserTemplate",{messageText:encodeURIComponent(e.messageText()),name:e.name(),templateId:e.userTemplateId()}).then((function(e){t(!0)})).catch((function(e){n.SM.handleError(e,"Unable to update user template.")}))}))},e.deleteUserTemplate=function(e){return new Promise((function(t,a){n.SM.callOAuthService("ST.Messaging","DeleteTemplate",{templateId:e}).then((function(e){t(!0)})).catch((function(e){var t=JSON.parse(e).Error;a(new Error(t))})).catch((function(e){n.SM.handleError(e,"Unable to delete user template.")}))}))},e.getUserTemplateMerged=function(e,t,a){return new Promise((function(i,s){n.SM.callOAuthService("ST.Messaging","GetUserTemplateMerged",{parentId:a,studentId:t,userTemplateId:e}).then((function(e){var t=e.Result;i(t)})).catch((function(e){n.SM.handleError(e,"Unable to get user template merged.")}))}))},e}();t.UserTemplateService=s},8076:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMDialog=t.SMDialogButtons=void 0;var i,n=a(1032),s=a(2372),o=a(2617);!function(e){e[e.Ok=0]="Ok",e[e.SaveCancel=1]="SaveCancel",e[e.YesNo=2]="YesNo"}(i=t.SMDialogButtons||(t.SMDialogButtons={}));var r=function(){function e(){}return e.showInput=function(e,t,a,n,o){this.showInternal(s.SMDialogType.Input,i.SaveCancel,e,t,a,n,o)},e.showMessage=function(e,t,a,i){this.showInternal(s.SMDialogType.Message,e,t,a,null,null,i)},e.showDialog=function(e){var t=$('<sm-dialog params="options: dialogOptions"></sm-dialog>');$(o.SM.topWindow().document.body).append(t);var a={dialogOptions:{dialogId:"smDialog".concat(Date.now()),initialValue:e.initialValue,leftButtons:e.leftButtons,message:e.message,onInitialized:function(a){setTimeout((function(){a.show((function(a,i){setTimeout((function(){$(t).remove(),e.onDismissed&&e.onDismissed(a,i)}),0)}))}),0)},rightButtons:e.rightButtons,title:e.title,type:e.type,validationMessage:e.validationMessage}};n.applyBindings(a,t[0])},e.showInternal=function(e,t,a,n,s,r,l){var d;switch(t){case i.Ok:d=[{label:o.SM.translation.ok(),value:"Ok",css:"btn btn-default"}];break;case i.SaveCancel:d=[{label:o.SM.translation.save(),value:"Save",css:"btn btn-primary"},{label:o.SM.translation.cancel(),value:"Cancel",css:"btn btn-default"}];break;case i.YesNo:d=[{label:o.SM.translation.yes(),value:"Yes",css:"btn btn-default"},{label:o.SM.translation.no(),value:"No",css:"btn btn-default"}]}this.showDialog({initialValue:s,message:n,onDismissed:l,rightButtons:d,title:a,type:e,validationMessage:r})},e}();t.SMDialog=r},2617:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SM=t.SMWindowSize=void 0;var i,n=a(5475),s=a(9061),o=a(6623),r=a(6197),l=a(6438),d=a(6853),c=a(3720),u=a(4134);(i=t.SMWindowSize||(t.SMWindowSize={}))[i.Normal=0]="Normal",i[i.Maximized=1]="Maximized";var p=function(){function e(){}return Object.defineProperty(e,"focusOrgYearId",{get:function(){return this.topWindow().ST.FocusOrgYearGU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"openMessagePersonId",{get:function(){return this.topWindow().ST.SM_OpenMessagePersonGU},set:function(e){this.topWindow().ST.SM_OpenMessagePersonGU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"openVidConfId",{get:function(){return this.topWindow().ST.OpenVidConfGU},set:function(e){this.topWindow().ST.OpenVidConfGU=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFolderType",{get:function(){return this.topWindow().ST.SM_DefaultFolderType||(e.mode===d.SynergyMailMode.On?d.FolderType.Inbox:d.FolderType.Draft)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"accessibilityMode",{get:function(){return this.topWindow().ST.Preferences.AccessibilityMode||this.topWindow().PXP&&this.topWindow().PXP.AccessibilityMode},enumerable:!1,configurable:!0}),e.allowEmailAtFocus=function(t){return void 0===t&&(t=e.focusOrgYearId),!!t||e.allowEmailAtDistrict||e.staffRecipientAccess===d.StaffRecipientAccess.District},e.showReadStatus=function(e,t,a,i){o.SMReadStatusViewModel.instantiate({onInitialized:function(n){n.show(e,t,a,i)}})},e.instantiateAddRecipients=function(e){s.SMAddRecipientViewModel.instantiate(e)},e.instantiateViewMessage=function(e){c.MessageService.getViewMessage(e).then((function(e){l.SMViewMessageViewModel.instantiate({onInitialized:function(t){t.show(e)}})}))},e.isAdvancedUpload=function(){var e=document.createElement("div"),t=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.appVersion.indexOf("Edge")||-1!==navigator.appVersion.indexOf("Trident/");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window&&!t},e.languageCode=function(){return(e.currentWebPortal===d.CurrentWebPortal.ParentVUE||e.currentWebPortal===d.CurrentWebPortal.StudentVUE)&&e.getCookie("PVUE")||e.revLanguageCodeEnglish},e.getCookie=function(e){var t=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(a){return a.substring(0,t)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(t))}))[0]||null},e.handleError=function(e,t){$.pnotify_error("".concat(t)),e&&console.error(e)},e.callOAuthService=function(t,a,i,s,o){var r=this;return void 0===s&&(s=!0),new Promise((function(l,d){var c;""!==r.auditId&&((i=i||{}).auditId=r.auditId);var u=!1;s&&(c=window.setTimeout((function(){u=!0,d({error:"Request timed out for '".concat(a,"'."),errorType:"Timeout"})}),e.networkTimeout)),(0,n.setTimeout)((function(){ST.CallOAuthService(t,a,i,o).then((function(e){s&&u||(c&&window.clearTimeout(c),l(e))})).catch((function(e){s&&u||(c&&window.clearTimeout(c),d(e))}))}),e.networkDelay)}))},e.updateUnreadMessagesBadge=function(t){this.unreadMessageCount=t;var a=e.topWindow().$(".SynergyMailUnread");0===t?(a.closest("li").removeClass("has-notifications"),a.each((function(e,t){$(t).hide()}))):(a.closest("li").addClass("has-notifications"),a.each((function(e,a){var i=$(a);i.show(),i.text(t),i.attr("title","".concat(t," unread message").concat(t>1?"s":""))})))},Object.defineProperty(e,"selectAddressesViewModel",{get:function(){var e=this;return new Promise((function(t,a){if(null===e.selectAddressesVM){var i=$("<sm-select-addresses></sm-select-addresses>");$("body").append(i),ko.applyBindings(e.selectAddressesVM,i[0]),(0,n.setTimeout)((function(){e.selectAddressesVM=ko.dataFor(i.get(0).firstChild),t(e.selectAddressesVM)}),500)}else t(e.selectAddressesVM)}))},enumerable:!1,configurable:!0}),e.selectAddresses=function(e){this.selectAddressesViewModel.then((function(t){t.open(e)}))},e.addressMailTo=function(){this.selectAddresses((function(e,t,a){var i=e.map((function(e){return e.contactDetails1()})).join(","),n=t.map((function(e){return e.contactDetails1()})).join(","),s=a.map((function(e){return e.contactDetails1()})).join(",");window.ignoreUnloadMessage=!0,window.open("PXP_SendEmail.html?to=".concat(i,"&cc=").concat(n,"&bcc=").concat(s),"_blank"),window.ignoreUnloadMessage=!1}))},e.editSignatures=function(){e.SMApp().rootViewModel.editSignatures()},Object.defineProperty(e,"composeViewModel",{get:function(){var e=this;return new Promise((function(t,a){if(null===e.composeVM){var i=$("<sm-compose></sm-compose>");$("body").append(i),ko.applyBindings(e.composeVM,i[0]),(0,n.setTimeout)((function(){e.composeVM=ko.dataFor(i.get(0).firstChild),t(e.composeVM)}),500)}else t(e.composeVM)}))},enumerable:!1,configurable:!0}),e.compose=function(t,a,i){e.allowNonStaffRecipients=t.allowNonStaffRecipients,this.composeViewModel.then((function(e){e.open(t,a,i)}))},e.openSchedule=function(e){r.SMScheduleSendViewModel.instantiate({onInitialized:function(t){t.create(e)}})},e.SMApp=function(){return this.topWindow().SMApp},e.topWindow=function(){var t;switch(e.currentWebPortal){case d.CurrentWebPortal.Synergy:t=window.top;break;case d.CurrentWebPortal.TeacherVUE:var a=window.top.frames[0];t="FRAME_CONTENT"===a.name?a:window.top;break;case d.CurrentWebPortal.ParentVUE:case d.CurrentWebPortal.StudentVUE:default:t=window}return t},e.rootWindow=function(){var t;switch(e.currentWebPortal){case d.CurrentWebPortal.Synergy:t=e.topWindow().frames["Synergy Mail"]||e.topWindow().frames["Synergy Mail Audit"]||e.topWindow().frames["Mass Email v2"];break;case d.CurrentWebPortal.ParentVUE:case d.CurrentWebPortal.StudentVUE:case d.CurrentWebPortal.TeacherVUE:t=e.topWindow()}return t},Object.defineProperty(e,"$",{get:function(){return this.topWindow().$},enumerable:!1,configurable:!0}),e.showSnapshot=function(t,a,i){if(e.currentWebPortal===d.CurrentWebPortal.Synergy){var n="";switch(a){case d.RecipientList.Parents:n=e.PARENT_SNAPSHOT_VIEW_ID;break;case d.RecipientList.Students:n=e.STUDENT_SNAPSHOT_VIEW_ID;break;case d.RecipientList.Classes:n=e.CLASS_SNAPSHOT_VIEW_ID}t.attr("data-snapshot-view","-"),this.stView.ShowSnapshot(t,n,i)}},e.hideSnapshot=function(t){e.currentWebPortal===d.CurrentWebPortal.Synergy&&this.stView.HideSnapshot(t)},e.createEditor=function(e){return new Promise((function(t,a){var i=e.element.nextElementSibling,n=[];if(i&&(n=i.getElementsByClassName("ck-editor__editable")),n.length>0){var s=n[0].ckeditorInstance;t(s)}else{var o=["heading","|","alignment","|","bold","italic","strikethrough","underline","|","link","|","bulletedList","numberedList","fontfamily","fontsize","fontColor","fontBackgroundColor","|","insertTable","|","outdent","indent","|","uploadImage","blockQuote","|","undo","redo"];e.showViewTemplates&&o.push("viewTemplates"),e.showInsertToken&&o.push("insertToken");var r=function(i){if(!i)throw Error("CKEditor script not loaded");i.SynergyClassicEditor.create(e.element,{toolbar:{items:o},viewTemplates:{onclick:function(e){window.SMApp.showTemplateDropDown(e)}},insertToken:{onclick:function(e,t){window.SMApp.showTokenDropDown(e,t)}},fontFamily:{options:["default","Arial/Arial, Helvetica, sans-serif;","Candara/Candara, Verdana, sans-serif;","Comic Sans MS/Comic Sans MS, cursive;","Courier New/Courier New, Courier, monospace;","Georgia/Georgia, serif;","Lato Hairline/Lato Hairline, Verdana, sans-serif;","Lato Light/Lato Light, Verdana, sans-serif;","Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;","Tahoma/Tahoma, Geneva, sans-serif;","Times New Roman/Times New Roman, Times, serif;","Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;","Verdana/Verdana, Geneva, sans-serif"]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]},image:{resizeUnit:"px",styles:["alignLeft","alignCenter","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original",value:null},{name:"resizeImage:50",label:"250px",value:"250"},{name:"resizeImage:75",label:"400px",value:"400"}],toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","resizeImage","|","imageTextAlternative"]},table:{contentToolbar:["tableRow","tableColumn","mergeTableCells","tableCellProperties","tableProperties"]}}).then((function(a){a.sourceElement.nextElementSibling.classList.add("ck-editor-focus"),e.onPaste&&a.editing.view.document.on("clipboardInput",(function(t,i){if(!a.isReadOnly){var n=i.dataTransfer.getData("text/plain");(n.indexOf("?ST=")>-1||n.indexOf("&ST=")>-1)&&(e.onPaste(n),t.stop())}}),{priority:"high"}),e.onChange&&a.model.document.on("change:data",e.onChange),t(a)})).catch((function(e){a(e)}))};window.CKEditor?r(window.CKEditor):gbapp.requireCKEditor(r)}}))},e.showExperimental=ST.SM_ShowExperimental,e.mode=ST.SM_Mode,e.userType=ST.UserType,e.meetingAuth=ST.SM_VidConfMeetingAuth,e.contactCategoriesEnabled=ST.SM_ContactCategoriesEnabled,e.defaultContactLogCategory=ST.SM_DefaultContactLogCategory,e.defaultDuration=ST.SM_DefaultDuration,e.vidConfDefaultContactLogCategory=ST.SM_VidConfDefaultContactLogCategory,e.auditing=void 0!==ST.SM_AuditGU,e.impersonated=ST.Impersonated||e.auditing,e.vidConfEnabled=ST.VideoConferenceEnabled,e.currentWebPortal=ST.CurrentWebPortal,e.canViewMail=ST.SM_CanViewMail,e.enableForwarding=ST.SM_EnableForwarding,e.revLanguageCodeEnglish=ST.SM_RevLanguageCodeEnglish,e.auditId=ST.SM_AuditGU,e.auditType=ST.SM_AuditType,e.auditName=ST.SM_AuditName,e.staffRecipientAccess=ST.SM_StaffRecipientAccess,e.teacherStudentAccess=ST.SM_TeacherStudentAccess,e.parentRecipientAccess=ST.SM_ParentRecipientAccess,e.studentRecipientAccess=ST.SM_StudentRecipientAccess,e.contactListSecurity=ST.SM_ContactListSecurity,e.staffTabVisible=ST.SM_StaffTabVisible,e.parentsTabVisible=ST.SM_ParentsTabVisible,e.studentsTabVisible=ST.SM_StudentsTabVisible,e.classesTabVisible=ST.SM_ClassesTabVisible,e.userGroupsTabVisible=ST.SM_UserGroupsTabVisible,e.studentGroupsTabVisible=ST.SM_StudentGroupsTabVisible,e.massEmailTabVisible=ST.SM_MassEmailTabVisible,e.contactListsTabVisible=ST.SM_ContactListsTabVisible,e.teachersTabVisible=ST.SM_TeachersTabVisible,e.counselorsTabVisible=ST.SM_CounselorsTabVisible,e.smsTabVisible=ST.SM_SMSTabVisible,e.voiceTabVisible=ST.SM_VoiceTabVisible,e.socialTabVisible=ST.SM_SocialTabVisible,e.jobTitleColumnVisible=ST.SM_JobTitleColumnVisible,e.typeColumnVisible=ST.SM_TypeColumnVisible,e.allowNonStaffRecipients=!0,e.contactLogOption=ST.SM_ContactLogOption,e.vidConfContactLogOption=ST.SM_VidConfContactLogOption,e.showBCC=ST.SM_ShowBCC,e.allowEmailAtDistrict=ST.SM_AllowEmailAtDistrict,e.childName=ST.SM_ChildName,e.autoSaveTimeout=5e3,e.checkUnreadMessagesTimeout=ST.SM_CheckUnreadMessagesTimeout,e.networkTimeout=3e4,e.maxAttachmentSizeMB=ST.SM_MaxAttachmentSizeMB,e.networkDelay=0,e.translation=new u.Translation,e.unreadMessageCount=0,e.internalCompose=!1,e.selectAddressesVM=null,e.composeVM=null,e.editorVM=null,e.blockedExtensions=ST.SM_BlockedExtensions,e.enableVUEEnhancements=ST.SM_EnableVUEEnhancements,e.enableShowAdvanced=ST.SM_EnableShowAdvanced,e.translationEnabled=ST.SM_TranslationEnabled,e.STAFF_SNAPSHOT_VIEW_ID="7D1F0C53-308D-4A8B-9201-8B21342ECEB9",e.PARENT_SNAPSHOT_VIEW_ID="9A9FD15C-658C-4EE9-A765-6A3DD2875D3E",e.STUDENT_SNAPSHOT_VIEW_ID="26D81CC4-A262-4B64-B7DC-F79C67D164BE",e.CLASS_SNAPSHOT_VIEW_ID="36CF7E1E-3813-4AC2-8B51-B66C432F1B78",e.editorConfig={removePlugins:["widget","clipboard","oembed","pastetools","pastefromword","pastefromgdocs","pastefromlibreoffice","pastetext","tableselection","uploadwidget","uploadimage","exportpdf","a11yhelp","about","flash","iframe","language","smiley"].join(","),disableNativeSpellChecker:!1,toolbar:[["Bold","Italic","Underline","Strike"],["Undo","Redo"],["Font","FontSize"],["TextColor","BGColor","RemoveFormat"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","-","Outdent","Indent"],["Table","HorizontalRule","SpecialChar","-","Link","Unlink"]]},e}();t.SM=p},4134:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translation=void 0;var i=a(1032),n=function(){function e(){this.actions=i.observable(ST.Translations.Mail_Actions),this.addAttachment=i.observable(ST.Translations.Mail_AddAttachment),this.addRecipients=i.observable(ST.Translations.Mail_AddRecipients),this.addressTo=i.observable(ST.Translations.Mail_AddressTo),this.addToCalendar=i.observable(ST.Translations.Mail_AddToCalendar),this.archive=i.observable(ST.Translations.Mail_Archive),this.archiveAll=i.observable(ST.Translations.Mail_ArchiveAll),this.attachmentExtensionBlocked=i.observable(ST.Translations.Mail_AttachmentExtensionBlocked),this.attachments=i.observable(ST.Translations.Mail_Attachments),this.attachmentTooLarge=i.observable(ST.Translations.Mail_AttachmentTooLarge),this.attachmentsUploading=i.observable(ST.Translations.Mail_AttachmentsUploading),this.attachmentsUploadingWaitOrCancel=i.observable(ST.Translations.Mail_AttachmentsUploadingWaitOrCancel),this.autosavedAt=i.observable(ST.Translations.Mail_AutosavedAt),this.autosaving=i.observable(ST.Translations.Mail_Autosaving),this.back=i.observable(ST.Translations.Mail_Back),this.bcc=i.observable(ST.Translations.Mail_BCC),this.bccSender=i.observable(ST.Translations.Mail_BCCSender),this.blankSubjectAndBodyText=i.observable(ST.Translations.Mail_BlankSubjectAndBodyText),this.blankSubjectAndBodyTitle=i.observable(ST.Translations.Mail_BlankSubjectAndBodyTitle),this.blankSubjectText=i.observable(ST.Translations.Mail_BlankSubjectText),this.blankSubjectTitle=i.observable(ST.Translations.Mail_BlankSubjectTitle),this.cancel=i.observable(ST.Translations.Mail_Cancel),this.cc=i.observable(ST.Translations.Mail_CC),this.classes=i.observable(ST.Translations.Mail_Classes),this.close=i.observable(ST.Translations.Mail_Close),this.compose=i.observable(ST.Translations.Mail_Compose),this.contacts=i.observable(ST.Translations.Mail_Contacts),this.contactCategory=i.observable(ST.Translations.Mail_ContactCategory),this.contactGroup=i.observable(ST.Translations.Mail_ContactGroup),this.contactGroups=i.observable(ST.Translations.Mail_ContactGroups),this.counselor=i.observable(ST.Translations.Mail_Counselor),this.course=i.observable(ST.Translations.Mail_Course),this.courseId=i.observable(ST.Translations.Mail_CourseID),this.date=i.observable(ST.Translations.Mail_Date),this.delete=i.observable(ST.Translations.Mail_Delete),this.deleteAll=i.observable(ST.Translations.Mail_DeleteAll),this.deleteAllMessagesText=i.observable(ST.Translations.Mail_DeleteAllMessagesText),this.deleteAllMessagesTitle=i.observable(ST.Translations.Mail_DeleteAllMessagesTitle),this.deleteContactGroup=i.observable(ST.Translations.Mail_DeleteContactGroup),this.deleteContactGroupText=i.observable(ST.Translations.Mail_DeleteContactGroupText),this.deleteFolder=i.observable(ST.Translations.Mail_DeleteFolder),this.deleteFolderText=i.observable(ST.Translations.Mail_DeleteFolderText),this.deleteFolderTitle=i.observable(ST.Translations.Mail_DeleteFolderTitle),this.deleteMessagesText=i.observable(ST.Translations.Mail_DeleteMessagesText),this.deleteMessagesTitle=i.observable(ST.Translations.Mail_DeleteMessagesTitle),this.description=i.observable(ST.Translations.Mail_Description),this.discard=i.observable(ST.Translations.Mail_Discard),this.discardMessageText=i.observable(ST.Translations.Mail_DiscardMessageText),this.discardMessageTitle=i.observable(ST.Translations.Mail_DiscardMessageTitle),this.district=i.observable(ST.Translations.Mail_District),this.drafts=i.observable(ST.Translations.Mail_Drafts),this.dragDropInfo=i.observable(ST.Translations.Mail_DragDropInfo),this.duration=i.observable(ST.Translations.Mail_Duration),this.edit=i.observable(ST.Translations.Mail_Edit),this.editable=i.observable(ST.Translations.Mail_Editable),this.editableByStaff=i.observable(ST.Translations.Mail_EditableByStaff),this.editContactGroup=i.observable(ST.Translations.Mail_EditContactGroup),this.editFolder=i.observable(ST.Translations.Mail_EditFolder),this.editSignatures=i.observable(ST.Translations.Mail_EditSignatures),this.enableForwarding=i.observable(ST.Translations.Mail_EnableForwarding),this.endTime=i.observable(ST.Translations.Mail_EndTime),this.enterFolderName=i.observable(ST.Translations.Mail_EnterFolderName),this.enterValidFolderName=i.observable(ST.Translations.Mail_EnterValidFolderName),this.errorOccurredText=i.observable(ST.Translations.Mail_ErrorOccurredText),this.errorOccurredTitle=i.observable(ST.Translations.Mail_ErrorOccurredTitle),this.folders=i.observable(ST.Translations.Mail_Folders),this.forward=i.observable(ST.Translations.Mail_Forward),this.from=i.observable(ST.Translations.Mail_From),this.grade=i.observable(ST.Translations.Mail_Grade),this.grades=i.observable(ST.Translations.Mail_Grades),this.group=i.observable(ST.Translations.Mail_Group),this.groupName=i.observable(ST.Translations.Mail_GroupName),this.groups=i.observable(ST.Translations.Mail_Groups),this.hideDeletedMessages=i.observable(ST.Translations.Mail_HideDeletedMessages),this.hideDetails=i.observable(ST.Translations.Mail_HideDetails),this.hideOriginalText=i.observable(ST.Translations.Mail_HideOriginalText),this.inbox=i.observable(ST.Translations.Mail_Inbox),this.jobTitle=i.observable(ST.Translations.Mail_JobTitle),this.joinMeeting=i.observable(ST.Translations.Mail_JoinMeeting),this.loading=i.observable(ST.Translations.Mail_Loading),this.loadingTranslation=i.observable(ST.Translations.Mail_LoadingTranslation),this.markAllRead=i.observable(ST.Translations.Mail_MarkAllRead),this.markAllUnread=i.observable(ST.Translations.Mail_MarkAllUnread),this.markAsRead=i.observable(ST.Translations.Mail_MarkAsRead),this.markAsUnread=i.observable(ST.Translations.Mail_MarkAsUnread),this.massEmail=i.observable(ST.Translations.Mail_MassEmail),this.meeting=i.observable(ST.Translations.Mail_Meeting),this.meetingStartDate=i.observable(ST.Translations.Mail_MeetingStartDate),this.meetingStartDateInPast=i.observable(ST.Translations.Mail_MeetingStartDateInPast),this.meetingStartDateInvalid=i.observable(ST.Translations.Mail_MeetingStartDateInvalid),this.meetingStartDateInvalidConfirm=i.observable(ST.Translations.Mail_MeetingStartDateInvalidConfirm),this.message=i.observable(ST.Translations.Mail_Message),this.messageContent=i.observable(ST.Translations.Mail_MessageContent),this.messages=i.observable(ST.Translations.Mail_Messages),this.messageTranslatedFrom=i.observable(ST.Translations.Mail_MessageTranslatedFrom),this.more=i.observable(ST.Translations.Mail_More),this.moreActions=i.observable(ST.Translations.Mail_MoreActions),this.move=i.observable(ST.Translations.Mail_Move),this.moveToFolder=i.observable(ST.Translations.Mail_MoveToFolder),this.mustSelectGrade=i.observable(ST.Translations.Mail_MustSelectGrade),this.mustSelectRecipient=i.observable(ST.Translations.Mail_MustSelectRecipient),this.myCounselor=i.observable(ST.Translations.Mail_MyCounselor),this.myGroups=i.observable(ST.Translations.Mail_MyGroups),this.myTeachers=i.observable(ST.Translations.Mail_MyTeachers),this.name=i.observable(ST.Translations.Mail_Name),this.newContactGroup=i.observable(ST.Translations.Mail_NewContactGroup),this.newFolder=i.observable(ST.Translations.Mail_NewFolder),this.newMessage=i.observable(ST.Translations.Mail_NewMessage),this.newMessages=i.observable(ST.Translations.Mail_NewMessages),this.nextMessage=i.observable(ST.Translations.Mail_NextMessage),this.no=i.observable(ST.Translations.Mail_No),this.noMessages=i.observable(ST.Translations.Mail_NoMessages),this.noRecipientsText=i.observable(ST.Translations.Mail_NoRecipientsText),this.noRecipientsTitle=i.observable(ST.Translations.Mail_NoRecipientsTitle),this.noRepliesAllowed=i.observable(ST.Translations.Mail_NoRepliesAllowed),this.noReply=i.observable(ST.Translations.Mail_NoReply),this.now=i.observable(ST.Translations.Mail_Now),this.ok=i.observable(ST.Translations.Mail_Ok),this.originalMessage=i.observable(ST.Translations.Mail_OriginalMessage),this.outbox=i.observable(ST.Translations.Mail_Outbox),this.parent=i.observable(ST.Translations.Mail_Parent),this.parentOf=i.observable(ST.Translations.Mail_ParentOf),this.parents=i.observable(ST.Translations.Mail_Parents),this.period=i.observable(ST.Translations.Mail_Period),this.previousMessage=i.observable(ST.Translations.Mail_PreviousMessage),this.public=i.observable(ST.Translations.Mail_Public),this.read=i.observable(ST.Translations.Mail_Read),this.readCountExplanation=i.observable(ST.Translations.Mail_ReadCountExplanation),this.readStatus=i.observable(ST.Translations.Mail_ReadStatus),this.recurrence=i.observable(ST.Translations.Mail_Recurrence),this.removeRecipient=i.observable(ST.Translations.Mail_RemoveRecipient),this.removeAllRecipients=i.observable(ST.Translations.Mail_RemoveAllRecipients),this.removeAllRecipientsText=i.observable(ST.Translations.Mail_RemoveAllRecipientsText),this.removeAllRecipientsTitle=i.observable(ST.Translations.Mail_RemoveAllRecipientsTitle),this.repliesForwards=i.observable(ST.Translations.Mail_RepliesForwards),this.reply=i.observable(ST.Translations.Mail_Reply),this.replyAll=i.observable(ST.Translations.Mail_ReplyAll),this.responseActions=i.observable(ST.Translations.Mail_ResponseActions),this.room=i.observable(ST.Translations.Mail_Room),this.save=i.observable(ST.Translations.Mail_Save),this.saveAsDraft=i.observable(ST.Translations.Mail_SaveAsDraft),this.school=i.observable(ST.Translations.Mail_School),this.search=i.observable(ST.Translations.Mail_Search),this.sectionId=i.observable(ST.Translations.Mail_SectionID),this.selectFromList=i.observable(ST.Translations.Mail_SelectFromList),this.send=i.observable(ST.Translations.Mail_Send),this.senderDisabledTranslation=i.observable(ST.Translations.Mail_SenderDisabledTranslation),this.sent=i.observable(ST.Translations.Mail_Sent),this.settings=i.observable(ST.Translations.Mail_Settings),this.shouldTranslate=i.observable(ST.Translations.Mail_ShouldTranslate),this.showDeletedMessages=i.observable(ST.Translations.Mail_ShowDeletedMessages),this.showDetails=i.observable(ST.Translations.Mail_ShowDetails),this.showOriginalText=i.observable(ST.Translations.Mail_ShowOriginalText),this.staff=i.observable(ST.Translations.Mail_Staff),this.staffAllGrades=i.observable(ST.Translations.Mail_StaffAllGrades),this.startTime=i.observable(ST.Translations.Mail_StartTime),this.status=i.observable(ST.Translations.Mail_Status),this.student=i.observable(ST.Translations.Mail_Student),this.studentGroups=i.observable(ST.Translations.Mail_StudentGroups),this.students=i.observable(ST.Translations.Mail_Students),this.subject=i.observable(ST.Translations.Mail_Subject),this.synergyMailEnabled=i.observable(ST.Translations.Mail_SynergyMailEnabled),this.systemMessages=i.observable(ST.Translations.Mail_SystemMessages),this.term=i.observable(ST.Translations.Mail_Term),this.teacher=i.observable(ST.Translations.Mail_Teacher),this.teachers=i.observable(ST.Translations.Mail_Teachers),this.to=i.observable(ST.Translations.Mail_To),this.topic=i.observable(ST.Translations.Mail_Topic),this.trash=i.observable(ST.Translations.Mail_Trash),this.type=i.observable(ST.Translations.Mail_Type),this.unableToAddAttachment=i.observable(ST.Translations.Mail_UnableToAddAttachment),this.unableToCompose=i.observable(ST.Translations.Mail_UnableToCompose),this.unableToComposeWhileComposing=i.observable(ST.Translations.Mail_UnableToComposeWhileComposing),this.unableToComposeWhileImpersonated=i.observable(ST.Translations.Mail_UnableToComposeWhileImpersonated),this.unableToDeleteFolderText=i.observable(ST.Translations.Mail_UnableToDeleteFolderText),this.unableToDeleteFolderTitle=i.observable(ST.Translations.Mail_UnableToDeleteFolderTitle),this.unassigned=i.observable(ST.Translations.Mail_Unassigned),this.undelete=i.observable(ST.Translations.Mail_Undelete),this.unread=i.observable(ST.Translations.Mail_Unread),this.unreadMessages=i.observable(ST.Translations.Mail_UnreadMessages),this.updateContactLog=i.observable(ST.Translations.Mail_UpdateContactLog),this.uploading=i.observable(ST.Translations.Mail_Uploading),this.userGroup=i.observable(ST.Translations.Mail_UserGroup),this.userGroups=i.observable(ST.Translations.Mail_UserGroups),this.users=i.observable(ST.Translations.Mail_Users),this.viewMessage=i.observable(ST.Translations.Mail_ViewMessage),this.waitingToLoadTranslation=i.observable(ST.Translations.Mail_WaitingToLoadTranslation),this.yes=i.observable(ST.Translations.Mail_Yes),this.openSurvey=i.observable(ST.Translations.Mail_OpenSurvey)}return e.prototype.format=function(e,t){for(var a=e,i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];a=a.split("@@".concat(s,"@@")).join(t[s])}return a},e}();t.Translation=n},3926:function(e,t,a){"use strict";var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var a,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,r[0]&&(o=0)),o;)try{if(a=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},s=this;Object.defineProperty(t,"__esModule",{value:!0}),t.SMApp=void 0;var o=a(9061),r=a(5513),l=a(4780),d=a(3946),c=a(2372),u=a(2958),p=a(1575),h=a(6326),m=a(7279),b=a(5956),g=a(114),S=a(6623),v=a(7449),f=a(340),M=a(7940),y=a(1953),T=a(1822),w=a(6197),A=a(9568),x=a(3658),D=a(2999),R=a(6438);a(5082);var C=a(6853),E=a(3720),O=a(8076),I=a(2617),F=function(){function e(){this.rootViewModel=null,this.registerComponents()}return e.prototype.checkForNewMessages=function(e){E.MessageService.getUnreadMessageCount().then((function(t){t.successful&&(I.SM.SMApp().rootViewModel&&I.SM.rootWindow()?(I.SM.SMApp().rootViewModel.refreshInbox(t.data),e(t.data)):I.SM.updateUnreadMessagesBadge(t.data))})).catch((function(e){console.error(e.error)}))},e.prototype.startRoot=function(){ko.applyBindings(null,$(".message-list")[0])},e.prototype.composeAdvanced=function(e){var t=this;I.SM.userType,C.UserType.Staff;var a=e.to.map((function(e){return e.getData()})),s=e.cc?e.cc.map((function(e){return e.getData()})):null,o=e.bcc?e.bcc.map((function(e){return e.getData()})):null;E.RecipientService.getRecipientAddressing(a,s,o).then((function(a){var s=a.to().concat(a.cc()).concat(a.bcc()).length>0;if(a.invalidRecipients().length>0&&!s){var o="Unable to compose message. ";switch(a.invalidRecipients()[0].recipientList()){case C.RecipientList.Staff:o+="Staff is not active, has been excluded from ParentVUE & StudentVUE or is not associated with a school that has Synergy Mail enabled for parents or students.";break;case C.RecipientList.Parents:o+="Parent does not have Contact Allowed, Educational Rights or Mailings Allowed for any active children enrolled in schools with Synergy Mail enabled for parents.";break;case C.RecipientList.Students:o+="Student is not active or is not enrolled at a school with Synergy Mail enabled for students."}ST.ShowMessage(o)}else{var r=t;i(t,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:return[4,E.MiscService.getAttachmentsFromLinks(e.links)];case 1:return t=n.sent()||[],[4,E.MiscService.getAttachmentsFromQueryXml(e.attachQueryXml)];case 2:return i=n.sent(),t=t.concat(i),r.startComposeInternal(e,a.to(),a.cc(),a.bcc(),t),[2]}}))}))}}))},e.prototype.compose=function(e,t,a,i,n,s){this.composeAdvanced({to:[new C.Recipient({id:t,recipientList:e,organizationYearId:a})],subject:i,messageText:n,isMeeting:!1,allowNonStaffRecipients:s})},e.prototype.composeEx=function(e){this.composeAdvanced({to:e.to?this.loadRecipients(e.to):[],cc:e.cc?this.loadRecipients(e.cc):[],bcc:e.bcc?this.loadRecipients(e.bcc):[],subject:e.subject,messageText:e.messageText,isCommunication:e.isCommunication,isUrgent:e.isUrgent,allowSMS:e.allowSMS,allowVoice:e.allowVoice,allowSocial:e.allowSocial,scTemplateGU:e.scTemplateGU,isEditingTemplate:e.isEditingTemplate,templateOrgGU:e.templateOrgGU,isMeeting:e.isMeeting,meetingStartDate:new Date(e.meetingStartDate),meetingEndDate:new Date(e.meetingEndDate),surveyGU:e.surveyGU,suppressUi:e.suppressUi,onSend:e.onSend,links:e.links,attachQueryXml:e.attachQueryXml,allowNonStaffRecipients:e.allowNonStaffRecipients,studentGU:e.studentGU})},e.prototype.editDraft=function(e,t){E.MessageService.getMessage(e,!1,I.SM.languageCode(),!1).then((function(a){a.isMeeting()?E.MessageService.createMessage(C.CreateMessageType.MeetingUpdate,e,I.SM.languageCode()).then((function(e){I.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft},e,!1,t)})):I.SM.topWindow().SM.compose({editorType:b.SMEditorType.EditDraft},a,!1,t)}))},e.prototype.viewMessageFromAction=function(e){E.MessageService.getViewMessage(e).then((function(e){R.SMViewMessageViewModel.instantiate({allowActions:!1,onInitialized:function(t){t.show(e)}})}))},e.prototype.viewMessage=function(e){var t=!I.SM.impersonated;E.MessageService.getMessage(e.id,t,I.SM.languageCode(),e.isSystemMessage).then((function(t){e.noReply&&t.noReply(!0),R.SMViewMessageViewModel.instantiate({allowActions:e.allowActions,onInitialized:function(e){e.show(t)},onDelete:e.onDelete,onSMTPReply:e.onSMTPReply})}))},e.prototype.showTemplateDropDown=function(e){null===I.SM||void 0===I.SM||I.SM.editorVM.showTemplateDropDown(e)},e.prototype.showTokenDropDown=function(e,t){$("#tokenPopover"+t.name)[0]||D.SMTokenPopoverViewModel.instantiate({button:e,editor:t})},e.prototype.loadRecipients=function(e){var t=new Array;if(e)for(var a=0,i=e;a<i.length;a++){var n=i[a],s=new C.Recipient;if(n.GroupUserTypes=n.GroupUserTypes||C.GroupUserType.None,s.id(n.GU),s.recipientList("number"==typeof n.RecipientList?n.RecipientList:+C.RecipientList[n.RecipientList]),s.groupUserTypes("number"==typeof n.GroupUserTypes?n.GroupUserTypes:+C.GroupUserType[n.GroupUserTypes]),s.contactDetails1(n.Details1),s.contactDetails2(n.Details2),s.associatedStudentId(n.AssociatedStudentGU),s.associatedStudentName(n.AssociatedStudentName),s.organizationYearId(n.OrganizationYearGU),s.organizationName(n.OrganizationName),n.Section){var o=new C.Section;o.id(n.Section.SectionGU),o.period(n.Section.Period),o.term(n.Section.Term),o.sectionId(n.Section.SectionID),o.courseId(n.Section.CourseID),o.course(n.Section.Course),o.teacher(n.Section.Teacher),o.room(n.Section.Room),o.grade(n.Section.Grade),s.section(o)}t.push(s)}return t},e.prototype.startComposeInternal=function(e,t,a,i,n){if(I.SM.impersonated)O.SMDialog.showMessage(O.SMDialogButtons.Ok,I.SM.translation.unableToCompose(),I.SM.translation.unableToComposeWhileImpersonated());else if(e.editorType=b.SMEditorType.New,e.isCommunication&&e.isEditingTemplate&&(e.onSend=function(){var e=$("#PrimaryView").viewData();e&&e.Refresh()}),e.scTemplateGU)E.TemplateService.getTemplate(e.scTemplateGU).then((function(n){var s=new C.Message;t&&s.to(t.slice(0)),a&&s.cc(a.slice(0)),i&&s.bcc(i.slice(0)),s.subject(n.emailSubject()),s.messageText(n.emailBody()),s.smsMessage(n.smsMessage()),s.voiceText(n.voiceText());var o=new C.Template({templateId:n.templateId(),organizationId:n.organizationId(),name:n.name(),priority:n.priority(),sendEmail:n.sendEmail(),sendSMS:n.sendSMS(),sendVoice:n.sendVoice()});I.SM.topWindow().SM.compose(e,s,o)}));else{var s=new C.Message;t&&s.to(t.slice(0)),a&&s.cc(a.slice(0)),i&&s.bcc(i.slice(0)),s.subject(e.subject),s.messageText(e.messageText),s.isMeeting(e.isMeeting),s.meetingStartDate(e.meetingStartDate),s.meetingEndDate(e.meetingEndDate),s.surveyGU(e.surveyGU),s.attachments(n),I.SM.topWindow().SM.compose(e,s)}},e.prototype.registerComponents=function(){window.RecipientList=C.RecipientList,window.GroupUserType=C.GroupUserType,window.FolderType=C.FolderType,window.SynergyMailMode=C.SynergyMailMode,window.CommunicationType=C.CommunicationType,window.UserType=C.UserType,window.SMDialogType=c.SMDialogType,window.AttachmentStatus=C.AttachmentStatus,window.StaffRecipientAccess=C.StaffRecipientAccess,window.TeacherStudentAccess=C.TeacherStudentAccess,window.ParentRecipientAccess=C.ParentRecipientAccess,window.StudentRecipientAccess=C.StudentRecipientAccess,window.ContactListSecurity=C.ContactListSecurity,window.ContactLogOption=C.ContactLogOption,window.SM=I.SM,ko.bindingHandlers.modal={init:function(e,t){$(e).modal({backdrop:"static",keyboard:!0,show:!1});var a=t();$(e).on("show.bs.modal",(function(){a()||a(!0)})),$(e).on("hide.bs.modal",(function(){a()&&a(!1)}))},update:function(e,t){var a=t();ko.utils.unwrapObservable(a)?$(e).is(":visible")||$(e).modal("show"):$(e).is(":visible")&&$(e).modal("hide")}},ko.bindingHandlers.tooltip={init:function(e,t){var a=ko.utils.unwrapObservable(t()),i={};ko.utils.extend(i,ko.bindingHandlers.tooltip.options),ko.utils.extend(i,a),$(e).tooltip(i),ko.utils.domNodeDisposal.addDisposeCallback(e,(function(){$(e).tooltip("destroy")}))},options:{trigger:"hover focus",placement:"auto",delay:{show:1e3}}},this.registerComponent("sm-root",T.SMRootComponent),this.registerComponent("sm-compose",d.SMComposeComponent),this.registerComponent("sm-recipient-list-edit",f.SMRecipientListEditComponent),this.registerComponent("sm-add-recipient",o.SMAddRecipientComponent),this.registerComponent("sm-recipient-box",v.SMRecipientBoxComponent),this.registerComponent("sm-recipient-search",M.SMRecipientSearchComponent),this.registerComponent("sm-dialog",c.SMDialogComponent),this.registerComponent("sm-schedule-send",w.SMScheduleSendComponent),this.registerComponent("sm-edit-folder",p.SMEditFolderComponent),this.registerComponent("sm-edit-signature",h.SMEditSignatureComponent),this.registerComponent("sm-edit-template",m.SMEditTemplateComponent),this.registerComponent("sm-token-popover",D.SMTokenPopoverComponent),this.registerComponent("sm-read-status",S.SMReadStatusComponent),this.registerComponent("sm-settings",x.SMSettingsComponent),this.registerComponent("sm-recurrence",y.SMRecurrenceComponent),this.registerComponent("sm-edit-contact-group",u.SMEditContactGroupComponent),this.registerComponent("sm-message",g.SMMessageComponent),this.registerComponent("sm-view-message",R.SMViewMessageComponent),this.registerComponent("sm-audit-report",l.SMAuditReportComponent),this.registerComponent("sm-select-addresses",A.SMSelectAddressesComponent),this.registerComponent("sm-editor",b.SMEditorComponent),this.registerComponent("sm-audio-recorder",r.SMAudioRecorderComponent)},e.prototype.registerComponent=function(e,t){ko.components.isRegistered(e)||ko.components.register(e,t)},e}();t.SMApp=F,window.SMApp=new F,$((function(){var e,t;if(I.SM.rootWindow()&&(null===(t=$(null===(e=I.SM.rootWindow().document.body)||void 0===e?void 0:e.parentElement))||void 0===t||t.removeClass("within-iframe")),I.SM.impersonated||I.SM.mode!==C.SynergyMailMode.On||I.SM.topWindow()!==window||setInterval(I.SM.SMApp().checkForNewMessages.bind(s),I.SM.checkUnreadMessagesTimeout),window.STView){ST.LoadTemplates();var a=$('<div id="PrimaryView" class="REV_VIEW hidden"></div>').appendTo("body");I.SM.stView=new STView($("<REV_VIEW></REV_VIEW>")[0],a[0])}}))},1334:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});const i="data:image/gif;base64,R0lGODlhFAAUAOMAAMzOzNzq7OT6/NTe3Nzy9MzS1Nzu7OT+/NTi5MzMzAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAJACwAAAAAFAAUAAAEdzBJCYYR5wgzwPzSgGVkJgygFJREEBBlAK4Z4k0AMsqhWaSSwggFwAh+wKCpUkt+EBlL5uZMADKXA6H6MWgyPG6CBharTFpzwruZiq8HTpMLPXSMyKRQ4xn49EMTNAI2Hzk7MyUGLgQjB2EfIiUlJ04VWRocVBIRACH5BAkKABgALAAAAAAUABQAhARChJyuxNTe3FR6pMz+/DxmlMTGxBxSjAxKjNzq7Nzy9MzOzAxGhHSOrOT6/ARGhIzG/NTi5ERunMTGzNzu7MzS1ISatOT+/MzMzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWMICaKi0A5F3BI1jS+ooBeNGCrASwmNK0kg8ID8CAkYDxaZPGaNCC0Y4zmqOhElZkAs0BVr6MKtaQEvyI0E41pJtFOF0X7RbnMpHNMMprfUeN9GHUOdRdsbQtvAmVzaBcCXXZWZll2TIuSYJWPI0kOSy8LEXdIPRcUCQkKMxd4LzKmpg5bYCVwdhSQMCEAIfkECQoAHAAsAAAAABQAFACEBEKErLbEPHq8nN78PGaU1N7c3PL0FFKMxMbEdI6szM7MDEqE3OrsDEaEVHqk5Pr8zMrMhJq0BEaERG6c1OLkHFKMxMbMzNLU3O7sVH6k5P78hJ60zMzMAAAAAAAAAAAABZMgJ4pKgT0aUE2RNb5igWo0YAPHBosMTRsMB0Fyc0BePRpF8bIkGjbHqEB7XHaiQMUW4ShQVuwosMAhqBqK+JUQDEw05pqEOmkM8xdGM2PkR0k0fn8cSSh4hHsPexpycwo0GGhqeRQ0BV98V2sXYExoYVidl4BVSy8KFH0wgRoYDAwGMxqDMDI+uHwFayV2fJKOIiEAIfkECQoAHgAsAAAAABQAFACEBEKEbKbkvOb0VHqkPGaUrLbE3PL0FFKMxMbE1N7cdI6szM7MDEqE3OrsDEaERG6c5Pr8zMrMhJq0BEaEjM78VH6kPGqUHFKMxMbM1OLkzNLU3O7s5P78hJ60zMzMAAAABZagJ4pLskEccD0SNr5ignI0YANHB4sNTRuNAWFyG0RePVpm8cIoHLbBKEGDaHaiwsUm8SxQVuyowMAhqJyM+KXgbmjMtQgDfaAM8hcBR2vkRwM2fX8igQB3hB4CFAFvHHFyXxwbaGp5GTQJkmFrGlVMaJw7GjMJI0kQSy8LGTN+SD6TDQ0GMxyvMDKxsRCmYiUnVZSQIiEAIfkECQoAHwAsAAAAABQAFACEBEKEjLLU1N7cRILEPGaUxMbE3PL0FFKMdI6szM7MDEqE3Ors3Pr8DEaErLbEVHqkRG6czMrMhJq05Pr8BEaE1OLkPGqUxMbMHFKMzNLU3O7srLrEVH6khJ605P78zMzMBZvgJ4qJoE0egEHSNb6igHo0YANHB4sLTRuLB4Fye0RePVol8bogGrbHSECbZHYiB8Ym+SRQVuzIocAVqJ6K+IXgamjMtegChaAM8hcBR1vkRw82fX8igQB3hB97B28ecXJ0ABBoanltABJfHmFrG2UHBR9onDsZDAOYI0kTSy8JFTMBMEk0GgsLBjMefjsyPr+bAmslJ1UaAo8iIQAh+QQJCgAeACwAAAAAFAAUAIQEQoR8uvw8ery86uw8ZpTc8vSstsQUUox0jqzExsTU3tzMzswMSoTc6uwMRoRUeqREbpzk+vyEmrTMyswERoQ8apQcUozExszU4uTM0tTc7uxUfqTk/vyEnrTMzMwAAAAFmKAniouiRRxgQdI1vqKCcjRgA0cHiw1NF40HgXJ7TF49GmbxuiActsdIQYtkdiKDxSbxLFBW7MjAwCWoHIz4heBqaMy16AKFoAryFwFHa+RHDzZ9fyKBAHeEHnsHbxxxcnQAEGhqeW0AEl8cYWtkZh5onDtaXCNJEUtNCGUAUkg+HBoNDRoCRQk7MrA0AThdYiUnVQMSuC8hACH5BAkKAB4ALAAAAAAUABQAhARChHy+/FR6pNTe3DxmlMT+/Ky2xBRSjHSOrMTGxMzOzAxKhNzq7Nzy9ISatAxGhERunMzKzOT6/ARGhFR+pNTi5DxqlBxSjGyWxMTGzMzS1Nzu7ISetOT+/MzMzAAAAAWaoCeKyrBJHXBBTja+4oB2NGADBweLDE03DAFhchNEXj1aRfHKIB42wWhAk2h2IsPF5vAoUFbsyLDAJaidiviF4G5ozLUoA4WgGvIXAUdj5EcCNn1/IoEAd4QeewdvHXFydAAQaGp5bQAOXx1ha2RmHmicO1pcI0kSS00IZQBSSD4FBAICFlBRCTsyHQE3NwddYiUYF0QHLLgvIQAh+QQJCgAfACwAAAAAFAAUAIQEQoSstsRUeqSs6vwsYpzU3twUUoykzuzc8vTExsQMSoR0jqzMzswMRoQ8ZpTc6uwERoTk+vzMysyEmrREbpxUfqTU4uQcUozExszM0tQ8apTc7uwERozk/vyEnrTMzMwFoOAnikyxRR1wURM2vmKBdjRgA4YHiw9NIw+BA3ITSF49moXxwiwaNsGoQItkdqLAxTb5MFBW7CigwCWoHYv4teBuaMy1CAOloBDylwNHe+RHAjZ9fyKBAHeEH3sGbx1xcnQAFGhqeW0AE18dYWtkZh9UAwQBYlpcIwccAAoLLiMJC2UAUiMShgANGgJCRFEJOxMGN8M4XWIJExTCOCy/LyEAIfkECQoAHgAsAAAAABQAFACEBEKEfLb0VHqk1N7cPGaUrLbEdI6s3PL0FFKMxMbEzM7MDEqETI7U3OrsDEaERG6chJq05Pr8zMrMBEaEVH6k1OLkPGqUHFKMxMbMzNLUXIq83O7shJ605P78zMzMAAAABaCgJ4rKsEUdcD0QNr7igHY0YAMIB4sNTR8NAWFyE0hePVpF8cIYHDbBaECLZHaiwsUG8ShQVuyosMAlqJ2K+GXgbmjMtQgDfaAO8hcBR2vkRwI2fX8igQABDBqEHnsIDwALLnkJdRA2Bn9tABAJCAAOBXJkZh6WKqFYWlyANgsGkiIJBmUAUiMYhp8WAkJEUQk7EJ43xAhdYgkQD8OOnDAhACH5BAkKAB4ALAAAAAAUABQAhARChKy2xFR6pNTe3CRmpNzy9MTGxBRSjHSOrMzOzAxKhNzq7DxmlNz6/AxGhMzKzISatERunOT6/ARGhIzO/FR+pNTi5MTGzBxSjMzS1Nzu7DxqlISetOT+/MzMzAAAAAWcoCeKyaBJHYBF0DW+4oB2NGADBweLC00XCwFjchM8Xj2aJfG6IBw2wWhAk2R2ogDGBvE8Gh0rdhRQ4AwQAsUyfiG4EYDD1RYZoJEDgFF/MXBRfSMCNwBSgh6EgBuIHn8HcXOCdwAsNgiCbwAQBnoOAXVlZx4QNhigWFpcgzYKCHR2CGaGTYpyGwJCRFEGOxB6hTcHXWNoeTaQnDAhACH5BAkKAB0ALAAAAAAUABQAhARChKy2xDx2tNTe3DxmlLz6/BRSjMTGxHSOrAxKhNzq7Nzy9MzOzAxGhFR6pERunMzKzISatOT6/ARGhKzC3NTi5DxqlBxSjMTGzNzu7FR+pISetOT+/MzMzAAAAAAAAAWgYCeKzJBJHHA9ETa+IoVyNGADxgZ3kDMVtIXCQZjcHJCXxiaoMF4YhBHgGG1sl8BOFLjYIh2Mt6HdchO4Q8SGML8Q34ft4B4djA8DgFB/EXA2VX0iDjdUg4Q2ehaIHX8Gcg0ufQcNACxsg3AAEQd6ZHUBaAZ0ayplO11fI4UACQiTIgcIaIcjGK0ADRYORFNUdDAReoY3BmBmanmKLMEjIQAh+QQJCgASACwAAAAAFAAUAIQEQoR0jqw8ZpSstsQUUoxUeqQMSoTExsQMRoSEmrREbpzMyswERoQ8apQcUoxUfqTExsyEnrTMzMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFl6AkilCiOAzgKAk0vmLkAHRNEwksLUXNCIWCIEUrLF4PGiJweB0CxMIoQnMMdKLBDJCDzBBXbNYAIBwStID4FaCZaM216JBSEAAC+UtQLupHPTVSfxKBdw2EEnwECgAILnoHCAAsaX9tXAd3YHIDZGYSaCphOlpugDQGAZBzAWQAgySBjg1BQ4JxLwl3NjU4a2d2Nyy5IiEAIfkECQoAHgAsAAAAABQAFACEBEKErLbEVHqk1N7cPGaU3PL0FFKMxMbEVJLUvNLcDEqE3Ors1P78dI6sDEaERG6cHFKMzMrM5Pr8hJq0BEaEVH6k1OLkPGqUFFKUxMbMzM7M3O7s5P78hJ60zMzMAAAABaKgJ4rZ9EAUJ22DNr5iBwE0wN1qAnuRUFMEwWJzY2AEkVeF5mgcXhoLglYZdWiQwE4UmAE6nszMod1yFQDDYUJrmF8Nmon2fIsOFMDDACDYXwRpNAJ/Iz41hIUeh3wXih6BBg8ADhmFBw56bABuf3EAEwd8ZHYBaGoem1lmXXKGNAoNliMHDWgAiSSHlBcCAgR5g3UvE3w1xwYTb2t7NJKhMCEAIfkECQoAHQAsAAAAABQAFACEBEKErLbENHa0nN78PGaU1N7c3PL0FFKMxMbEdI6szM7MDEqE3OrsDEaEVHqkRG6c5Pr8zMrMhJq0BEaEPGqU1OLkHFKMxMbMzNLU3O7sVH6k5P78hJ60zMzMAAAAAAAABaBgJ4qX9FjTBmWFMr4iZwE0sN1qAXeRU08EByOD2zBgGlojgXgpKrhjjGYJ7EQYyE13mTWsV6wWopDQEuFXZSAw0ZppUgPwOAAI8RcFYAc48iM+NX+AHYJ2FIUdBHwPAA0XgAhzD2YAaHkJNBIIdl9xAQt8TZZVYQEzABKBNAsJkSMICaJ+LxeCjxQODgQTg3AvEn01NQerYQgmfQeVwCIhACH5BAkKAB4ALAAAAAAUABQAhARChHyy7FR6pNTe3DxmlKy2xHSOrNzy9BRSjMTGxMzOzAxKhFSGtNzq7AxGhERunISatOT6/MzKzARGhFR+pNTi5DxqlBxSjMTGzMzS1EyKzNzu7ISetOT+/MzMzAAAAAWkoCeKGPRcUxdtgzK+IncBNNDd6gB7klBPBEFjg+s0YBSaw5B4KSq4Y4x2KexEmchNh5k5rFesNqKA0AzhF7QzeNCaaZHitkEACPHXQUUT5EcNN31/IoEddhaEHgwaAW4OGH8JDgAWZgBoeQY0EAl2X3EFlAiRl1VhBTMAECM+AAsGkSMJBguDIxiuAA4WAgIEEzUCcC8QdjXICKxhCSbHCA+dMCEAIfkECQoAHgAsAAAAABQAFACEBEKElLrkVHqk1N7cJFqUxMbE3PL0FFKMdI6szM7MDEqE3OrsPGaUDEaEjM78zMrM5Pr8hJq0RG6cBEaErLbEVH6k1OLkxMbMHFKMzNLU3O7sPGqU5P78hJ60zMzMAAAABaKgJ4pXJGETB2lDMr5ihwE0wN3qAHuPUE8MwUKD4yxgFVoDUXglLLhjjIah7EQZyE13mTWsV6wWkojQEOEXlDOQ0JppUeKmOQAY8ZdBRRPkRws3fX8igRx2G4QeRBBuDRd/cxwaZgBoeWsDBXZfcVkqLpVVYRQEDmwjPgAKCJAjBQgKNAEvF6oADRsCAgwTNQJwLxF2NcUHEWkFJsQHEhHBIiEAIfkECQoAHgAsAAAAABQAFACEBEKErLbEVHqkpOL8PGaU1N7cXJ7c3PL0FFKMxMbEzM7MDEqE3OrsdI6sDEaEVIKsRG6c5Pr8zMrMhJq0BEaEVH6kPGqU1OLkHFKMxMbMzNLU3O7s5P78hJ60zMzMAAAABZugJ4rZBGEUF22FMr5ihwE0wN1qAXuSUFMEAWOD4zBgFZqjkXgpLrhjjIYJ7ESayE2XmTmsV6w2opjQGuEXlFOA0JppkeK2QQAI8ddBRRPkRww3fX8igRx2FoQeRBFuDhl/cxwbZgBoeWsFCXZfcVkqLpVVYZ9sIz4ACw2QI09RLxmoAA4WAgIWA687E3Y1NAY5aQkmvRgVBRIwIQAh+QQJCgAeACwAAAAAFAAUAIQEQoSstsRUeqTU3twcWpyk0uzc8vQUUoxUltTExsTMzswMSoTc6uw8ZpR0jqwMRoTk+vzMysxEbpyEmrQERoRUfqTU4uQcUozExszM0tTc7uw8apTk/vyEnrTMzMwAAAAFm6AnitgkXRQHaYMyvmJ3ATTA3eoAe5FQUw0BQ4PjMGAV2sOReCksuGOMdgnsRBnITYeZPaxXrBaimNAc4ReUM5DQmmmR4qY5ABrxl0FFE+RHDDd9fyKBHHYbhB5EEG4PGH9zHBpmAGh5awMJdl9xWSoulVVhn2wjPgALDpAjT1EvGKgABAYMQ0VSMBN2CEU3EDphCRMFEGMsLi8hACH5BAkKAB8ALAAAAAAUABQAhARChHyixMzS1FR6pCxqrNzq7Mz6/BRSjKy2xHSOrMTGxAxKhDxmlNz+/MzOzAxGhNTe3Nzy9ISatMzKzERunOT6/ARGhFR+pNzu7BxSjMTGzDxqlNTi5ISetOT+/MzMzAWY4CeKmkRllldhkDO+YpcBNODdKgR/01BbjEEBg/MUYBfaI6F4OTi4Y4yWQexEgspNp5k9rFestuKQ0BLhF9QDodCaaZHjhjkAGPFXREUb5EcFN31/IoEedhuEH0QVbg8af3MeGGYAaHlrEAp2X3FZKi5mBAYCYZ9sIwENKhwuI09aRjCGdAUFEbGyOxC5RTlpDhAYsSstMCEAIfkECQoAHgAsAAAAABQAFACEBEKEbKbctOb0VHqkPGaUrLbE3PL0FFKMxMbE1N7cdI6szM7MDEqE3OrsDEaERG6c5Pr8zMrMhJq0BEaEhMb8VH6kPGqUHFKMxMbM1OLkzNLU3O7s5P78hJ60zMzMAAAABZSgJ4qY9FwTB23JMr5idwE0wN1qAnvRUE+EQWOD4zRgFZpDgXgtMrhjjHYp7EQayE2HmTmsV6wWspDQFOEXlJN40Jpp0eK2OQAI8ZdBRRvkRw03fX8igRwBFAKEHnsrNy55C1osNxl/ay1jGnEaN2QeCZ6bV1lbgJ4ZkHIZWkYwhnQNDQatrjsJtUU5aQsJG60rLTAhACH5BAkKAB0ALAAAAAAUABQAhARChKy2xKzu/FR6pDxmlNTe3MTGxNzy9BRSjHSOrMzOzAxKhNzq7MzKzAxGhESGzMTKzOT6/ISatARGhFR+pERunNTi5MTGzBxSjMzS1Nzu7OT+/ISetMzMzAAAAAAAAAWQYCeKl1Rh0xZphTK+IocBNLDdagF3zVBPhAFDg9swYBSaI2F4KSy4Y4yGCexEmchNB5k5rFesNqIoCB6J8Au6KRDJ6pHiptEe4q/3TYrvMIp8eH8qG3d9HW9EGy54cxssNxZ9bC1jGXFZKi4FNxGXV5ltI4MRFowiT1pGMIN0DAwHqqs7BbJFOWpldZ0spyIhACH5BAkKABgALAAAAAAUABQAhARChKS61KTi/FR6pNTe3Nzy9BxenMTGxBxSjNzq7Nz+/MzOzAxGhHSOrDxmlOT6/ARGhNTi5MTGzNzu7MzS1ISatERunOT+/MzMzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWLICaKUmUh0PVMxDK+YoAANHDdKgGLiWIAEMcgMcFdErDETdA4vBYRHFJEuD0oOxHlcdMtuBdsVmtdVC+R8St6IRQvLrVocZtwC/JXETzNY5RSfjxWF3iCe29xcnQXLDdpeWwtXFdyWyouZ5VZl20jgA8RihhQfElGEwkJBWBHWQStRjlqZnZWLKMYIQA7"},1032:e=>{"use strict";e.exports=ko},2390:e=>{"use strict";e.exports=ko.mapping},6885:e=>{"use strict";e.exports=window}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,a),s.exports}a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(3926)})();
//# sourceMappingURL=PXP_SMBundle.js.map